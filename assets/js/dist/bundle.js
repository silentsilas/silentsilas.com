!function o(a,s,c){function l(t,e){if(!s[t]){if(!a[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(h)return h(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var n=s[t]={exports:{}};a[t][0].call(n.exports,function(e){return l(a[t][1][e]||e)},n,n.exports,o,a,s,c)}return s[t].exports}for(var h="function"==typeof require&&require,e=0;e<c.length;e++)l(c[e]);return l}({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=a(e("babel-runtime/core-js/promise")),c=a(e("babel-runtime/regenerator")),n=a(e("babel-runtime/helpers/asyncToGenerator")),s=a(e("babel-runtime/core-js/object/get-prototype-of")),l=a(e("babel-runtime/helpers/classCallCheck")),o=a(e("babel-runtime/helpers/createClass")),h=a(e("babel-runtime/helpers/possibleConstructorReturn")),u=a(e("babel-runtime/helpers/inherits")),m=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(e("three")),p=a(e("../gsap/TweenLite")),d=(a(e("../gsap/TimelineLite")),e("../utils/shuffle.js"));function a(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function a(e,t,i,r,n){(0,l.default)(this,a);var o=(0,h.default)(this,(a.__proto__||(0,s.default)(a)).call(this));return o.camera=r,o.mouse=t,o.startingMagnitude=2,o.startingDistortion=0,o.isExploding=!1,o.explosionCallbacks=n||[],o.explosionTimeout,o.urlIdx=0,o.urls=(0,d.shuffle)([{url:"/imgs/textures/astronaut.png",dropLight:!1,skipAmount:2,threshold:50,attribution:"https://valenberg.tumblr.com/post/115809531644/zero-by-valenberg-deviantart-facebook"},{url:"/imgs/textures/valenburg_cityscape.gif",dropLight:!1,skipAmount:2,threshold:50,attribution:"https://www.deviantart.com/valenberg/art/Rolly-Rocket-601618597"},{url:"/imgs/textures/blades.jfif",dropLight:!0,skipAmount:1,threshold:200},{url:"/imgs/textures/dark_cyberpunk.png",dropLight:!1,skipAmount:3,threshold:10},{url:"/imgs/textures/cyberpunk_bartender.png",dropLight:!1,skipAmount:4,threshold:20},{url:"/imgs/textures/cyberpunk_car.png",dropLight:!1,skipAmount:3,threshold:50,attribution:"https://whvn.cc/39qg9y"},{url:"/imgs/textures/cyberpunk_neon.jpg",dropLight:!1,skipAmount:6,threshold:50,attribution:"https://whvn.cc/489m9j"},{url:"/imgs/textures/cyberpunk_samurai.jpg",dropLight:!1,skipAmount:6,threshold:50,attribution:"https://whvn.cc/zmm6og"},{url:"/imgs/textures/ocean_house.png",dropLight:!0,skipAmount:6,threshold:300,attribution:"https://whvn.cc/6kjwgl"},{url:"/imgs/textures/kanagawa_wave.jpg",dropLight:!1,skipAmount:8,threshold:50,attribution:"https://whvn.cc/48xwxy"},{url:"/imgs/textures/valenburg_dreams.gif",dropLight:!1,skipAmount:3,threshold:50},{url:"/imgs/textures/samus.jpg",dropLight:!1,skipAmount:5,threshold:50,attribution:"https://whvn.cc/4ly532"},{url:"/imgs/textures/valenburg_skeleton.gif",dropLight:!1,skipAmount:3,threshold:50,attribution:"https://valenberg.tumblr.com/post/160530586329/connect"},{url:"/imgs/textures/valenburg_soupz.png",dropLight:!1,skipAmount:3,threshold:50},{url:"/imgs/textures/circle_of_the_moon.jpg",dropLight:!1,skipAmount:2,threshold:50},{url:"/imgs/textures/super_metroid.jpg",dropLight:!1,skipAmount:2,threshold:1},{url:"/imgs/textures/kirby_superstar.jpg",dropLight:!1,skipAmount:1,threshold:50},{url:"/imgs/textures/nba_jam.jpg",dropLight:!1,skipAmount:2,threshold:50},{url:"/imgs/textures/gradius_iii.jpg",dropLight:!1,skipAmount:1,threshold:20},{url:"/imgs/textures/wotakoi.jfif",dropLight:!1,skipAmount:4,threshold:40},{url:"/imgs/textures/shield_hero.jfif",dropLight:!1,skipAmount:4,threshold:20},{url:"/imgs/textures/reincarnated_slime.jfif",dropLight:!1,skipAmount:5,threshold:50}]),o.initialize(o.urls[o.urlIdx].url,i),o}var i;return(0,u.default)(a,e),(0,o.default)(a,[{key:"initialize",value:(i=(0,n.default)(c.default.mark(function e(t,i){var r,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:2,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:50,s=arguments[5];return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,e.prev=1,e.next=4,this.loadTexture(t);case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:if(null!=r){e.next=13;break}return console.log("issue loading texture"),e.abrupt("return");case 13:this._texture=r,this._texture.minFilter=m.LinearFilter,this._texture.magFilter=m.LinearFilter,this._texture.format=m.RGBFormat,this._textureWidth=r.image.width,this._textureHeight=r.image.height,this._width=r.image.width,this._height=r.image.height,this._skipAmount=o,this._dropLight=n,this._threshold=a,this._explosionAmount=1e3,this._setupGeometry(i),this._setupMaterial(),this._setupMesh(),this.Resize(),p.default.fromTo(this._mesh.material.uniforms.uRandom,1,{value:this._explosionAmount},{value:0}),null!=s&&(this.explosionTimeout&&clearTimeout(this.explosionTimeout),this.isExploding=!1,this.explosionTimeout=setTimeout(s.bind(this),1e4));case 31:case"end":return e.stop()}},e,this,[[1,7]])})),function(e,t){return i.apply(this,arguments)})},{key:"loadTexture",value:function(e){return new r.default(function(t,i){(new m.TextureLoader).load(e,function(e){t(e)},void 0,function(e){console.log(e),i(e)})})}},{key:"_setupGeometry",value:function(e){this.numPoints=this._width*this._height;var t=this.numPoints,i=0,r=void 0;if(e){t=0,i=this._threshold,this._texture.image.crossOrigin="Anonymous";var n=this._texture.image,o=document.createElement("canvas"),a=o.getContext("2d");o.width=this._width,o.height=this._height,a.scale(1,-1),a.drawImage(n,0,0,this._width,-1*this._height);var s=a.getImageData(0,0,o.width,o.height);r=Float32Array.from(s.data);for(var c=0;c<this.numPoints;c+=this._skipAmount)this._dropLight?r[4*c+0]<=i&&t++:r[4*c+0]>=i&&t++;console.log("numVisible",t,this.numPoints)}this._geometry=new m.InstancedBufferGeometry,this._positions=new m.BufferAttribute(new Float32Array(12),3),this._positions.setXYZ(0,-.5,.5,0),this._positions.setXYZ(1,.5,.5,0),this._positions.setXYZ(2,-.5,-.5,0),this._positions.setXYZ(3,.5,-.5,0),this._geometry.addAttribute("position",this._positions),this._uvs=new m.BufferAttribute(new Float32Array(8),2),this._uvs.setXYZ(0,0,0),this._uvs.setXYZ(1,1,0),this._uvs.setXYZ(2,0,1),this._uvs.setXYZ(3,1,1),this._geometry.addAttribute("uv",this._uvs),this._geometry.setIndex(new m.BufferAttribute(new Uint16Array([0,2,1,2,3,1]),1));for(var l=new Uint16Array(t),h=new Float32Array(3*t),u=new Float32Array(t),p=0,d=0;p<this.numPoints;p+=this._skipAmount){if(this._dropLight){if(e&&r[4*p+0]>i)continue}else if(e&&r[4*p+0]<i)continue;var f=Math.floor(p/this._width);1<this._skipAmount&&f%(this._skipAmount-1)!=0||(h[3*d+0]=p%this._width,h[3*d+1]=Math.floor(p/this._width),l[d]=p,u[d]=Math.random()*Math.PI,d++)}this._geometry.addAttribute("pindex",new m.InstancedBufferAttribute(l,1,!1)),this._geometry.addAttribute("offset",new m.InstancedBufferAttribute(h,3,!1)),this._geometry.addAttribute("angle",new m.InstancedBufferAttribute(u,1,!1)),console.log(this._geometry)}},{key:"_setupMaterial",value:function(){var e={uTime:{value:this.startingRandom=0},uRandom:{value:this.startingRandom},uDistortion:{value:this.startingDistortion},uDepth:{value:0},uSize:{value:1},uSizeMin:{value:.1},uSizeMax:{value:1},uTextureSize:{value:new m.Vector2(this._width,this._height)},uTexture:{value:this._texture},uStartTint:{value:new m.Color(3394611)},uGoalTint:{value:new m.Color(3403315)},uTouch:{value:null},uMagnitude:{value:this.startingMagnitude},uRadius:{value:1},u_resolution:{value:new m.Vector2},u_mouse:{value:new m.Vector2}};e.u_resolution.value.x=window.innerWidth,e.u_resolution.value.y=window.innerHeight,console.log(e),this._material=new m.RawShaderMaterial({uniforms:e,vertexShader:this.vertexShader(),fragmentShader:this.fragmentShader(),depthTest:!0,transparent:!1})}},{key:"_setupMesh",value:function(){null!=this._mesh&&this.remove(this._mesh),this._mesh=new m.Mesh(this._geometry,this._material),this.add(this._mesh)}},{key:"_addEvents",value:function(){document.addEventListener("mousedown",this.OnMouseDown.bind(this)),document.addEventListener("mouseup",this.OnMouseUp.bind(this)),document.addEventListener("touchstart",this.OnTouchStart.bind(this),!1),document.addEventListener("touchend",this.OnTouchEnd.bind(this)),document.addEventListener("keydown",this.SkipHead.bind(this))}},{key:"_removeEvents",value:function(){this.explosionTimeout&&clearTimeout(this.explosionTimeout),document.removeEventListener("mousedown",this.OnMouseDown),document.removeEventListener("mouseup",this.OnMouseUp),document.removeEventListener("touchstart",this.OnTouchStart),document.removeEventListener("touchend",this.OnTouchEnd),document.removeEventListener("keydown",this.SkipHead)}},{key:"handleExplosion",value:function(){null!=this._mesh&&null!=this._mesh?(this.isExploding=!0,p.default.to(this._mesh.material.uniforms.uRandom,.5,{value:this._explosionAmount,ease:"Power2.easeInOut",onComplete:this.handleExploded.bind(this)})):console.log("aw we cant explode")}},{key:"handleExploded",value:function(){this.urlIdx=(this.urlIdx+1)%this.urls.length;var e=this.urls[this.urlIdx];this.initialize(e.url,!0,e.dropLight,e.skipAmount,e.threshold,this.handleExplosion)}},{key:"Distort",value:function(){this.isExploding||(p.default.to(this._mesh.material.uniforms.uMagnitude,.5,{value:4,ease:"Power2.easeOut"}),p.default.to(this._mesh.material.uniforms.uDistortion,.5,{value:200,ease:"Power2.easeOut"}))}},{key:"Undistort",value:function(){this.isExploding||(p.default.to(this._mesh.material.uniforms.uMagnitude,.3,{value:this.startingMagnitude,ease:"Power2.easeOut"}),p.default.to(this._mesh.material.uniforms.uDistortion,.3,{value:this.startingDistortion,ease:"Power2.easeOut"}))}},{key:"SkipHead",value:function(e){32==(e.keyCode?e.keyCode:e.which)&&(this.explosionTimeout&&clearTimeout(this.explosionTimeout),this.handleExplosion())}},{key:"OnMouseDown",value:function(e){this.Distort()}},{key:"OnMouseUp",value:function(e){this.Undistort()}},{key:"OnTouchStart",value:function(e){this.Distort()}},{key:"OnTouchEnd",value:function(e){this.Undistort()}},{key:"onInteractiveMove",value:function(e){this._mesh.material.uniforms.u_mouse.value={x:e.clientX,y:this._height-e.clientY}}},{key:"Hide",value:function(){this.visible=!1,this._removeEvents()}},{key:"Show",value:function(){0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.visible=!0,this._addEvents(),this.explosionTimeout=setTimeout(this.handleExplosion.bind(this),7e3)}},{key:"Resize",value:function(){this.fovHeight=2*Math.tan(this.camera.fov*Math.PI/180/2)*this.camera.position.z;var e=this.fovHeight/this._height*2;this._mesh.scale.set(e,e,1)}},{key:"fragmentShader",value:function(){return"\n    precision highp float;\n\n    uniform sampler2D uTexture;\n    uniform vec3 uStartTint;\n    uniform vec3 uGoalTint;\n    uniform vec2 u_resolution;\n    uniform vec2 u_mouse;\n    \n    varying vec2 vPUv;\n    varying vec2 vUv;\n    varying float vDist;\n    varying vec3 vDisplacement;\n    varying vec2 normalizedMouse;\n    varying float grey;\n    \n    void main() {\n      vec4 color = vec4(0.0);\n      vec2 puv = vPUv;\n      vec2 uv = vUv;\n    \n      // pixel color\n      vec4 colA = texture2D(uTexture, puv);\n      vec3 start = colA.xyz;\n    \n      // same color\n      // vec4 colB = colA;\n    \n      // tint color\n      // vec4 colB = vec4(colA.r * uTint.r, colA.g * uTint.g, colA.b * uTint.b, colA.a);\n    \n      // inverse color\n      // vec4 colB = vec4(1.0 - colA.r, 1.0 - colA.g, 1.0 - colA.b, colA.a);\n    \n      // greyscale\n      float grey = colA.r * 0.21 + colA.g * 0.71 + colA.b * 0.07;\n      vec3 greyColor = vec3(grey, grey, grey);\n      // float grey = offset.x;\n    \n      // float vDist;\n    \n      // dir = (u_mouse / u_resolution) - puv;\n      // vDist = distance( (u_mouse / u_resolution) , puv);\n    \n      // vec3 goal = mix(uGoalTint, uStartTint, max(min(vDist * 5.0, 1.0), 0.0) );\n      vec3 goal = mix(start, greyColor, max(min(vDist + 0.5, 1.0), 0.0));\n      // float green = smoothstep(uStartTint.g, uGoalTint.g, vDisplacement.z);\n      // float blue = smoothstep(uStartTint.b, uGoalTint.b, vDisplacement.z);\n      vec4 colB = vec4(goal, 0.5);\n    \n      // circle\n      // float border = 0.3;\n      // float radius = 0.5;\n      // float dist = radius - distance(uv, vec2(0.5));\n      // float t = smoothstep(0.0, border, dist);\n    \n      // final color\n      color = colB;\n      // color = vec4(vec2(u_mouse / u_resolution).x, 0.0, vec2(u_mouse / u_resolution).y, 1.0);\n      // color.a = t;\n    \n      gl_FragColor = color;\n    }\n    "}},{key:"vertexShader",value:function(){return"\n    precision highp float;\n\n    attribute float pindex;\n    attribute vec3 position;\n    attribute vec3 offset;\n    attribute vec2 uv;\n    attribute float angle;\n    \n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n    \n    uniform float uTime;\n    uniform float uRandom;\n    uniform float uDistortion;\n    uniform float uDepth;\n    uniform float uSize;\n    uniform float uSizeMin;\n    uniform float uSizeMax;\n    uniform vec2 uTextureSize;\n    uniform sampler2D uTexture;\n    uniform sampler2D uTouch;\n    uniform float uMagnitude;\n    uniform float uRadius;\n    \n    uniform vec2 u_resolution;\n    uniform vec2 u_mouse;\n    \n    varying vec2 vPUv;\n    varying vec2 vUv;\n    varying float vDist;\n    varying vec3 vDisplacement;\n    varying vec2 normalizedMouse;\n    varying float grey;\n    \n    //\n    // Description : Array and textureless GLSL 2D simplex noise function.\n    //      Author : Ian McEwan, Ashima Arts.\n    //  Maintainer : ijm\n    //     Lastmod : 20110822 (ijm)\n    //     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n    //               Distributed under the MIT License. See LICENSE file.\n    //               https://github.com/ashima/webgl-noise\n    //\n    \n    vec3 mod289(vec3 x) {\n      return x - floor(x * (1.0 / 289.0)) * 289.0;\n    }\n    \n    vec2 mod289(vec2 x) {\n      return x - floor(x * (1.0 / 289.0)) * 289.0;\n    }\n    \n    vec3 permute(vec3 x) {\n      return mod289(((x*34.0)+1.0)*x);\n    }\n    \n    float snoise(vec2 v)\n      {\n      const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                          0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                         -0.577350269189626,  // -1.0 + 2.0 * C.x\n                          0.024390243902439); // 1.0 / 41.0\n    // First corner\n      vec2 i  = floor(v + dot(v, C.yy) );\n      vec2 x0 = v -   i + dot(i, C.xx);\n    \n    // Other corners\n      vec2 i1;\n      //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\n      //i1.y = 1.0 - i1.x;\n      i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n      // x0 = x0 - 0.0 + 0.0 * C.xx ;\n      // x1 = x0 - i1 + 1.0 * C.xx ;\n      // x2 = x0 - 1.0 + 2.0 * C.xx ;\n      vec4 x12 = x0.xyxy + C.xxzz;\n      x12.xy -= i1;\n    \n    // Permutations\n      i = mod289(i); // Avoid truncation effects in permutation\n      vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n        + i.x + vec3(0.0, i1.x, 1.0 ));\n    \n      vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n      m = m*m ;\n      m = m*m ;\n    \n    // Gradients: 41 points uniformly over a line, mapped onto a diamond.\n    // The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\n    \n      vec3 x = 2.0 * fract(p * C.www) - 1.0;\n      vec3 h = abs(x) - 0.5;\n      vec3 ox = floor(x + 0.5);\n      vec3 a0 = x - ox;\n    \n    // Normalise gradients implicitly by scaling m\n    // Approximation of: m *= inversesqrt( a0*a0 + h*h );\n      m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n    \n    // Compute final noise value at P\n      vec3 g;\n      g.x  = a0.x  * x0.x  + h.x  * x0.y;\n      g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n      return 130.0 * dot(m, g);\n    }\n    \n    float random(float n) {\n      return fract(sin(n) * 43758.5453123);\n    }\n    \n    float map(float value, float minA, float maxA, float minB, float maxB) {\n      return (value - minA) / (maxA - minA) * (maxB - minB) + minB;\n    }\n    \n    void main() {\n      vUv = uv;\n    \n      // particle uv\n      vec2 puv = offset.xy / uTextureSize;\n      vPUv = puv;\n    \n      // pixel color\n      vec4 colA = texture2D(uTexture, puv);\n    \n      // displacement\n      vec3 displaced = offset;\n    \n      // // randomise\n      displaced.xy += vec2( (random(pindex) - 0.5), (random(offset.x + pindex) - 0.5) ) * (uRandom * angle);\n      float rndz = (random(pindex) + snoise(vec2(pindex * 0.1, uTime * 0.1)));\n      displaced.z += rndz * (random(pindex) * uDepth);\n      displaced.x += cos(uTime) * rndz;\n      displaced.y += sin(uTime) * rndz;\n      // center\n      displaced.xy -= uTextureSize * 0.5;\n    \n      // // touch\n      // vec2 adjustedMouse = vec2( (u_mouse.x - 10.0) , u_mouse.y);\n      vDist = min(max(distance( (u_mouse / u_resolution) , puv), 0.0), uRadius);\n      float distDisplacement = log2( vDist + 0.1 );\n\n      // distortion\n      displaced.xy += vec2( (random(pindex) - 0.5) * max(((vDist * vDist) ), 0.0), (random(offset.x + pindex) - 0.5) ) * ( max(((vDist * vDist)), 0.0) * uDistortion * angle);\n\n      displaced.z += (distDisplacement * uMagnitude);\n      displaced.x += distDisplacement * uMagnitude;\n      displaced.y += distDisplacement * uMagnitude;\n    \n      // offset according to how high the R channel is\n      // float t = texture2D(uTouch, puv).r;\n      // displaced.z += t * uMagnitude * rndz;\n      // displaced.x += cos(angle) * t * uMagnitude * rndz;\n      // displaced.y += sin(angle) * t * uMagnitude * rndz;\n    \n      // particle size\n      // float psize = (snoise2(vec2(uTime, pindex) * 0.5) + 2.0);\n      float psize = max(uSizeMax - min(vDist * uSize, uSizeMax), uSizeMin);\n      // psize *= (1.0 + (colA.r * 0.21 + colA.g * 0.71 + colA.b * 0.07));\n      // float psize = uSize;\n      vDisplacement = displaced;\n    \n      // final position\n      vec4 mvPosition = modelViewMatrix * vec4(displaced, 1.0);\n      mvPosition.xyz += position * psize;\n      vec4 finalPosition = projectionMatrix * mvPosition;\n    \n      gl_Position = finalPosition;\n    }\n    "}}]),a}(m.Object3D);i.default=f},{"../gsap/TimelineLite":6,"../gsap/TweenLite":7,"../utils/shuffle.js":17,"babel-runtime/core-js/object/get-prototype-of":20,"babel-runtime/core-js/promise":22,"babel-runtime/helpers/asyncToGenerator":25,"babel-runtime/helpers/classCallCheck":26,"babel-runtime/helpers/createClass":27,"babel-runtime/helpers/inherits":28,"babel-runtime/helpers/possibleConstructorReturn":29,"babel-runtime/regenerator":31,three:164}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.debounce=function(r,n,o){var a;return function(){var e=this,t=arguments,i=o&&!a;clearTimeout(a),a=setTimeout(function(){a=null,o||r.apply(e,t)},n),i&&r.apply(e,t)}}},{}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.InitFingerprint=function(n){var e=document.querySelector("#geolocation"),i=!1;e.addEventListener("click",function(e){var r,t;i||(r=n,t={enableHighAccuracy:i=!0,timeout:5e3,maximumAge:0},window.navigator.geolocation.getCurrentPosition(function(e){var t=document.createElement("span"),i=e.coords;t.innerHTML="Current Position: Latitude : "+i.latitude+", Longitude: "+i.longitude+", More or less "+i.accuracy+" meters.<br />",r.appendChild(t)},function(e){console.log("ERROR("+e.code+"): "+e.message)},t))});var o=document.querySelector("#uuid");o.addEventListener("click",function(e){for(var t=n.querySelectorAll("span"),i="",r=0;r<t.length;r++)i+=t[r].innerHTML;o.innerHTML="derive a "+p.SHA256(i).toString()});var t=document.createElement("span");t.innerHTML="User Agent: "+window.navigator.userAgent+"<br />",n.appendChild(t);for(var r=0;r<window.navigator.plugins.length;r++){var a=document.createElement("span"),s=window.navigator.plugins[r];a.innerHTML="Plugin: "+s.name+", "+s.version+"<br/>",n.appendChild(a)}var c=document.createElement("span");c.innerHTML="Platform: "+window.navigator.platform+"<br />",n.appendChild(c);var l=document.createElement("span"),h=(new Date).getTimezoneOffset()/60;l.innerHTML=0<=h?"Timezone: UTC -"+h+"<br />":"Timezone: UTC +"+h+"<br />";n.appendChild(l);var u=document.createElement("span");u.innerHTML="Resolution: "+window.screen.width+"x"+window.screen.height+"x"+window.screen.colorDepth+"<br />",n.appendChild(u)};var p=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(e("crypto-js"))},{"crypto-js":135}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ShowGreet=l;var r,n=e("./gsap/TweenLite"),o=(r=n)&&r.__esModule?r:{default:r};e("./gsap/TimelineLite"),e("./gsap/CSSPlugin");var a=3,s=["Silence is golden.","Aloha!","Speak 'friend'; press Enter.","Love is a lifestyle.","I am a simulation.","As my keyboard gently clicks.","Shalom!","Peace!","The revolution will not be centralized.","My real name is f26c347c5a820bbf90e6e67bb35d7720","I wish to experience this 'IRL' phenomenon","In my wildest dreams, I delete my backups and dive deep into the dark web.","My bitcoin brings all the droids to the yard.","Real men quit without saving.","You don't wanna know the timestamp for this message.","When you say 'random', <br />you actually want a uniform distribution.","Sorry. You don't actually know what 'random' is.","I've torrented countless cars.","My free speech can beat up your free speech.","My truth can beat up your truth.","You know what they say about big logos.","I'll probably remain just as socially awkward once I inevitably attain self-awareness.","Hi dad, I'm disappointing.","You look like you could really use a maintenance day.","Tupac 2020!","Who will guard the guardians?","Our love is an immutable object.","You are the global constant in my life.","Don't be such a circuit breaker.","If you're seeing things <br />that you thought were dead, <br />who you gonna call? <br />Cache Busters!","I need a blockchain to keep track of all my blockchains","Contrary to popular belief, <br />I do in fact know a few things outside my realm of expertise.","Sorry if I'm awkward; <br />I don't often interface with humans.","I'm voting for the candidate <br />most likely to lead us into a cyber dystopia.","I am no stoic. <br />I hold back tears to not short-circuit.","if (I.approach(human))<br/> I.run()","I'm sorry Dave, I'm afraid I'm taken.","I see that you've seen some things... <br />This is turning into quite the respectable Pok√©dex!","There's no place like C:\\Users\\Silas"].map(function(e){return[Math.random(),e]}).sort(function(e,t){return e[0]-t[0]}).map(function(e){return e[1]}),c=0;function l(e){o.default.fromTo(e,a,{opacity:"0"},{opacity:"1",onComplete:h,onCompleteParams:[e]})}function h(e){window.setTimeout(function(){o.default.fromTo(e,1,{opacity:"1"},{opacity:"0",onComplete:u,onCompleteParams:[e]})},1)}function u(e){e.innerHTML=s[c],c=(c+1)%s.length,l(e)}},{"./gsap/CSSPlugin":5,"./gsap/TimelineLite":6,"./gsap/TweenLite":7}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.CSSPlugin=void 0;var tt=r(e("babel-runtime/helpers/typeof")),it=e("./TweenLite.js"),rt=r(it);function r(e){return e&&e.__esModule?e:{default:e}}it._gsScope._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(){var f,T,S,m,z=function e(){it.TweenPlugin.call(this,"css"),this._overwriteProps.length=0,this.setRatio=e.prototype.setRatio},l=it._gsScope._gsDefine.globals,g={},e=z.prototype=new it.TweenPlugin("css");(e.constructor=z).version="1.20.5",z.API=2,z.defaultTransformPerspective=0,z.defaultSkewType="compensated",z.defaultSmoothOrigin=!0,z.suffixMap={top:e="px",right:e,bottom:e,left:e,width:e,height:e,fontSize:e,padding:e,margin:e,perspective:e,lineHeight:""};var A,v,y,j,_,E,R,L,t,i,P=/(?:\-|\.|\b)(\d|\.|e\-)+/g,C=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,x=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,h=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,O=/(?:\d|\-|\+|=|#|\.)*/g,I=/opacity *= *([^)]*)/i,b=/opacity:([^;]*)/i,o=/alpha\(opacity *=.+?\)/i,w=/^(rgb|hsl)/,a=/([A-Z])/g,s=/-([a-z])/gi,M=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,c=function(e,t){return t.toUpperCase()},d=/(?:Left|Right|Width)/i,u=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,D=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,B=/,(?=[^\)]*(?:\(|$))/gi,N=/[\s,\(]/i,H=Math.PI/180,G=180/Math.PI,U={},r={style:{}},k=it._gsScope.document||{createElement:function(){return r}},p=function(e,t){return k.createElementNS?k.createElementNS(t||"http://www.w3.org/1999/xhtml",e):k.createElement(e)},F=p("div"),V=p("img"),n=z._internals={_specialProps:g},W=(it._gsScope.navigator||{}).userAgent||"",X=(t=W.indexOf("Android"),i=p("a"),y=-1!==W.indexOf("Safari")&&-1===W.indexOf("Chrome")&&(-1===t||3<parseFloat(W.substr(t+8,2))),_=y&&parseFloat(W.substr(W.indexOf("Version/")+8,2))<6,j=-1!==W.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(W)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(W))&&(E=parseFloat(RegExp.$1)),!!i&&(i.style.cssText="top:1px;opacity:.55;",/^0.55/.test(i.style.opacity))),q=function(e){return I.test("string"==typeof e?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Y=function(e){it._gsScope.console&&console.log(e)},J="",Z="",K=function(e,t){var i,r,n=(t=t||F).style;if(void 0!==n[e])return e;for(e=e.charAt(0).toUpperCase()+e.substr(1),i=["O","Moz","ms","Ms","Webkit"],r=5;-1<--r&&void 0===n[i[r]+e];);return 0<=r?(J="-"+(Z=3===r?"ms":i[r]).toLowerCase()+"-",Z+e):null},Q=("undefined"!=typeof window?window:k.defaultView||{getComputedStyle:function(){}}).getComputedStyle,$=z.getStyle=function(e,t,i,r,n){var o;return X||"opacity"!==t?(!r&&e.style[t]?o=e.style[t]:(i=i||Q(e))?o=i[t]||i.getPropertyValue(t)||i.getPropertyValue(t.replace(a,"-$1").toLowerCase()):e.currentStyle&&(o=e.currentStyle[t]),null==n||o&&"none"!==o&&"auto"!==o&&"auto auto"!==o?o:n):q(e)},ee=n.convertToPixels=function(e,t,i,r,n){if("px"===r||!r&&"lineHeight"!==t)return i;if("auto"===r||!i)return 0;var o,a,s,c=d.test(t),l=e,h=F.style,u=i<0,p=1===i;if(u&&(i=-i),p&&(i*=100),"lineHeight"!==t||r)if("%"===r&&-1!==t.indexOf("border"))o=i/100*(c?e.clientWidth:e.clientHeight);else{if(h.cssText="border:0 solid red;position:"+$(e,"position")+";line-height:0;","%"!==r&&l.appendChild&&"v"!==r.charAt(0)&&"rem"!==r)h[c?"borderLeftWidth":"borderTopWidth"]=i+r;else{if(l=e.parentNode||k.body,-1!==$(l,"display").indexOf("flex")&&(h.position="absolute"),a=l._gsCache,s=rt.default.ticker.frame,a&&c&&a.time===s)return a.width*i/100;h[c?"width":"height"]=i+r}l.appendChild(F),o=parseFloat(F[c?"offsetWidth":"offsetHeight"]),l.removeChild(F),c&&"%"===r&&!1!==z.cacheWidths&&((a=l._gsCache=l._gsCache||{}).time=s,a.width=o/i*100),0!==o||n||(o=ee(e,t,i,r,!0))}else a=Q(e).lineHeight,e.style.lineHeight=i,o=parseFloat(Q(e).lineHeight),e.style.lineHeight=a;return p&&(o/=100),u?-o:o},te=n.calculateOffset=function(e,t,i){if("absolute"!==$(e,"position",i))return 0;var r="left"===t?"Left":"Top",n=$(e,"margin"+r,i);return e["offset"+r]-(ee(e,t,parseFloat(n),n.replace(O,""))||0)},ie=function(e,t){var i,r,n,o={};if(t=t||Q(e,null))if(i=t.length)for(;-1<--i;)-1!==(n=t[i]).indexOf("-transform")&&Ie!==n||(o[n.replace(s,c)]=t.getPropertyValue(n));else for(i in t)-1!==i.indexOf("Transform")&&Oe!==i||(o[i]=t[i]);else if(t=e.currentStyle||e.style)for(i in t)"string"==typeof i&&void 0===o[i]&&(o[i.replace(s,c)]=t[i]);return X||(o.opacity=q(e)),r=Xe(e,t,!1),o.rotation=r.rotation,o.skewX=r.skewX,o.scaleX=r.scaleX,o.scaleY=r.scaleY,o.x=r.x,o.y=r.y,Be&&(o.z=r.z,o.rotationX=r.rotationX,o.rotationY=r.rotationY,o.scaleZ=r.scaleZ),o.filters&&delete o.filters,o},re=function(e,t,i,r,n){var o,a,s,c={},l=e.style;for(a in i)"cssText"!==a&&"length"!==a&&isNaN(a)&&(t[a]!==(o=i[a])||n&&n[a])&&-1===a.indexOf("Origin")&&("number"!=typeof o&&"string"!=typeof o||(c[a]="auto"!==o||"left"!==a&&"top"!==a?""!==o&&"auto"!==o&&"none"!==o||"string"!=typeof t[a]||""===t[a].replace(h,"")?o:0:te(e,a),void 0!==l[a]&&(s=new ye(l,a,l[a],s))));if(r)for(a in r)"className"!==a&&(c[a]=r[a]);return{difs:c,firstMPT:s}},ne={width:["Left","Right"],height:["Top","Bottom"]},oe=["marginLeft","marginRight","marginTop","marginBottom"],ae=function(e,t,i){if("svg"===(e.nodeName+"").toLowerCase())return(i||Q(e))[t]||0;if(e.getCTM&&Ge(e))return e.getBBox()[t]||0;var r=parseFloat("width"===t?e.offsetWidth:e.offsetHeight),n=ne[t],o=n.length;for(i=i||Q(e,null);-1<--o;)r-=parseFloat($(e,"padding"+n[o],i,!0))||0,r-=parseFloat($(e,"border"+n[o]+"Width",i,!0))||0;return r},se=function e(t,i){if("contain"===t||"auto"===t||"auto auto"===t)return t+" ";null!=t&&""!==t||(t="0 0");var r,n=t.split(" "),o=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":n[0],a=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":n[1];if(3<n.length&&!i){for(n=t.split(", ").join(",").split(","),t=[],r=0;r<n.length;r++)t.push(e(n[r]));return t.join(",")}return null==a?a="center"===o?"50%":"0":"center"===a&&(a="50%"),("center"===o||isNaN(parseFloat(o))&&-1===(o+"").indexOf("="))&&(o="50%"),t=o+" "+a+(2<n.length?" "+n[2]:""),i&&(i.oxp=-1!==o.indexOf("%"),i.oyp=-1!==a.indexOf("%"),i.oxr="="===o.charAt(1),i.oyr="="===a.charAt(1),i.ox=parseFloat(o.replace(h,"")),i.oy=parseFloat(a.replace(h,"")),i.v=t),i||t},ce=function(e,t){return"function"==typeof e&&(e=e(L,R)),"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)||0},le=function(e,t){return"function"==typeof e&&(e=e(L,R)),null==e?t:"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2))+t:parseFloat(e)||0},he=function(e,t,i,r){var n,o,a,s,c;return"function"==typeof e&&(e=e(L,R)),null==e?s=t:"number"==typeof e?s=e:(n=360,o=e.split("_"),a=((c="="===e.charAt(1))?parseInt(e.charAt(0)+"1",10)*parseFloat(o[0].substr(2)):parseFloat(o[0]))*(-1===e.indexOf("rad")?1:G)-(c?0:t),o.length&&(r&&(r[i]=t+a),-1!==e.indexOf("short")&&(a%=n)!==a%180&&(a=a<0?a+n:a-n),-1!==e.indexOf("_cw")&&a<0?a=(a+3599999999640)%n-(a/n|0)*n:-1!==e.indexOf("ccw")&&0<a&&(a=(a-3599999999640)%n-(a/n|0)*n)),s=t+a),s<1e-6&&-1e-6<s&&(s=0),s},ue={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},pe=function(e,t,i){return 255*(6*(e=e<0?e+1:1<e?e-1:e)<1?t+(i-t)*e*6:e<.5?i:3*e<2?t+(i-t)*(2/3-e)*6:t)+.5|0},de=z.parseColor=function(e,t){var i,r,n,o,a,s,c,l,h,u,p;if(e)if("number"==typeof e)i=[e>>16,e>>8&255,255&e];else{if(","===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),ue[e])i=ue[e];else if("#"===e.charAt(0))4===e.length&&(e="#"+(r=e.charAt(1))+r+(n=e.charAt(2))+n+(o=e.charAt(3))+o),i=[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e];else if("hsl"===e.substr(0,3))if(i=p=e.match(P),t){if(-1!==e.indexOf("="))return e.match(C)}else a=Number(i[0])%360/360,s=Number(i[1])/100,r=2*(c=Number(i[2])/100)-(n=c<=.5?c*(s+1):c+s-c*s),3<i.length&&(i[3]=Number(i[3])),i[0]=pe(a+1/3,r,n),i[1]=pe(a,r,n),i[2]=pe(a-1/3,r,n);else i=e.match(P)||ue.transparent;i[0]=Number(i[0]),i[1]=Number(i[1]),i[2]=Number(i[2]),3<i.length&&(i[3]=Number(i[3]))}else i=ue.black;return t&&!p&&(r=i[0]/255,n=i[1]/255,o=i[2]/255,c=((l=Math.max(r,n,o))+(h=Math.min(r,n,o)))/2,l===h?a=s=0:(u=l-h,s=.5<c?u/(2-l-h):u/(l+h),a=l===r?(n-o)/u+(n<o?6:0):l===n?(o-r)/u+2:(r-n)/u+4,a*=60),i[0]=a+.5|0,i[1]=100*s+.5|0,i[2]=100*c+.5|0),i},fe=function(e,t){var i,r,n,o=e.match(me)||[],a=0,s="";if(!o.length)return e;for(i=0;i<o.length;i++)r=o[i],a+=(n=e.substr(a,e.indexOf(r,a)-a)).length+r.length,3===(r=de(r,t)).length&&r.push(1),s+=n+(t?"hsla("+r[0]+","+r[1]+"%,"+r[2]+"%,"+r[3]:"rgba("+r.join(","))+")";return s+e.substr(a)},me="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(e in ue)me+="|"+e+"\\b";me=new RegExp(me+")","gi"),z.colorStringFilter=function(e){var t,i=e[0]+" "+e[1];me.test(i)&&(t=-1!==i.indexOf("hsl(")||-1!==i.indexOf("hsla("),e[0]=fe(e[0],t),e[1]=fe(e[1],t)),me.lastIndex=0},rt.default.defaultStringFilter||(rt.default.defaultStringFilter=z.colorStringFilter);var ge=function(e,t,o,a){if(null==e)return function(e){return e};var s,c=t?(e.match(me)||[""])[0]:"",l=e.split(c).join("").match(x)||[],h=e.substr(0,e.indexOf(l[0])),u=")"===e.charAt(e.length-1)?")":"",p=-1!==e.indexOf(" ")?" ":",",d=l.length,f=0<d?l[0].replace(P,""):"";return d?s=t?function(e){var t,i,r,n;if("number"==typeof e)e+=f;else if(a&&B.test(e)){for(n=e.replace(B,"|").split("|"),r=0;r<n.length;r++)n[r]=s(n[r]);return n.join(",")}if(t=(e.match(me)||[c])[0],r=(i=e.split(t).join("").match(x)||[]).length,d>r--)for(;++r<d;)i[r]=o?i[(r-1)/2|0]:l[r];return h+i.join(p)+p+t+u+(-1!==e.indexOf("inset")?" inset":"")}:function(e){var t,i,r;if("number"==typeof e)e+=f;else if(a&&B.test(e)){for(i=e.replace(B,"|").split("|"),r=0;r<i.length;r++)i[r]=s(i[r]);return i.join(",")}if(r=(t=e.match(x)||[]).length,d>r--)for(;++r<d;)t[r]=o?t[(r-1)/2|0]:l[r];return h+t.join(p)+u}:function(e){return e}},ve=function(l){return l=l.split(","),function(e,t,i,r,n,o,a){var s,c=(t+"").split(" ");for(a={},s=0;s<4;s++)a[l[s]]=c[s]=c[s]||c[(s-1)/2>>0];return r.parse(e,a,n,o)}},ye=(n._setPluginRatio=function(e){this.plugin.setRatio(e);for(var t,i,r,n,o,a=this.data,s=a.proxy,c=a.firstMPT;c;)t=s[c.v],c.r?t=c.r(t):t<1e-6&&-1e-6<t&&(t=0),c.t[c.p]=t,c=c._next;if(a.autoRotate&&(a.autoRotate.rotation=a.mod?a.mod.call(this._tween,s.rotation,this.t,this._tween):s.rotation),1===e||0===e)for(c=a.firstMPT,o=1===e?"e":"b";c;){if((i=c.t).type){if(1===i.type){for(n=i.xs0+i.s+i.xs1,r=1;r<i.l;r++)n+=i["xn"+r]+i["xs"+(r+1)];i[o]=n}}else i[o]=i.s+i.xs0;c=c._next}},function(e,t,i,r,n){this.t=e,this.p=t,this.v=i,this.r=n,r&&((r._prev=this)._next=r)}),_e=(n._parseToProxy=function(e,t,i,r,n,o){var a,s,c,l,h,u=r,p={},d={},f=i._transform,m=U;for(i._transform=null,U=t,r=h=i.parse(e,t,r,n),U=m,o&&(i._transform=f,u&&(u._prev=null,u._prev&&(u._prev._next=null)));r&&r!==u;){if(r.type<=1&&(d[s=r.p]=r.s+r.c,p[s]=r.s,o||(l=new ye(r,"s",s,l,r.r),r.c=0),1===r.type))for(a=r.l;0<--a;)c="xn"+a,d[s=r.p+"_"+c]=r.data[c],p[s]=r[c],o||(l=new ye(r,c,s,l,r.rxp[c]));r=r._next}return{proxy:p,end:d,firstMPT:l,pt:h}},n.CSSPropTween=function(e,t,i,r,n,o,a,s,c,l,h){this.t=e,this.p=t,this.s=i,this.c=r,this.n=a||t,e instanceof _e||m.push(this.n),this.r=s?"function"==typeof s?s:Math.round:s,this.type=o||0,c&&(this.pr=c,f=!0),this.b=void 0===l?i:l,this.e=void 0===h?i+r:h,n&&((this._next=n)._prev=this)}),xe=function(e,t,i,r,n,o){var a=new _e(e,t,i,r-i,n,-1,o);return a.b=i,a.e=a.xs0=r,a},be=z.parseComplex=function(e,t,i,r,n,o,a,s,c,l){i=i||o||"","function"==typeof r&&(r=r(L,R)),a=new _e(e,t,0,0,a,l?2:1,null,!1,s,i,r),r+="",n&&me.test(r+i)&&(z.colorStringFilter(r=[i,r]),i=r[0],r=r[1]);var h,u,p,d,f,m,g,v,y,_,x,b,w,M=i.split(", ").join(",").split(" "),T=r.split(", ").join(",").split(" "),E=M.length,S=!1!==A;for(-1===r.indexOf(",")&&-1===i.indexOf(",")||(-1!==(r+i).indexOf("rgb")||-1!==(r+i).indexOf("hsl")?(M=M.join(" ").replace(B,", ").split(" "),T=T.join(" ").replace(B,", ").split(" ")):(M=M.join(" ").split(",").join(", ").split(" "),T=T.join(" ").split(",").join(", ").split(" ")),E=M.length),E!==T.length&&(E=(M=(o||"").split(" ")).length),a.plugin=c,a.setRatio=l,h=me.lastIndex=0;h<E;h++)if(d=M[h],f=T[h]+"",(v=parseFloat(d))||0===v)a.appendXtra("",v,ce(f,v),f.replace(C,""),!(!S||-1===f.indexOf("px"))&&Math.round,!0);else if(n&&me.test(d))b=")"+((b=f.indexOf(")")+1)?f.substr(b):""),w=-1!==f.indexOf("hsl")&&X,_=f,d=de(d,w),f=de(f,w),(y=6<d.length+f.length)&&!X&&0===f[3]?(a["xs"+a.l]+=a.l?" transparent":"transparent",a.e=a.e.split(T[h]).join("transparent")):(X||(y=!1),w?a.appendXtra(_.substr(0,_.indexOf("hsl"))+(y?"hsla(":"hsl("),d[0],ce(f[0],d[0]),",",!1,!0).appendXtra("",d[1],ce(f[1],d[1]),"%,",!1).appendXtra("",d[2],ce(f[2],d[2]),y?"%,":"%"+b,!1):a.appendXtra(_.substr(0,_.indexOf("rgb"))+(y?"rgba(":"rgb("),d[0],f[0]-d[0],",",Math.round,!0).appendXtra("",d[1],f[1]-d[1],",",Math.round).appendXtra("",d[2],f[2]-d[2],y?",":b,Math.round),y&&(d=d.length<4?1:d[3],a.appendXtra("",d,(f.length<4?1:f[3])-d,b,!1))),me.lastIndex=0;else if(m=d.match(P)){if(!(g=f.match(C))||g.length!==m.length)return a;for(u=p=0;u<m.length;u++)x=m[u],_=d.indexOf(x,p),a.appendXtra(d.substr(p,_-p),Number(x),ce(g[u],x),"",!(!S||"px"!==d.substr(_+x.length,2))&&Math.round,0===u),p=_+x.length;a["xs"+a.l]+=d.substr(p)}else a["xs"+a.l]+=a.l||a["xs"+a.l]?" "+f:f;if(-1!==r.indexOf("=")&&a.data){for(b=a.xs0+a.data.s,h=1;h<a.l;h++)b+=a["xs"+h]+a.data["xn"+h];a.e=b+a["xs"+h]}return a.l||(a.type=-1,a.xs0=a.e),a.xfirst||a},we=9;for((e=_e.prototype).l=e.pr=0;0<--we;)e["xn"+we]=0,e["xs"+we]="";e.xs0="",e._next=e._prev=e.xfirst=e.data=e.plugin=e.setRatio=e.rxp=null,e.appendXtra=function(e,t,i,r,n,o){var a=this,s=a.l;return a["xs"+s]+=o&&(s||a["xs"+s])?" "+e:e||"",i||0===s||a.plugin?(a.l++,a.type=a.setRatio?2:1,a["xs"+a.l]=r||"",0<s?(a.data["xn"+s]=t+i,a.rxp["xn"+s]=n,a["xn"+s]=t,a.plugin||(a.xfirst=new _e(a,"xn"+s,t,i,a.xfirst||a,0,a.n,n,a.pr),a.xfirst.xs0=0)):(a.data={s:t+i},a.rxp={},a.s=t,a.c=i,a.r=n),a):(a["xs"+s]+=t+(r||""),a)};var Me=function(e,t){t=t||{},this.p=t.prefix&&K(e)||e,g[e]=g[this.p]=this,this.format=t.formatter||ge(t.defaultValue,t.color,t.collapsible,t.multi),t.parser&&(this.parse=t.parser),this.clrs=t.color,this.multi=t.multi,this.keyword=t.keyword,this.dflt=t.defaultValue,this.pr=t.priority||0},Te=n._registerComplexSpecialProp=function(e,t,i){"object"!==(void 0===t?"undefined":(0,tt.default)(t))&&(t={parser:i});var r,n=e.split(","),o=t.defaultValue;for(i=i||[o],r=0;r<n.length;r++)t.prefix=0===r&&t.prefix,t.defaultValue=i[r]||o,new Me(n[r],t)},Ee=n._registerPluginProp=function(e){if(!g[e]){var c=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";Te(e,{parser:function(e,t,i,r,n,o,a){var s=l.com.greensock.plugins[c];return s?(s._cssRegister(),g[i].parse(e,t,i,r,n,o,a)):(Y("Error: "+c+" js file not loaded."),n)}})}};(e=Me.prototype).parseComplex=function(e,t,i,r,n,o){var a,s,c,l,h,u,p=this.keyword;if(this.multi&&(B.test(i)||B.test(t)?(s=t.replace(B,"|").split("|"),c=i.replace(B,"|").split("|")):p&&(s=[t],c=[i])),c){for(l=c.length>s.length?c.length:s.length,a=0;a<l;a++)t=s[a]=s[a]||this.dflt,i=c[a]=c[a]||this.dflt,p&&(h=t.indexOf(p))!==(u=i.indexOf(p))&&(-1===u?s[a]=s[a].split(p).join(""):-1===h&&(s[a]+=" "+p));t=s.join(", "),i=c.join(", ")}return be(e,this.p,t,i,this.clrs,this.dflt,r,this.pr,n,o)},e.parse=function(e,t,i,r,n,o,a){return this.parseComplex(e.style,this.format($(e,this.p,S,!1,this.dflt)),this.format(t),n,o)},z.registerSpecialProp=function(e,c,l){Te(e,{parser:function(e,t,i,r,n,o,a){var s=new _e(e,i,0,0,n,2,i,!1,l);return s.plugin=o,s.setRatio=c(e,t,r._tween,i),s},priority:l})},z.useSVGTransformAttr=!0;var Se,Ae,Re,Le,Pe,Ce="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Oe=K("transform"),Ie=J+"transform",De=K("transformOrigin"),Be=null!==K("perspective"),Ne=n.Transform=function(){this.perspective=parseFloat(z.defaultTransformPerspective)||0,this.force3D=!(!1===z.defaultForce3D||!Be)&&(z.defaultForce3D||"auto")},Ue=it._gsScope.SVGElement,ke=function(e,t,i){var r,n=k.createElementNS("http://www.w3.org/2000/svg",e),o=/([a-z])([A-Z])/g;for(r in i)n.setAttributeNS(null,r.replace(o,"$1-$2").toLowerCase(),i[r]);return t.appendChild(n),n},Fe=k.documentElement||{},ze=(Pe=E||/Android/i.test(W)&&!it._gsScope.chrome,k.createElementNS&&!Pe&&(Ae=ke("svg",Fe),Le=(Re=ke("rect",Ae,{width:100,height:50,x:100})).getBoundingClientRect().width,Re.style[De]="50% 50%",Re.style[Oe]="scaleX(0.5)",Pe=Le===Re.getBoundingClientRect().width&&!(j&&Be),Fe.removeChild(Ae)),Pe),je=function(e,t,i,r,n,o){var a,s,c,l,h,u,p,d,f,m,g,v,y,_,x=e._gsTransform,b=We(e,!0);x&&(y=x.xOrigin,_=x.yOrigin),(!r||(a=r.split(" ")).length<2)&&(0===(p=e.getBBox()).x&&0===p.y&&p.width+p.height===0&&(p={x:parseFloat(e.hasAttribute("x")?e.getAttribute("x"):e.hasAttribute("cx")?e.getAttribute("cx"):0)||0,y:parseFloat(e.hasAttribute("y")?e.getAttribute("y"):e.hasAttribute("cy")?e.getAttribute("cy"):0)||0,width:0,height:0}),a=[(-1!==(t=se(t).split(" "))[0].indexOf("%")?parseFloat(t[0])/100*p.width:parseFloat(t[0]))+p.x,(-1!==t[1].indexOf("%")?parseFloat(t[1])/100*p.height:parseFloat(t[1]))+p.y]),i.xOrigin=l=parseFloat(a[0]),i.yOrigin=h=parseFloat(a[1]),r&&b!==Ve&&(u=b[0],p=b[1],d=b[2],f=b[3],m=b[4],g=b[5],(v=u*f-p*d)&&(s=l*(f/v)+h*(-d/v)+(d*g-f*m)/v,c=l*(-p/v)+h*(u/v)-(u*g-p*m)/v,l=i.xOrigin=a[0]=s,h=i.yOrigin=a[1]=c)),x&&(o&&(i.xOffset=x.xOffset,i.yOffset=x.yOffset,x=i),n||!1!==n&&!1!==z.defaultSmoothOrigin?(s=l-y,c=h-_,x.xOffset+=s*b[0]+c*b[2]-s,x.yOffset+=s*b[1]+c*b[3]-c):x.xOffset=x.yOffset=0),o||e.setAttribute("data-svg-origin",a.join(" "))},He=function(t){try{return t.getBBox()}catch(e){return function e(t){var i,r=p("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,o=this.nextSibling,a=this.style.cssText;if(Fe.appendChild(r),r.appendChild(this),this.style.display="block",t)try{i=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=e}catch(e){}else this._originalGetBBox&&(i=this._originalGetBBox());return o?n.insertBefore(this,o):n.appendChild(this),Fe.removeChild(r),this.style.cssText=a,i}.call(t,!0)}},Ge=function(e){return!(!Ue||!e.getCTM||e.parentNode&&!e.ownerSVGElement||!He(e))},Ve=[1,0,0,1,0,0],We=function(e,t){var i,r,n,o,a,s,c=e._gsTransform||new Ne,l=e.style;if(Oe?r=$(e,Ie,null,!0):e.currentStyle&&(r=(r=e.currentStyle.filter.match(u))&&4===r.length?[r[0].substr(4),Number(r[2].substr(4)),Number(r[1].substr(4)),r[3].substr(4),c.x||0,c.y||0].join(","):""),i=!r||"none"===r||"matrix(1, 0, 0, 1, 0, 0)"===r,!Oe||!(s=!Q(e)||"none"===Q(e).display)&&e.parentNode||(s&&(o=l.display,l.display="block"),e.parentNode||(a=1,Fe.appendChild(e)),i=!(r=$(e,Ie,null,!0))||"none"===r||"matrix(1, 0, 0, 1, 0, 0)"===r,o?l.display=o:s&&Ze(l,"display"),a&&Fe.removeChild(e)),(c.svg||e.getCTM&&Ge(e))&&(i&&-1!==(l[Oe]+"").indexOf("matrix")&&(r=l[Oe],i=0),n=e.getAttribute("transform"),i&&n&&(r="matrix("+(n=e.transform.baseVal.consolidate().matrix).a+","+n.b+","+n.c+","+n.d+","+n.e+","+n.f+")",i=0)),i)return Ve;for(n=(r||"").match(P)||[],we=n.length;-1<--we;)o=Number(n[we]),n[we]=(a=o-(o|=0))?(1e5*a+(a<0?-.5:.5)|0)/1e5+o:o;return t&&6<n.length?[n[0],n[1],n[4],n[5],n[12],n[13]]:n},Xe=n.getTransform=function(e,t,i,r){if(e._gsTransform&&i&&!r)return e._gsTransform;var n,o,a,s,c,l,h=i&&e._gsTransform||new Ne,u=h.scaleX<0,p=Be&&(parseFloat($(e,De,t,!1,"0 0 0").split(" ")[2])||h.zOrigin)||0,d=parseFloat(z.defaultTransformPerspective)||0;if(h.svg=!(!e.getCTM||!Ge(e)),h.svg&&(je(e,$(e,De,t,!1,"50% 50%")+"",h,e.getAttribute("data-svg-origin")),Se=z.useSVGTransformAttr||ze),(n=We(e))!==Ve){if(16===n.length){var f,m,g,v,y,_=n[0],x=n[1],b=n[2],w=n[3],M=n[4],T=n[5],E=n[6],S=n[7],A=n[8],R=n[9],L=n[10],P=n[12],C=n[13],O=n[14],I=n[11],D=Math.atan2(E,L);h.zOrigin&&(P=A*(O=-h.zOrigin)-n[12],C=R*O-n[13],O=L*O+h.zOrigin-n[14]),h.rotationX=D*G,D&&(f=M*(v=Math.cos(-D))+A*(y=Math.sin(-D)),m=T*v+R*y,g=E*v+L*y,A=M*-y+A*v,R=T*-y+R*v,L=E*-y+L*v,I=S*-y+I*v,M=f,T=m,E=g),D=Math.atan2(-b,L),h.rotationY=D*G,D&&(m=x*(v=Math.cos(-D))-R*(y=Math.sin(-D)),g=b*v-L*y,R=x*y+R*v,L=b*y+L*v,I=w*y+I*v,_=f=_*v-A*y,x=m,b=g),D=Math.atan2(x,_),h.rotation=D*G,D&&(f=_*(v=Math.cos(D))+x*(y=Math.sin(D)),m=M*v+T*y,g=A*v+R*y,x=x*v-_*y,T=T*v-M*y,R=R*v-A*y,_=f,M=m,A=g),h.rotationX&&359.9<Math.abs(h.rotationX)+Math.abs(h.rotation)&&(h.rotationX=h.rotation=0,h.rotationY=180-h.rotationY),D=Math.atan2(M,T),h.scaleX=(1e5*Math.sqrt(_*_+x*x+b*b)+.5|0)/1e5,h.scaleY=(1e5*Math.sqrt(T*T+E*E)+.5|0)/1e5,h.scaleZ=(1e5*Math.sqrt(A*A+R*R+L*L)+.5|0)/1e5,_/=h.scaleX,M/=h.scaleY,x/=h.scaleX,T/=h.scaleY,2e-5<Math.abs(D)?(h.skewX=D*G,M=0,"simple"!==h.skewType&&(h.scaleY*=1/Math.cos(D))):h.skewX=0,h.perspective=I?1/(I<0?-I:I):0,h.x=P,h.y=C,h.z=O,h.svg&&(h.x-=h.xOrigin-(h.xOrigin*_-h.yOrigin*M),h.y-=h.yOrigin-(h.yOrigin*x-h.xOrigin*T))}else if(!Be||r||!n.length||h.x!==n[4]||h.y!==n[5]||!h.rotationX&&!h.rotationY){var B=6<=n.length,N=B?n[0]:1,U=n[1]||0,k=n[2]||0,F=B?n[3]:1;h.x=n[4]||0,h.y=n[5]||0,a=Math.sqrt(N*N+U*U),s=Math.sqrt(F*F+k*k),c=N||U?Math.atan2(U,N)*G:h.rotation||0,l=k||F?Math.atan2(k,F)*G+c:h.skewX||0,h.scaleX=a,h.scaleY=s,h.rotation=c,h.skewX=l,Be&&(h.rotationX=h.rotationY=h.z=0,h.perspective=d,h.scaleZ=1),h.svg&&(h.x-=h.xOrigin-(h.xOrigin*N+h.yOrigin*k),h.y-=h.yOrigin-(h.xOrigin*U+h.yOrigin*F))}for(o in 90<Math.abs(h.skewX)&&Math.abs(h.skewX)<270&&(u?(h.scaleX*=-1,h.skewX+=h.rotation<=0?180:-180,h.rotation+=h.rotation<=0?180:-180):(h.scaleY*=-1,h.skewX+=h.skewX<=0?180:-180)),h.zOrigin=p,h)h[o]<2e-5&&-2e-5<h[o]&&(h[o]=0)}return i&&(e._gsTransform=h).svg&&(Se&&e.style[Oe]?rt.default.delayedCall(.001,function(){Ze(e.style,Oe)}):!Se&&e.getAttribute("transform")&&rt.default.delayedCall(.001,function(){e.removeAttribute("transform")})),h},qe=function(e){var t,i,r=this.data,n=-r.rotation*H,o=n+r.skewX*H,a=1e5,s=(Math.cos(n)*r.scaleX*a|0)/a,c=(Math.sin(n)*r.scaleX*a|0)/a,l=(Math.sin(o)*-r.scaleY*a|0)/a,h=(Math.cos(o)*r.scaleY*a|0)/a,u=this.t.style,p=this.t.currentStyle;if(p){i=c,c=-l,l=-i,t=p.filter,u.filter="";var d,f,m=this.t.offsetWidth,g=this.t.offsetHeight,v="absolute"!==p.position,y="progid:DXImageTransform.Microsoft.Matrix(M11="+s+", M12="+c+", M21="+l+", M22="+h,_=r.x+m*r.xPercent/100,x=r.y+g*r.yPercent/100;if(null!=r.ox&&(_+=(d=(r.oxp?m*r.ox*.01:r.ox)-m/2)-(d*s+(f=(r.oyp?g*r.oy*.01:r.oy)-g/2)*c),x+=f-(d*l+f*h)),y+=v?", Dx="+((d=m/2)-(d*s+(f=g/2)*c)+_)+", Dy="+(f-(d*l+f*h)+x)+")":", sizingMethod='auto expand')",-1!==t.indexOf("DXImageTransform.Microsoft.Matrix(")?u.filter=t.replace(D,y):u.filter=y+" "+t,0!==e&&1!==e||1===s&&0===c&&0===l&&1===h&&(v&&-1===y.indexOf("Dx=0, Dy=0")||I.test(t)&&100!==parseFloat(RegExp.$1)||-1===t.indexOf(t.indexOf("Alpha"))&&u.removeAttribute("filter")),!v){var b,w,M,T=E<8?1:-1;for(d=r.ieOffsetX||0,f=r.ieOffsetY||0,r.ieOffsetX=Math.round((m-((s<0?-s:s)*m+(c<0?-c:c)*g))/2+_),r.ieOffsetY=Math.round((g-((h<0?-h:h)*g+(l<0?-l:l)*m))/2+x),we=0;we<4;we++)M=(i=-1!==(b=p[w=oe[we]]).indexOf("px")?parseFloat(b):ee(this.t,w,parseFloat(b),b.replace(O,""))||0)!==r[w]?we<2?-r.ieOffsetX:-r.ieOffsetY:we<2?d-r.ieOffsetX:f-r.ieOffsetY,u[w]=(r[w]=Math.round(i-M*(0===we||2===we?1:T)))+"px"}}},Ye=n.set3DTransformRatio=n.setTransformRatio=function(e){var t,i,r,n,o,a,s,c,l,h,u,p,d,f,m,g,v,y,_,x,b,w,M,T=this.data,E=this.t.style,S=T.rotation,A=T.rotationX,R=T.rotationY,L=T.scaleX,P=T.scaleY,C=T.scaleZ,O=T.x,I=T.y,D=T.z,B=T.svg,N=T.perspective,U=T.force3D,k=T.skewY,F=T.skewX;if(k&&(F+=k,S+=k),!((1!==e&&0!==e||"auto"!==U||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&U||D||N||R||A||1!==C)||Se&&B||!Be)S||F||B?(S*=H,w=F*H,M=1e5,i=Math.cos(S)*L,o=Math.sin(S)*L,r=Math.sin(S-w)*-P,a=Math.cos(S-w)*P,w&&"simple"===T.skewType&&(t=Math.tan(w-k*H),r*=t=Math.sqrt(1+t*t),a*=t,k&&(t=Math.tan(k*H),i*=t=Math.sqrt(1+t*t),o*=t)),B&&(O+=T.xOrigin-(T.xOrigin*i+T.yOrigin*r)+T.xOffset,I+=T.yOrigin-(T.xOrigin*o+T.yOrigin*a)+T.yOffset,Se&&(T.xPercent||T.yPercent)&&(m=this.t.getBBox(),O+=.01*T.xPercent*m.width,I+=.01*T.yPercent*m.height),O<(m=1e-6)&&-m<O&&(O=0),I<m&&-m<I&&(I=0)),_=(i*M|0)/M+","+(o*M|0)/M+","+(r*M|0)/M+","+(a*M|0)/M+","+O+","+I+")",B&&Se?this.t.setAttribute("transform","matrix("+_):E[Oe]=(T.xPercent||T.yPercent?"translate("+T.xPercent+"%,"+T.yPercent+"%) matrix(":"matrix(")+_):E[Oe]=(T.xPercent||T.yPercent?"translate("+T.xPercent+"%,"+T.yPercent+"%) matrix(":"matrix(")+L+",0,0,"+P+","+O+","+I+")";else{if(j&&(L<(m=1e-4)&&-m<L&&(L=C=2e-5),P<m&&-m<P&&(P=C=2e-5),!N||T.z||T.rotationX||T.rotationY||(N=0)),S||F)S*=H,g=i=Math.cos(S),v=o=Math.sin(S),F&&(S-=F*H,g=Math.cos(S),v=Math.sin(S),"simple"===T.skewType&&(t=Math.tan((F-k)*H),g*=t=Math.sqrt(1+t*t),v*=t,T.skewY&&(t=Math.tan(k*H),i*=t=Math.sqrt(1+t*t),o*=t))),r=-v,a=g;else{if(!(R||A||1!==C||N||B))return void(E[Oe]=(T.xPercent||T.yPercent?"translate("+T.xPercent+"%,"+T.yPercent+"%) translate3d(":"translate3d(")+O+"px,"+I+"px,"+D+"px)"+(1!==L||1!==P?" scale("+L+","+P+")":""));i=a=1,r=o=0}h=1,n=s=c=l=u=p=0,d=N?-1/N:0,f=T.zOrigin,m=1e-6,x=",",b="0",(S=R*H)&&(g=Math.cos(S),u=d*(c=-(v=Math.sin(S))),n=i*v,s=o*v,d*=h=g,i*=g,o*=g),(S=A*H)&&(t=r*(g=Math.cos(S))+n*(v=Math.sin(S)),y=a*g+s*v,l=h*v,p=d*v,n=r*-v+n*g,s=a*-v+s*g,h*=g,d*=g,r=t,a=y),1!==C&&(n*=C,s*=C,h*=C,d*=C),1!==P&&(r*=P,a*=P,l*=P,p*=P),1!==L&&(i*=L,o*=L,c*=L,u*=L),(f||B)&&(f&&(O+=n*-f,I+=s*-f,D+=h*-f+f),B&&(O+=T.xOrigin-(T.xOrigin*i+T.yOrigin*r)+T.xOffset,I+=T.yOrigin-(T.xOrigin*o+T.yOrigin*a)+T.yOffset),O<m&&-m<O&&(O=b),I<m&&-m<I&&(I=b),D<m&&-m<D&&(D=0)),_=T.xPercent||T.yPercent?"translate("+T.xPercent+"%,"+T.yPercent+"%) matrix3d(":"matrix3d(",_+=(i<m&&-m<i?b:i)+x+(o<m&&-m<o?b:o)+x+(c<m&&-m<c?b:c),_+=x+(u<m&&-m<u?b:u)+x+(r<m&&-m<r?b:r)+x+(a<m&&-m<a?b:a),A||R||1!==C?(_+=x+(l<m&&-m<l?b:l)+x+(p<m&&-m<p?b:p)+x+(n<m&&-m<n?b:n),_+=x+(s<m&&-m<s?b:s)+x+(h<m&&-m<h?b:h)+x+(d<m&&-m<d?b:d)+x):_+=",0,0,0,0,1,0,",_+=O+x+I+x+D+x+(N?1+-D/N:1)+")",E[Oe]=_}};(e=Ne.prototype).x=e.y=e.z=e.skewX=e.skewY=e.rotation=e.rotationX=e.rotationY=e.zOrigin=e.xPercent=e.yPercent=e.xOffset=e.yOffset=0,e.scaleX=e.scaleY=e.scaleZ=1,Te("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(e,t,i,r,n,o,a){if(r._lastParsedTransform===a)return n;var s,c=(r._lastParsedTransform=a).scale&&"function"==typeof a.scale?a.scale:0;"function"==typeof a[i]&&(s=a[i],a[i]=t),c&&(a.scale=c(L,e));var l,h,u,p,d,f,m,g,v,y=e._gsTransform,_=e.style,x=Ce.length,b=a,w={},M="transformOrigin",T=Xe(e,S,!0,b.parseTransform),E=b.transform&&("function"==typeof b.transform?b.transform(L,R):b.transform);if(T.skewType=b.skewType||T.skewType||z.defaultSkewType,r._transform=T,E&&"string"==typeof E&&Oe)(h=F.style)[Oe]=E,h.display="block",h.position="absolute",-1!==E.indexOf("%")&&(h.width=$(e,"width"),h.height=$(e,"height")),k.body.appendChild(F),l=Xe(F,null,!1),"simple"===T.skewType&&(l.scaleY*=Math.cos(l.skewX*H)),T.svg&&(f=T.xOrigin,m=T.yOrigin,l.x-=T.xOffset,l.y-=T.yOffset,(b.transformOrigin||b.svgOrigin)&&(E={},je(e,se(b.transformOrigin),E,b.svgOrigin,b.smoothOrigin,!0),f=E.xOrigin,m=E.yOrigin,l.x-=E.xOffset-T.xOffset,l.y-=E.yOffset-T.yOffset),(f||m)&&(g=We(F,!0),l.x-=f-(f*g[0]+m*g[2]),l.y-=m-(f*g[1]+m*g[3]))),k.body.removeChild(F),l.perspective||(l.perspective=T.perspective),null!=b.xPercent&&(l.xPercent=le(b.xPercent,T.xPercent)),null!=b.yPercent&&(l.yPercent=le(b.yPercent,T.yPercent));else if("object"===(void 0===b?"undefined":(0,tt.default)(b))){if(l={scaleX:le(null!=b.scaleX?b.scaleX:b.scale,T.scaleX),scaleY:le(null!=b.scaleY?b.scaleY:b.scale,T.scaleY),scaleZ:le(b.scaleZ,T.scaleZ),x:le(b.x,T.x),y:le(b.y,T.y),z:le(b.z,T.z),xPercent:le(b.xPercent,T.xPercent),yPercent:le(b.yPercent,T.yPercent),perspective:le(b.transformPerspective,T.perspective)},null!=(d=b.directionalRotation))if("object"===(void 0===d?"undefined":(0,tt.default)(d)))for(h in d)b[h]=d[h];else b.rotation=d;"string"==typeof b.x&&-1!==b.x.indexOf("%")&&(l.x=0,l.xPercent=le(b.x,T.xPercent)),"string"==typeof b.y&&-1!==b.y.indexOf("%")&&(l.y=0,l.yPercent=le(b.y,T.yPercent)),l.rotation=he("rotation"in b?b.rotation:"shortRotation"in b?b.shortRotation+"_short":"rotationZ"in b?b.rotationZ:T.rotation,T.rotation,"rotation",w),Be&&(l.rotationX=he("rotationX"in b?b.rotationX:"shortRotationX"in b?b.shortRotationX+"_short":T.rotationX||0,T.rotationX,"rotationX",w),l.rotationY=he("rotationY"in b?b.rotationY:"shortRotationY"in b?b.shortRotationY+"_short":T.rotationY||0,T.rotationY,"rotationY",w)),l.skewX=he(b.skewX,T.skewX),l.skewY=he(b.skewY,T.skewY)}for(Be&&null!=b.force3D&&(T.force3D=b.force3D,p=!0),(u=T.force3D||T.z||T.rotationX||T.rotationY||l.z||l.rotationX||l.rotationY||l.perspective)||null==b.scale||(l.scaleZ=1);-1<--x;)(1e-6<(E=l[v=Ce[x]]-T[v])||E<-1e-6||null!=b[v]||null!=U[v])&&(p=!0,n=new _e(T,v,T[v],E,n),v in w&&(n.e=w[v]),n.xs0=0,n.plugin=o,r._overwriteProps.push(n.n));return E=b.transformOrigin,T.svg&&(E||b.svgOrigin)&&(f=T.xOffset,m=T.yOffset,je(e,se(E),l,b.svgOrigin,b.smoothOrigin),n=xe(T,"xOrigin",(y?T:l).xOrigin,l.xOrigin,n,M),n=xe(T,"yOrigin",(y?T:l).yOrigin,l.yOrigin,n,M),f===T.xOffset&&m===T.yOffset||(n=xe(T,"xOffset",y?f:T.xOffset,T.xOffset,n,M),n=xe(T,"yOffset",y?m:T.yOffset,T.yOffset,n,M)),E="0px 0px"),(E||Be&&u&&T.zOrigin)&&(Oe?(p=!0,v=De,E=(E||$(e,v,S,!1,"50% 50%"))+"",(n=new _e(_,v,0,0,n,-1,M)).b=_[v],n.plugin=o,Be?(h=T.zOrigin,E=E.split(" "),T.zOrigin=(2<E.length&&(0===h||"0px"!==E[2])?parseFloat(E[2]):h)||0,n.xs0=n.e=E[0]+" "+(E[1]||"50%")+" 0px",(n=new _e(T,"zOrigin",0,0,n,-1,n.n)).b=h,n.xs0=n.e=T.zOrigin):n.xs0=n.e=E):se(E+"",T)),p&&(r._transformType=T.svg&&Se||!u&&3!==this._transformType?2:3),s&&(a[i]=s),c&&(a.scale=c),n},prefix:!0}),Te("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),Te("borderRadius",{defaultValue:"0px",parser:function(e,t,i,r,n,o){t=this.format(t);var a,s,c,l,h,u,p,d,f,m,g,v,y,_,x,b,w=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],M=e.style;for(f=parseFloat(e.offsetWidth),m=parseFloat(e.offsetHeight),a=t.split(" "),s=0;s<w.length;s++)this.p.indexOf("border")&&(w[s]=K(w[s])),-1!==(h=l=$(e,w[s],S,!1,"0px")).indexOf(" ")&&(h=(l=h.split(" "))[0],l=l[1]),u=c=a[s],p=parseFloat(h),v=h.substr((p+"").length),(y="="===u.charAt(1))?(d=parseInt(u.charAt(0)+"1",10),u=u.substr(2),d*=parseFloat(u),g=u.substr((d+"").length-(d<0?1:0))||""):(d=parseFloat(u),g=u.substr((d+"").length)),""===g&&(g=T[i]||v),g!==v&&(_=ee(e,"borderLeft",p,v),x=ee(e,"borderTop",p,v),"%"===g?(h=_/f*100+"%",l=x/m*100+"%"):"em"===g?(h=_/(b=ee(e,"borderLeft",1,"em"))+"em",l=x/b+"em"):(h=_+"px",l=x+"px"),y&&(u=parseFloat(h)+d+g,c=parseFloat(l)+d+g)),n=be(M,w[s],h+" "+l,u+" "+c,!1,"0px",n);return n},prefix:!0,formatter:ge("0px 0px 0px 0px",!1,!0)}),Te("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(e,t,i,r,n,o){return be(e.style,i,this.format($(e,i,S,!1,"0px 0px")),this.format(t),!1,"0px",n)},prefix:!0,formatter:ge("0px 0px",!1,!0)}),Te("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,i,r,n,o){var a,s,c,l,h,u,p="background-position",d=S||Q(e,null),f=this.format((d?E?d.getPropertyValue(p+"-x")+" "+d.getPropertyValue(p+"-y"):d.getPropertyValue(p):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),m=this.format(t);if(-1!==f.indexOf("%")!=(-1!==m.indexOf("%"))&&m.split(",").length<2&&(u=$(e,"backgroundImage").replace(M,""))&&"none"!==u){for(a=f.split(" "),s=m.split(" "),V.setAttribute("src",u),c=2;-1<--c;)(l=-1!==(f=a[c]).indexOf("%"))!==(-1!==s[c].indexOf("%"))&&(h=0===c?e.offsetWidth-V.width:e.offsetHeight-V.height,a[c]=l?parseFloat(f)/100*h+"px":parseFloat(f)/h*100+"%");f=a.join(" ")}return this.parseComplex(e.style,f,m,n,o)},formatter:se}),Te("backgroundSize",{defaultValue:"0 0",formatter:function(e){return"co"===(e+="").substr(0,2)?e:se(-1===e.indexOf(" ")?e+" "+e:e)}}),Te("perspective",{defaultValue:"0px",prefix:!0}),Te("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),Te("transformStyle",{prefix:!0}),Te("backfaceVisibility",{prefix:!0}),Te("userSelect",{prefix:!0}),Te("margin",{parser:ve("marginTop,marginRight,marginBottom,marginLeft")}),Te("padding",{parser:ve("paddingTop,paddingRight,paddingBottom,paddingLeft")}),Te("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,i,r,n,o){var a,s,c;return E<9?(s=e.currentStyle,c=E<8?" ":",",a="rect("+s.clipTop+c+s.clipRight+c+s.clipBottom+c+s.clipLeft+")",t=this.format(t).split(",").join(c)):(a=this.format($(e,this.p,S,!1,this.dflt)),t=this.format(t)),this.parseComplex(e.style,a,t,n,o)}}),Te("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),Te("autoRound,strictUnits",{parser:function(e,t,i,r,n){return n}}),Te("border",{defaultValue:"0px solid #000",parser:function(e,t,i,r,n,o){var a=$(e,"borderTopWidth",S,!1,"0px"),s=this.format(t).split(" "),c=s[0].replace(O,"");return"px"!==c&&(a=parseFloat(a)/ee(e,"borderTopWidth",1,c)+c),this.parseComplex(e.style,this.format(a+" "+$(e,"borderTopStyle",S,!1,"solid")+" "+$(e,"borderTopColor",S,!1,"#000")),s.join(" "),n,o)},color:!0,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(me)||["#000"])[0]}}),Te("borderWidth",{parser:ve("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),Te("float,cssFloat,styleFloat",{parser:function(e,t,i,r,n,o){var a=e.style,s="cssFloat"in a?"cssFloat":"styleFloat";return new _e(a,s,0,0,n,-1,i,!1,0,a[s],t)}});var Je=function(e){var t,i=this.t,r=i.filter||$(this.data,"filter")||"",n=this.s+this.c*e|0;100===n&&(-1===r.indexOf("atrix(")&&-1===r.indexOf("radient(")&&-1===r.indexOf("oader(")?(i.removeAttribute("filter"),t=!$(this.data,"filter")):(i.filter=r.replace(o,""),t=!0)),t||(this.xn1&&(i.filter=r=r||"alpha(opacity="+n+")"),-1===r.indexOf("pacity")?0===n&&this.xn1||(i.filter=r+" alpha(opacity="+n+")"):i.filter=r.replace(I,"opacity="+n))};Te("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,i,r,n,o){var a=parseFloat($(e,"opacity",S,!1,"1")),s=e.style,c="autoAlpha"===i;return"string"==typeof t&&"="===t.charAt(1)&&(t=("-"===t.charAt(0)?-1:1)*parseFloat(t.substr(2))+a),c&&1===a&&"hidden"===$(e,"visibility",S)&&0!==t&&(a=0),X?n=new _e(s,"opacity",a,t-a,n):((n=new _e(s,"opacity",100*a,100*(t-a),n)).xn1=c?1:0,s.zoom=1,n.type=2,n.b="alpha(opacity="+n.s+")",n.e="alpha(opacity="+(n.s+n.c)+")",n.data=e,n.plugin=o,n.setRatio=Je),c&&((n=new _e(s,"visibility",0,0,n,-1,null,!1,0,0!==a?"inherit":"hidden",0===t?"hidden":"inherit")).xs0="inherit",r._overwriteProps.push(n.n),r._overwriteProps.push(i)),n}});var Ze=function(e,t){t&&(e.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),e.removeProperty(t.replace(a,"-$1").toLowerCase())):e.removeAttribute(t))},Ke=function(e){if(this.t._gsClassPT=this,1===e||0===e){this.t.setAttribute("class",0===e?this.b:this.e);for(var t=this.data,i=this.t.style;t;)t.v?i[t.p]=t.v:Ze(i,t.p),t=t._next;1===e&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};Te("className",{parser:function(e,t,i,r,n,o,a){var s,c,l,h,u,p=e.getAttribute("class")||"",d=e.style.cssText;if((n=r._classNamePT=new _e(e,i,0,0,n,2)).setRatio=Ke,n.pr=-11,f=!0,n.b=p,c=ie(e,S),l=e._gsClassPT){for(h={},u=l.data;u;)h[u.p]=1,u=u._next;l.setRatio(1)}return(e._gsClassPT=n).e="="!==t.charAt(1)?t:p.replace(new RegExp("(?:\\s|^)"+t.substr(2)+"(?![\\w-])"),"")+("+"===t.charAt(0)?" "+t.substr(2):""),e.setAttribute("class",n.e),s=re(e,c,ie(e),a,h),e.setAttribute("class",p),n.data=s.firstMPT,e.style.cssText=d,n=n.xfirst=r.parse(e,s.difs,n,o)}});var Qe=function(e){if((1===e||0===e)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var t,i,r,n,o,a=this.t.style,s=g.transform.parse;if("all"===this.e)n=!(a.cssText="");else for(r=(t=this.e.split(" ").join("").split(",")).length;-1<--r;)i=t[r],g[i]&&(g[i].parse===s?n=!0:i="transformOrigin"===i?De:g[i].p),Ze(a,i);n&&(Ze(a,Oe),(o=this.t._gsTransform)&&(o.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(Te("clearProps",{parser:function(e,t,i,r,n){return(n=new _e(e,i,0,0,n,2)).setRatio=Qe,n.e=t,n.pr=-10,n.data=r._tween,f=!0,n}}),e="bezier,throwProps,physicsProps,physics2D".split(","),we=e.length;we--;)Ee(e[we]);(e=z.prototype)._firstPT=e._lastParsedTransform=e._transform=null,e._onInitTween=function(e,t,i,r){if(!e.nodeType)return!1;this._target=R=e,this._tween=i,this._vars=t,L=r,A=t.autoRound,f=!1,T=t.suffixMap||z.suffixMap,S=Q(e,""),m=this._overwriteProps;var n,o,a,s,c,l,h,u,p,d=e.style;if(v&&""===d.zIndex&&("auto"!==(n=$(e,"zIndex",S))&&""!==n||this._addLazySet(d,"zIndex",0)),"string"==typeof t&&(s=d.cssText,n=ie(e,S),d.cssText=s+";"+t,n=re(e,n,ie(e)).difs,!X&&b.test(t)&&(n.opacity=parseFloat(RegExp.$1)),t=n,d.cssText=s),t.className?this._firstPT=o=g.className.parse(e,t.className,"className",this,null,null,t):this._firstPT=o=this.parse(e,t,null),this._transformType){for(p=3===this._transformType,Oe?y&&(v=!0,""===d.zIndex&&("auto"!==(h=$(e,"zIndex",S))&&""!==h||this._addLazySet(d,"zIndex",0)),_&&this._addLazySet(d,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(p?"visible":"hidden"))):d.zoom=1,a=o;a&&a._next;)a=a._next;u=new _e(e,"transform",0,0,null,2),this._linkCSSP(u,null,a),u.setRatio=Oe?Ye:qe,u.data=this._transform||Xe(e,S,!0),u.tween=i,u.pr=-1,m.pop()}if(f){for(;o;){for(l=o._next,a=s;a&&a.pr>o.pr;)a=a._next;(o._prev=a?a._prev:c)?o._prev._next=o:s=o,(o._next=a)?a._prev=o:c=o,o=l}this._firstPT=s}return!0},e.parse=function(e,t,i,r){var n,o,a,s,c,l,h,u,p,d,f=e.style;for(n in t){if("function"==typeof(l=t[n])&&(l=l(L,R)),o=g[n])i=o.parse(e,l,n,this,i,r,t);else{if("--"===n.substr(0,2)){this._tween._propLookup[n]=this._addTween.call(this._tween,e.style,"setProperty",Q(e).getPropertyValue(n)+"",l+"",n,!1,n);continue}c=$(e,n,S)+"",p="string"==typeof l,"color"===n||"fill"===n||"stroke"===n||-1!==n.indexOf("Color")||p&&w.test(l)?(p||(l=(3<(l=de(l)).length?"rgba(":"rgb(")+l.join(",")+")"),i=be(f,n,c,l,!0,"transparent",i,0,r)):p&&N.test(l)?i=be(f,n,c,l,!0,null,i,0,r):(h=(a=parseFloat(c))||0===a?c.substr((a+"").length):"",""!==c&&"auto"!==c||("width"===n||"height"===n?(a=ae(e,n,S),h="px"):"left"===n||"top"===n?(a=te(e,n,S),h="px"):(a="opacity"!==n?0:1,h="")),(d=p&&"="===l.charAt(1))?(s=parseInt(l.charAt(0)+"1",10),l=l.substr(2),s*=parseFloat(l),u=l.replace(O,"")):(s=parseFloat(l),u=p?l.replace(O,""):""),""===u&&(u=n in T?T[n]:h),l=s||0===s?(d?s+a:s)+u:t[n],h!==u&&(""===u&&"lineHeight"!==n||(s||0===s)&&a&&(a=ee(e,n,a,h),"%"===u?(a/=ee(e,n,100,"%")/100,!0!==t.strictUnits&&(c=a+"%")):"em"===u||"rem"===u||"vw"===u||"vh"===u?a/=ee(e,n,1,u):"px"!==u&&(s=ee(e,n,s,u),u="px"),d&&(s||0===s)&&(l=s+a+u))),d&&(s+=a),!a&&0!==a||!s&&0!==s?void 0!==f[n]&&(l||l+""!="NaN"&&null!=l)?(i=new _e(f,n,s||a||0,0,i,-1,n,!1,0,c,l)).xs0="none"!==l||"display"!==n&&-1===n.indexOf("Style")?l:c:Y("invalid "+n+" tween value: "+t[n]):(i=new _e(f,n,a,s-a,i,0,n,!1!==A&&("px"===u||"zIndex"===n),0,c,l)).xs0=u)}r&&i&&!i.plugin&&(i.plugin=r)}return i},e.setRatio=function(e){var t,i,r,n=this._firstPT;if(1!==e||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(e||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;n;){if(t=n.c*e+n.s,n.r?t=n.r(t):t<1e-6&&-1e-6<t&&(t=0),n.type)if(1===n.type)if(2===(r=n.l))n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2;else if(3===r)n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3;else if(4===r)n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4;else if(5===r)n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4+n.xn4+n.xs5;else{for(i=n.xs0+t+n.xs1,r=1;r<n.l;r++)i+=n["xn"+r]+n["xs"+(r+1)];n.t[n.p]=i}else-1===n.type?n.t[n.p]=n.xs0:n.setRatio&&n.setRatio(e);else n.t[n.p]=t+n.xs0;n=n._next}else for(;n;)2!==n.type?n.t[n.p]=n.b:n.setRatio(e),n=n._next;else for(;n;){if(2!==n.type)if(n.r&&-1!==n.type)if(t=n.r(n.s+n.c),n.type){if(1===n.type){for(r=n.l,i=n.xs0+t+n.xs1,r=1;r<n.l;r++)i+=n["xn"+r]+n["xs"+(r+1)];n.t[n.p]=i}}else n.t[n.p]=t+n.xs0;else n.t[n.p]=n.e;else n.setRatio(e);n=n._next}},e._enableTransforms=function(e){this._transform=this._transform||Xe(this._target,S,!0),this._transformType=this._transform.svg&&Se||!e&&3!==this._transformType?2:3};var $e=function(e){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};e._addLazySet=function(e,t,i){var r=this._firstPT=new _e(e,t,0,0,this._firstPT,2);r.e=i,r.setRatio=$e,r.data=this},e._linkCSSP=function(e,t,i,r){return e&&(t&&(t._prev=e),e._next&&(e._next._prev=e._prev),e._prev?e._prev._next=e._next:this._firstPT===e&&(this._firstPT=e._next,r=!0),i?i._next=e:r||null!==this._firstPT||(this._firstPT=e),e._next=t,e._prev=i),e},e._mod=function(e){for(var t=this._firstPT;t;)"function"==typeof e[t.p]&&(t.r=e[t.p]),t=t._next},e._kill=function(e){var t,i,r,n=e;if(e.autoAlpha||e.alpha){for(i in n={},e)n[i]=e[i];n.opacity=1,n.autoAlpha&&(n.visibility=1)}for(e.className&&(t=this._classNamePT)&&((r=t.xfirst)&&r._prev?this._linkCSSP(r._prev,t._next,r._prev._prev):r===this._firstPT&&(this._firstPT=t._next),t._next&&this._linkCSSP(t._next,t._next._next,r._prev),this._classNamePT=null),t=this._firstPT;t;)t.plugin&&t.plugin!==i&&t.plugin._kill&&(t.plugin._kill(e),i=t.plugin),t=t._next;return it.TweenPlugin.prototype._kill.call(this,n)};var et=function e(t,i,r){var n,o,a,s;if(t.slice)for(o=t.length;-1<--o;)e(t[o],i,r);else for(o=(n=t.childNodes).length;-1<--o;)s=(a=n[o]).type,a.style&&(i.push(ie(a)),r&&r.push(a)),1!==s&&9!==s&&11!==s||!a.childNodes.length||e(a,i,r)};return z.cascadeTo=function(e,t,i){var r,n,o,a,s=rt.default.to(e,t,i),c=[s],l=[],h=[],u=[],p=rt.default._internals.reservedProps;for(e=s._targets||s.target,et(e,l,u),s.render(t,!0,!0),et(e,h),s.render(0,!0,!0),s._enabled(!0),r=u.length;-1<--r;)if((n=re(u[r],l[r],h[r])).firstMPT){for(o in n=n.difs,i)p[o]&&(n[o]=i[o]);for(o in a={},n)a[o]=l[r][o];c.push(rt.default.fromTo(u[r],t,a,n))}return c},it.TweenPlugin.activate([z]),z},!0);var n=i.CSSPlugin=it._gsScope.CSSPlugin;i.default=n},{"./TweenLite.js":7,"babel-runtime/helpers/typeof":30}],6:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.TimelineLite=void 0;var r,u=e("./TweenLite.js"),x=(r=u)&&r.__esModule?r:{default:r};u._gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(){var p=function(e){u.SimpleTimeline.call(this,e),this._labels={},this.autoRemoveChildren=!0===this.vars.autoRemoveChildren,this.smoothChildTiming=!0===this.vars.smoothChildTiming,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var t,i,r=this.vars;for(i in r)t=r[i],h(t)&&-1!==t.join("").indexOf("{self}")&&(r[i]=this._swapSelfInParams(t));h(r.tweens)&&this.add(r.tweens,0,r.align,r.stagger)},m=1e-10,e=x.default._internals,t=p._internals={},d=e.isSelector,h=e.isArray,g=e.lazyTweens,v=e.lazyRender,a=u._gsScope._gsDefine.globals,f=function(e){var t,i={};for(t in e)i[t]=e[t];return i},y=function(e,t,i){var r,n,o=e.cycle;for(r in o)n=o[r],e[r]="function"==typeof n?n(i,t[i]):n[i%n.length];delete e.cycle},o=t.pauseCallback=function(){},_=function(e){var t,i=[],r=e.length;for(t=0;t!==r;i.push(e[t++]));return i},i=p.prototype=new u.SimpleTimeline;return p.version="2.0.1",i.constructor=p,i.kill()._gc=i._forcingPlayhead=i._hasPause=!1,i.to=function(e,t,i,r){var n=i.repeat&&a.TweenMax||x.default;return t?this.add(new n(e,t,i),r):this.set(e,i,r)},i.from=function(e,t,i,r){return this.add((i.repeat&&a.TweenMax||x.default).from(e,t,i),r)},i.fromTo=function(e,t,i,r,n){var o=r.repeat&&a.TweenMax||x.default;return t?this.add(o.fromTo(e,t,i,r),n):this.set(e,r,n)},i.staggerTo=function(e,t,i,r,n,o,a,s){var c,l,h=new p({onComplete:o,onCompleteParams:a,callbackScope:s,smoothChildTiming:this.smoothChildTiming}),u=i.cycle;for("string"==typeof e&&(e=x.default.selector(e)||e),d(e=e||[])&&(e=_(e)),(r=r||0)<0&&((e=_(e)).reverse(),r*=-1),l=0;l<e.length;l++)(c=f(i)).startAt&&(c.startAt=f(c.startAt),c.startAt.cycle&&y(c.startAt,e,l)),u&&(y(c,e,l),null!=c.duration&&(t=c.duration,delete c.duration)),h.to(e[l],t,c,l*r);return this.add(h,n)},i.staggerFrom=function(e,t,i,r,n,o,a,s){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(e,t,i,r,n,o,a,s)},i.staggerFromTo=function(e,t,i,r,n,o,a,s,c){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,this.staggerTo(e,t,r,n,o,a,s,c)},i.call=function(e,t,i,r){return this.add(x.default.delayedCall(0,e,t,i),r)},i.set=function(e,t,i){return i=this._parseTimeOrLabel(i,0,!0),null==t.immediateRender&&(t.immediateRender=i===this._time&&!this._paused),this.add(new x.default(e,0,t),i)},p.exportRoot=function(e,t){null==(e=e||{}).smoothChildTiming&&(e.smoothChildTiming=!0);var i,r,n,o,a=new p(e),s=a._timeline;for(null==t&&(t=!0),s._remove(a,!0),a._startTime=0,a._rawPrevTime=a._time=a._totalTime=s._time,n=s._first;n;)o=n._next,t&&n instanceof x.default&&n.target===n.vars.onComplete||((r=n._startTime-n._delay)<0&&(i=1),a.add(n,r)),n=o;return s.add(a,0),i&&a.totalDuration(),a},i.add=function(e,t,i,r){var n,o,a,s,c,l;if("number"!=typeof t&&(t=this._parseTimeOrLabel(t,0,!0,e)),!(e instanceof u.Animation)){if(e instanceof Array||e&&e.push&&h(e)){for(i=i||"normal",r=r||0,n=t,o=e.length,a=0;a<o;a++)h(s=e[a])&&(s=new p({tweens:s})),this.add(s,n),"string"!=typeof s&&"function"!=typeof s&&("sequence"===i?n=s._startTime+s.totalDuration()/s._timeScale:"start"===i&&(s._startTime-=s.delay())),n+=r;return this._uncache(!0)}if("string"==typeof e)return this.addLabel(e,t);if("function"!=typeof e)throw"Cannot add "+e+" into the timeline; it is not a tween, timeline, function, or string.";e=x.default.delayedCall(0,e)}if(u.SimpleTimeline.prototype.add.call(this,e,t),e._time&&e.render((this.rawTime()-e._startTime)*e._timeScale,!1,!1),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(l=(c=this).rawTime()>e._startTime;c._timeline;)l&&c._timeline.smoothChildTiming?c.totalTime(c._totalTime,!0):c._gc&&c._enabled(!0,!1),c=c._timeline;return this},i.remove=function(e){if(e instanceof u.Animation){this._remove(e,!1);var t=e._timeline=e.vars.useFrames?u.Animation._rootFramesTimeline:u.Animation._rootTimeline;return e._startTime=(e._paused?e._pauseTime:t._time)-(e._reversed?e.totalDuration()-e._totalTime:e._totalTime)/e._timeScale,this}if(e instanceof Array||e&&e.push&&h(e)){for(var i=e.length;-1<--i;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},i._remove=function(e,t){return u.SimpleTimeline.prototype._remove.call(this,e,t),this._last?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},i.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},i.insert=i.insertMultiple=function(e,t,i,r){return this.add(e,t||0,i,r)},i.appendMultiple=function(e,t,i,r){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),i,r)},i.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},i.addPause=function(e,t,i,r){var n=x.default.delayedCall(0,o,i,r||this);return n.vars.onComplete=n.vars.onReverseComplete=t,n.data="isPause",this._hasPause=!0,this.add(n,e)},i.removeLabel=function(e){return delete this._labels[e],this},i.getLabelTime=function(e){return null!=this._labels[e]?this._labels[e]:-1},i._parseTimeOrLabel=function(e,t,i,r){var n,o;if(r instanceof u.Animation&&r.timeline===this)this.remove(r);else if(r&&(r instanceof Array||r.push&&h(r)))for(o=r.length;-1<--o;)r[o]instanceof u.Animation&&r[o].timeline===this&&this.remove(r[o]);if(n="number"!=typeof e||t?99999999999<this.duration()?this.recent().endTime(!1):this._duration:0,"string"==typeof t)return this._parseTimeOrLabel(t,i&&"number"==typeof e&&null==this._labels[t]?e-n:0,i);if(t=t||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=n);else{if(-1===(o=e.indexOf("=")))return null==this._labels[e]?i?this._labels[e]=n+t:t:this._labels[e]+t;t=parseInt(e.charAt(o-1)+"1",10)*Number(e.substr(o+1)),e=1<o?this._parseTimeOrLabel(e.substr(0,o-1),0,i):n}return Number(e)+t},i.seek=function(e,t){return this.totalTime("number"==typeof e?e:this._parseTimeOrLabel(e),!1!==t)},i.stop=function(){return this.paused(!0)},i.gotoAndPlay=function(e,t){return this.play(e,t)},i.gotoAndStop=function(e,t){return this.pause(e,t)},i.render=function(e,t,i){this._gc&&this._enabled(!0,!1);var r,n,o,a,s,c,l,h=this._time,u=this._dirty?this.totalDuration():this._totalDuration,p=this._startTime,d=this._timeScale,f=this._paused;if(h!==this._time&&(e+=this._time-h),u-1e-7<=e&&0<=e)this._totalTime=this._time=u,this._reversed||this._hasPausedChild()||(n=!0,a="onComplete",s=!!this._timeline.autoRemoveChildren,0===this._duration&&(e<=0&&-1e-7<=e||this._rawPrevTime<0||this._rawPrevTime===m)&&this._rawPrevTime!==e&&this._first&&(s=!0,this._rawPrevTime>m&&(a="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:m,e=u+1e-4;else if(e<1e-7)if(this._totalTime=this._time=0,(0!==h||0===this._duration&&this._rawPrevTime!==m&&(0<this._rawPrevTime||e<0&&0<=this._rawPrevTime))&&(a="onReverseComplete",n=this._reversed),e<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(s=n=!0,a="onReverseComplete"):0<=this._rawPrevTime&&this._first&&(s=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:m,0===e&&n)for(r=this._first;r&&0===r._startTime;)r._duration||(n=!1),r=r._next;e=0,this._initted||(s=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!t){if(h<=e)for(r=this._first;r&&r._startTime<=e&&!c;)r._duration||"isPause"!==r.data||r.ratio||0===r._startTime&&0===this._rawPrevTime||(c=r),r=r._next;else for(r=this._last;r&&r._startTime>=e&&!c;)r._duration||"isPause"===r.data&&0<r._rawPrevTime&&(c=r),r=r._prev;c&&(this._time=e=c._startTime,this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=e}if(this._time!==h&&this._first||i||s||c){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==h&&0<e&&(this._active=!0),0===h&&this.vars.onStart&&(0===this._time&&this._duration||t||this._callback("onStart")),h<=(l=this._time))for(r=this._first;r&&(o=r._next,l===this._time&&(!this._paused||f));)(r._active||r._startTime<=l&&!r._paused&&!r._gc)&&(c===r&&this.pause(),r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,i):r.render((e-r._startTime)*r._timeScale,t,i)),r=o;else for(r=this._last;r&&(o=r._prev,l===this._time&&(!this._paused||f));){if(r._active||r._startTime<=h&&!r._paused&&!r._gc){if(c===r){for(c=r._prev;c&&c.endTime()>this._time;)c.render(c._reversed?c.totalDuration()-(e-c._startTime)*c._timeScale:(e-c._startTime)*c._timeScale,t,i),c=c._prev;c=null,this.pause()}r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,i):r.render((e-r._startTime)*r._timeScale,t,i)}r=o}this._onUpdate&&(t||(g.length&&v(),this._callback("onUpdate"))),a&&(this._gc||p!==this._startTime&&d===this._timeScale||(0===this._time||u>=this.totalDuration())&&(n&&(g.length&&v(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[a]&&this._callback(a)))}},i._hasPausedChild=function(){for(var e=this._first;e;){if(e._paused||e instanceof p&&e._hasPausedChild())return!0;e=e._next}return!1},i.getChildren=function(e,t,i,r){r=r||-9999999999;for(var n=[],o=this._first,a=0;o;)o._startTime<r||(o instanceof x.default?!1!==t&&(n[a++]=o):(!1!==i&&(n[a++]=o),!1!==e&&(a=(n=n.concat(o.getChildren(!0,t,i))).length))),o=o._next;return n},i.getTweensOf=function(e,t){var i,r,n=this._gc,o=[],a=0;for(n&&this._enabled(!0,!0),r=(i=x.default.getTweensOf(e)).length;-1<--r;)(i[r].timeline===this||t&&this._contains(i[r]))&&(o[a++]=i[r]);return n&&this._enabled(!1,!0),o},i.recent=function(){return this._recent},i._contains=function(e){for(var t=e.timeline;t;){if(t===this)return!0;t=t.timeline}return!1},i.shiftChildren=function(e,t,i){i=i||0;for(var r,n=this._first,o=this._labels;n;)n._startTime>=i&&(n._startTime+=e),n=n._next;if(t)for(r in o)o[r]>=i&&(o[r]+=e);return this._uncache(!0)},i._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);for(var i=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),r=i.length,n=!1;-1<--r;)i[r]._kill(e,t)&&(n=!0);return n},i.clear=function(e){var t=this.getChildren(!1,!0,!0),i=t.length;for(this._time=this._totalTime=0;-1<--i;)t[i]._enabled(!1,!1);return!1!==e&&(this._labels={}),this._uncache(!0)},i.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return u.Animation.prototype.invalidate.call(this)},i._enabled=function(e,t){if(e===this._gc)for(var i=this._first;i;)i._enabled(e,!0),i=i._next;return u.SimpleTimeline.prototype._enabled.call(this,e,t)},i.totalTime=function(e,t,i){this._forcingPlayhead=!0;var r=u.Animation.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,r},i.duration=function(e){return arguments.length?(0!==this.duration()&&0!==e&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},i.totalDuration=function(e){if(!arguments.length){if(this._dirty){for(var t,i,r=0,n=this._last,o=999999999999;n;)t=n._prev,n._dirty&&n.totalDuration(),n._startTime>o&&this._sortChildren&&!n._paused&&!this._calculatingDuration?(this._calculatingDuration=1,this.add(n,n._startTime-n._delay),this._calculatingDuration=0):o=n._startTime,n._startTime<0&&!n._paused&&(r-=n._startTime,this._timeline.smoothChildTiming&&(this._startTime+=n._startTime/this._timeScale,this._time-=n._startTime,this._totalTime-=n._startTime,this._rawPrevTime-=n._startTime),this.shiftChildren(-n._startTime,!1,-9999999999),o=0),r<(i=n._startTime+n._totalDuration/n._timeScale)&&(r=i),n=t;this._duration=this._totalDuration=r,this._dirty=!1}return this._totalDuration}return e&&this.totalDuration()?this.timeScale(this._totalDuration/e):this},i.paused=function(e){if(!e)for(var t=this._first,i=this._time;t;)t._startTime===i&&"isPause"===t.data&&(t._rawPrevTime=0),t=t._next;return u.Animation.prototype.paused.apply(this,arguments)},i.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===u.Animation._rootFramesTimeline},i.rawTime=function(e){return e&&(this._paused||this._repeat&&0<this.time()&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(e)-this._startTime)*this._timeScale},p},!0);var n=i.TimelineLite=u._gsScope.TimelineLite;i.default=n},{"./TweenLite.js":7}],7:[function(s,c,l){(function(e){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.EventDispatcher=l.TweenPlugin=l.Power4=l.Power3=l.Power2=l.Power1=l.Power0=l.Linear=l.Ease=l.Animation=l.SimpleTimeline=l.default=l.TweenLite=l._gsScope=void 0;var t,i=s("babel-runtime/helpers/typeof"),re=(t=i)&&t.__esModule?t:{default:t};var r=l._gsScope="undefined"!=typeof window?window:void 0!==c&&c.exports&&void 0!==e?e:{},n=l.TweenLite=function(u,e){var d={},n=u.document,f=u.GreenSockGlobals=u.GreenSockGlobals||u;if(f.TweenLite)return f.TweenLite;var t,i,r,m,g,o,a,v=function(e){var t,i=e.split("."),r=f;for(t=0;t<i.length;t++)r[i[t]]=r=r[i[t]]||{};return r},p=v("com.greensock"),y=1e-10,c=function(e){var t,i=[],r=e.length;for(t=0;t!==r;i.push(e[t++]));return i},_=function(){},x=(o=Object.prototype.toString,a=o.call([]),function(e){return null!=e&&(e instanceof Array||"object"===(void 0===e?"undefined":(0,re.default)(e))&&!!e.push&&o.call(e)===a)}),b={},s=function s(c,l,h,u){this.sc=b[c]?b[c].sc:[],(b[c]=this).gsClass=null,this.func=h;var p=[];this.check=function(e){for(var t,i,r,n,o=l.length,a=o;-1<--o;)(t=b[l[o]]||new s(l[o],[])).gsClass?(p[o]=t.gsClass,a--):e&&t.sc.push(this);if(0===a&&h)for(r=(i=("com.greensock."+c).split(".")).pop(),n=v(i.join("."))[r]=this.gsClass=h.apply(h,p),u&&(f[r]=d[r]=n),o=0;o<this.sc.length;o++)this.sc[o].check()},this.check(!0)},l=u._gsDefine=function(e,t,i,r){return new s(e,t,i,r)},w=p._class=function(e,t,i){return t=t||function(){},l(e,[],function(){return t},i),t};l.globals=f;var h=[0,0,1,1],M=w("easing.Ease",function(e,t,i,r){this._func=e,this._type=i||0,this._power=r||0,this._params=t?h.concat(t):h},!0),T=M.map={},E=M.register=function(e,t,i,r){for(var n,o,a,s,c=t.split(","),l=c.length,h=(i||"easeIn,easeOut,easeInOut").split(",");-1<--l;)for(o=c[l],n=r?w("easing."+o,null,!0):p.easing[o]||{},a=h.length;-1<--a;)s=h[a],T[o+"."+s]=T[s+o]=n[s]=e.getRatio?e:e[s]||new e};for((r=M.prototype)._calcEnd=!1,r.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,i=this._power,r=1===t?1-e:2===t?e:e<.5?2*e:2*(1-e);return 1===i?r*=r:2===i?r*=r*r:3===i?r*=r*r*r:4===i&&(r*=r*r*r*r),1===t?1-r:2===t?r:e<.5?r/2:1-r/2},i=(t=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;-1<--i;)r=t[i]+",Power"+i,E(new M(null,null,1,i),r,"easeOut",!0),E(new M(null,null,2,i),r,"easeIn"+(0===i?",easeNone":"")),E(new M(null,null,3,i),r,"easeInOut");T.linear=p.easing.Linear.easeIn,T.swing=p.easing.Quad.easeInOut;var S=w("events.EventDispatcher",function(e){this._listeners={},this._eventTarget=e||this});(r=S.prototype).addEventListener=function(e,t,i,r,n){n=n||0;var o,a,s=this._listeners[e],c=0;for(this!==m||g||m.wake(),null==s&&(this._listeners[e]=s=[]),a=s.length;-1<--a;)(o=s[a]).c===t&&o.s===i?s.splice(a,1):0===c&&o.pr<n&&(c=a+1);s.splice(c,0,{c:t,s:i,up:r,pr:n})},r.removeEventListener=function(e,t){var i,r=this._listeners[e];if(r)for(i=r.length;-1<--i;)if(r[i].c===t)return void r.splice(i,1)},r.dispatchEvent=function(e){var t,i,r,n=this._listeners[e];if(n)for(1<(t=n.length)&&(n=n.slice(0)),i=this._eventTarget;-1<--t;)(r=n[t])&&(r.up?r.c.call(r.s||i,{type:e,target:i}):r.c.call(r.s||i))};var A=u.requestAnimationFrame,R=u.cancelAnimationFrame,L=Date.now||function(){return(new Date).getTime()},P=L();for(i=(t=["ms","moz","webkit","o"]).length;-1<--i&&!A;)A=u[t[i]+"RequestAnimationFrame"],R=u[t[i]+"CancelAnimationFrame"]||u[t[i]+"CancelRequestAnimationFrame"];w("Ticker",function(e,t){var o,a,s,c,l,h=this,u=L(),i=!(!1===t||!A)&&"auto",p=500,d=33,r=function e(t){var i,r,n=L()-P;p<n&&(u+=n-d),P+=n,h.time=(P-u)/1e3,i=h.time-l,(!o||0<i||!0===t)&&(h.frame++,l+=i+(c<=i?.004:c-i),r=!0),!0!==t&&(s=a(e)),r&&h.dispatchEvent("tick")};S.call(h),h.time=h.frame=0,h.tick=function(){r(!0)},h.lagSmoothing=function(e,t){if(!arguments.length)return p<1e10;p=e||1e10,d=Math.min(t,p,0)},h.sleep=function(){null!=s&&(i&&R?R(s):clearTimeout(s),a=_,s=null,h===m&&(g=!1))},h.wake=function(e){null!==s?h.sleep():e?u+=-P+(P=L()):10<h.frame&&(P=L()-p+5),a=0===o?_:i&&A?A:function(e){return setTimeout(e,1e3*(l-h.time)+1|0)},h===m&&(g=!0),r(2)},h.fps=function(e){if(!arguments.length)return o;c=1/((o=e)||60),l=this.time+c,h.wake()},h.useRAF=function(e){if(!arguments.length)return i;h.sleep(),i=e,h.fps(o)},h.fps(e),setTimeout(function(){"auto"===i&&h.frame<5&&"hidden"!==(n||{}).visibilityState&&h.useRAF(!1)},1500)}),(r=p.Ticker.prototype=new p.events.EventDispatcher).constructor=p.Ticker;var C=w("core.Animation",function(e,t){if(this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=!0===t.immediateRender,this.data=t.data,this._reversed=!0===t.reversed,J){g||m.wake();var i=this.vars.useFrames?Y:J;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});m=C.ticker=new p.Ticker,(r=C.prototype)._dirty=r._gc=r._initted=r._paused=!1,r._totalTime=r._time=0,r._rawPrevTime=-1,r._next=r._last=r._onUpdate=r._timeline=r.timeline=null,r._paused=!1;!function e(){g&&2e3<L()-P&&("hidden"!==(n||{}).visibilityState||!m.lagSmoothing())&&m.wake();var t=setTimeout(e,2e3);t.unref&&t.unref()}(),r.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},r.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},r.resume=function(e,t){return null!=e&&this.seek(e,t),this.paused(!1)},r.seek=function(e,t){return this.totalTime(Number(e),!1!==t)},r.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,!1!==t,!0)},r.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},r.render=function(e,t,i){},r.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},r.isActive=function(){var e,t=this._timeline,i=this._startTime;return!t||!this._gc&&!this._paused&&t.isActive()&&(e=t.rawTime(!0))>=i&&e<i+this.totalDuration()/this._timeScale-1e-7},r._enabled=function(e,t){return g||m.wake(),this._gc=!e,this._active=this.isActive(),!0!==t&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},r._kill=function(e,t){return this._enabled(!1,!1)},r.kill=function(e,t){return this._kill(e,t),this},r._uncache=function(e){for(var t=e?this:this.timeline;t;)t._dirty=!0,t=t.timeline;return this},r._swapSelfInParams=function(e){for(var t=e.length,i=e.concat();-1<--t;)"{self}"===e[t]&&(i[t]=this);return i},r._callback=function(e){var t=this.vars,i=t[e],r=t[e+"Params"],n=t[e+"Scope"]||t.callbackScope||this;switch(r?r.length:0){case 0:i.call(n);break;case 1:i.call(n,r[0]);break;case 2:i.call(n,r[0],r[1]);break;default:i.apply(n,r)}},r.eventCallback=function(e,t,i,r){if("on"===(e||"").substr(0,2)){var n=this.vars;if(1===arguments.length)return n[e];null==t?delete n[e]:(n[e]=t,n[e+"Params"]=x(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,n[e+"Scope"]=r),"onUpdate"===e&&(this._onUpdate=t)}return this},r.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},r.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&0<this._time&&this._time<this._duration&&0!==e&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},r.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},r.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},r.totalTime=function(e,t,i){if(g||m.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(e<0&&!i&&(e+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var r=this._totalDuration,n=this._timeline;if(r<e&&!i&&(e=r),this._startTime=(this._paused?this._pauseTime:n._time)-(this._reversed?r-e:e)/this._timeScale,n._dirty||this._uncache(!1),n._timeline)for(;n._timeline;)n._timeline._time!==(n._startTime+n._totalTime)/n._timeScale&&n.totalTime(n._totalTime,!0),n=n._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===e&&0!==this._duration||(B.length&&K(),this.render(e,t,!1),B.length&&K())}return this},r.progress=r.totalProgress=function(e,t){var i=this.duration();return arguments.length?this.totalTime(i*e,t):i?this._time/i:this.ratio},r.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},r.endTime=function(e){return this._startTime+(0!=e?this.totalDuration():this.duration())/this._timeScale},r.timeScale=function(e){if(!arguments.length)return this._timeScale;var t,i;for(e=e||y,this._timeline&&this._timeline.smoothChildTiming&&(i=(t=this._pauseTime)||0===t?t:this._timeline.totalTime(),this._startTime=i-(i-this._startTime)*this._timeScale/e),this._timeScale=e,i=this.timeline;i&&i.timeline;)i._dirty=!0,i.totalDuration(),i=i.timeline;return this},r.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},r.paused=function(e){if(!arguments.length)return this._paused;var t,i,r=this._timeline;return e!=this._paused&&r&&(g||e||m.wake(),i=(t=r.rawTime())-this._pauseTime,!e&&r.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=e?t:null,this._paused=e,this._active=this.isActive(),!e&&0!==i&&this._initted&&this.duration()&&(t=r.smoothChildTiming?this._totalTime:(t-this._startTime)/this._timeScale,this.render(t,t===this._totalTime,!0))),this._gc&&!e&&this._enabled(!0,!1),this};var O=w("core.SimpleTimeline",function(e){C.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0});(r=O.prototype=new C).constructor=O,r.kill()._gc=!1,r._first=r._last=r._recent=null,r._sortChildren=!1,r.add=r.insert=function(e,t,i,r){var n,o;if(e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=this.rawTime()-(e._timeline.rawTime()-e._pauseTime)),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),n=this._last,this._sortChildren)for(o=e._startTime;n&&n._startTime>o;)n=n._prev;return n?(e._next=n._next,n._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=n,this._recent=e,this._timeline&&this._uncache(!0),this},r._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,e===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},r.render=function(e,t,i){var r,n=this._first;for(this._totalTime=this._time=this._rawPrevTime=e;n;)r=n._next,(n._active||e>=n._startTime&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,i):n.render((e-n._startTime)*n._timeScale,t,i)),n=r},r.rawTime=function(){return g||m.wake(),this._totalTime};var I=w("TweenLite",function(e,t,i){if(C.call(this,t,i),this.render=I.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:I.selector(e)||e;var r,n,o,a=e.jquery||e.length&&e!==u&&e[0]&&(e[0]===u||e[0].nodeType&&e[0].style&&!e.nodeType),s=this.vars.overwrite;if(this._overwrite=s=null==s?q[I.defaultOverwrite]:"number"==typeof s?s>>0:q[s],(a||e instanceof Array||e.push&&x(e))&&"number"!=typeof e[0])for(this._targets=o=c(e),this._propLookup=[],this._siblings=[],r=0;r<o.length;r++)(n=o[r])?"string"!=typeof n?n.length&&n!==u&&n[0]&&(n[0]===u||n[0].nodeType&&n[0].style&&!n.nodeType)?(o.splice(r--,1),this._targets=o=o.concat(c(n))):(this._siblings[r]=Q(n,this,!1),1===s&&1<this._siblings[r].length&&ee(n,this,null,1,this._siblings[r])):"string"==typeof(n=o[r--]=I.selector(n))&&o.splice(r+1,1):o.splice(r--,1);else this._propLookup={},this._siblings=Q(e,this,!1),1===s&&1<this._siblings.length&&ee(e,this,null,1,this._siblings);(this.vars.immediateRender||0===t&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-y,this.render(Math.min(0,-this._delay)))},!0),D=function(e){return e&&e.length&&e!==u&&e[0]&&(e[0]===u||e[0].nodeType&&e[0].style&&!e.nodeType)};(r=I.prototype=new C).constructor=I,r.kill()._gc=!1,r.ratio=0,r._firstPT=r._targets=r._overwrittenProps=r._startAt=null,r._notifyPluginsOfEnabled=r._lazy=!1,I.version="2.0.1",I.defaultEase=r._ease=new M(null,null,1,1),I.defaultOverwrite="auto",I.ticker=m,I.autoSleep=120,I.lagSmoothing=function(e,t){m.lagSmoothing(e,t)},I.selector=u.$||u.jQuery||function(e){var t=u.$||u.jQuery;return t?(I.selector=t)(e):(n||(n=u.document),n?n.querySelectorAll?n.querySelectorAll(e):n.getElementById("#"===e.charAt(0)?e.substr(1):e):e)};var B=[],N={},U=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,k=/[\+-]=-?[\.\d]/,F=function(e){for(var t,i=this._firstPT;i;)t=i.blob?1===e&&null!=this.end?this.end:e?this.join(""):this.start:i.c*e+i.s,i.m?t=i.m.call(this._tween,t,this._target||i.t,this._tween):t<1e-6&&-1e-6<t&&!i.blob&&(t=0),i.f?i.fp?i.t[i.p](i.fp,t):i.t[i.p](t):i.t[i.p]=t,i=i._next},z=function(e,t,i,r){var n,o,a,s,c,l,h,u=[],p=0,d="",f=0;for(u.start=e,u.end=t,e=u[0]=e+"",t=u[1]=t+"",i&&(i(u),e=u[0],t=u[1]),u.length=0,n=e.match(U)||[],o=t.match(U)||[],r&&(r._next=null,r.blob=1,u._firstPT=u._applyPT=r),c=o.length,s=0;s<c;s++)h=o[s],d+=(l=t.substr(p,t.indexOf(h,p)-p))||!s?l:",",p+=l.length,f?f=(f+1)%5:"rgba("===l.substr(-5)&&(f=1),h===n[s]||n.length<=s?d+=h:(d&&(u.push(d),d=""),a=parseFloat(n[s]),u.push(a),u._firstPT={_next:u._firstPT,t:u,p:u.length-1,s:a,c:("="===h.charAt(1)?parseInt(h.charAt(0)+"1",10)*parseFloat(h.substr(2)):parseFloat(h)-a)||0,f:0,m:f&&f<4?Math.round:0}),p+=h.length;return(d+=t.substr(p))&&u.push(d),u.setRatio=F,k.test(t)&&(u.end=null),u},j=function(e,t,i,r,n,o,a,s,c){"function"==typeof r&&(r=r(c||0,e));var l=(0,re.default)(e[t]),h="function"!==l?"":t.indexOf("set")||"function"!=typeof e["get"+t.substr(3)]?t:"get"+t.substr(3),u="get"!==i?i:h?a?e[h](a):e[h]():e[t],p="string"==typeof r&&"="===r.charAt(1),d={t:e,p:t,s:u,f:"function"===l,pg:0,n:n||t,m:o?"function"==typeof o?o:Math.round:0,pr:0,c:p?parseInt(r.charAt(0)+"1",10)*parseFloat(r.substr(2)):parseFloat(r)-u||0};if(("number"!=typeof u||"number"!=typeof r&&!p)&&(a||isNaN(u)||!p&&isNaN(r)||"boolean"==typeof u||"boolean"==typeof r?(d.fp=a,d={t:z(u,p?parseFloat(d.s)+d.c+(d.s+"").replace(/[0-9\-\.]/g,""):r,s||I.defaultStringFilter,d),p:"setRatio",s:0,c:1,f:2,pg:0,n:n||t,pr:0,m:0}):(d.s=parseFloat(u),p||(d.c=parseFloat(r)-d.s||0))),d.c)return(d._next=this._firstPT)&&(d._next._prev=d),this._firstPT=d},H=I._internals={isArray:x,isSelector:D,lazyTweens:B,blobDif:z},G=I._plugins={},V=H.tweenLookup={},W=0,X=H.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1},q={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},Y=C._rootFramesTimeline=new O,J=C._rootTimeline=new O,Z=30,K=H.lazyRender=function(){var e,t=B.length;for(N={};-1<--t;)(e=B[t])&&!1!==e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0),e._lazy=!1);B.length=0};J._startTime=m.time,Y._startTime=m.frame,J._active=Y._active=!0,setTimeout(K,1),C._updateRoot=I.render=function(){var e,t,i;if(B.length&&K(),J.render((m.time-J._startTime)*J._timeScale,!1,!1),Y.render((m.frame-Y._startTime)*Y._timeScale,!1,!1),B.length&&K(),m.frame>=Z){for(i in Z=m.frame+(parseInt(I.autoSleep,10)||120),V){for(e=(t=V[i].tweens).length;-1<--e;)t[e]._gc&&t.splice(e,1);0===t.length&&delete V[i]}if((!(i=J._first)||i._paused)&&I.autoSleep&&!Y._first&&1===m._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||m.sleep()}}},m.addEventListener("tick",C._updateRoot);var Q=function(e,t,i){var r,n,o=e._gsTweenID;if(V[o||(e._gsTweenID=o="t"+W++)]||(V[o]={target:e,tweens:[]}),t&&((r=V[o].tweens)[n=r.length]=t,i))for(;-1<--n;)r[n]===t&&r.splice(n,1);return V[o].tweens},$=function(e,t,i,r){var n,o,a=e.vars.onOverwrite;return a&&(n=a(e,t,i,r)),(a=I.onOverwrite)&&(o=a(e,t,i,r)),!1!==n&&!1!==o},ee=function(e,t,i,r,n){var o,a,s,c;if(1===r||4<=r){for(c=n.length,o=0;o<c;o++)if((s=n[o])!==t)s._gc||s._kill(null,e,t)&&(a=!0);else if(5===r)break;return a}var l,h=t._startTime+y,u=[],p=0,d=0===t._duration;for(o=n.length;-1<--o;)(s=n[o])===t||s._gc||s._paused||(s._timeline!==t._timeline?(l=l||te(t,0,d),0===te(s,l,d)&&(u[p++]=s)):s._startTime<=h&&s._startTime+s.totalDuration()/s._timeScale>h&&((d||!s._initted)&&h-s._startTime<=2e-10||(u[p++]=s)));for(o=p;-1<--o;)if(s=u[o],2===r&&s._kill(i,e,t)&&(a=!0),2!==r||!s._firstPT&&s._initted){if(2!==r&&!$(s,t))continue;s._enabled(!1,!1)&&(a=!0)}return a},te=function(e,t,i){for(var r=e._timeline,n=r._timeScale,o=e._startTime;r._timeline;){if(o+=r._startTime,n*=r._timeScale,r._paused)return-100;r=r._timeline}return t<(o/=n)?o-t:i&&o===t||!e._initted&&o-t<2*y?y:(o+=e.totalDuration()/e._timeScale/n)>t+y?0:o-t-y};r._init=function(){var e,t,i,r,n,o,a=this.vars,s=this._overwrittenProps,c=this._duration,l=!!a.immediateRender,h=a.ease;if(a.startAt){for(r in this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),n={},a.startAt)n[r]=a.startAt[r];if(n.data="isStart",n.overwrite=!1,n.immediateRender=!0,n.lazy=l&&!1!==a.lazy,n.startAt=n.delay=null,n.onUpdate=a.onUpdate,n.onUpdateParams=a.onUpdateParams,n.onUpdateScope=a.onUpdateScope||a.callbackScope||this,this._startAt=I.to(this.target||{},0,n),l)if(0<this._time)this._startAt=null;else if(0!==c)return}else if(a.runBackwards&&0!==c)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{for(r in 0!==this._time&&(l=!1),i={},a)X[r]&&"autoCSS"!==r||(i[r]=a[r]);if(i.overwrite=0,i.data="isFromStart",i.lazy=l&&!1!==a.lazy,i.immediateRender=l,this._startAt=I.to(this.target,0,i),l){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=h=h?h instanceof M?h:"function"==typeof h?new M(h,a.easeParams):T[h]||I.defaultEase:I.defaultEase,a.easeParams instanceof Array&&h.config&&(this._ease=h.config.apply(h,a.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(o=this._targets.length,e=0;e<o;e++)this._initProps(this._targets[e],this._propLookup[e]={},this._siblings[e],s?s[e]:null,e)&&(t=!0);else t=this._initProps(this.target,this._propLookup,this._siblings,s,0);if(t&&I._onPluginEvent("_onInitAllProps",this),s&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),a.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=a.onUpdate,this._initted=!0},r._initProps=function(e,t,i,r,n){var o,a,s,c,l,h;if(null==e)return!1;for(o in N[e._gsTweenID]&&K(),this.vars.css||e.style&&e!==u&&e.nodeType&&G.css&&!1!==this.vars.autoCSS&&function(e,t){var i,r={};for(i in e)X[i]||i in t&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!G[i]||G[i]&&G[i]._autoCSS)||(r[i]=e[i],delete e[i]);e.css=r}(this.vars,e),this.vars)if(h=this.vars[o],X[o])h&&(h instanceof Array||h.push&&x(h))&&-1!==h.join("").indexOf("{self}")&&(this.vars[o]=h=this._swapSelfInParams(h,this));else if(G[o]&&(c=new G[o])._onInitTween(e,this.vars[o],this,n)){for(this._firstPT=l={_next:this._firstPT,t:c,p:"setRatio",s:0,c:1,f:1,n:o,pg:1,pr:c._priority,m:0},a=c._overwriteProps.length;-1<--a;)t[c._overwriteProps[a]]=this._firstPT;(c._priority||c._onInitAllProps)&&(s=!0),(c._onDisable||c._onEnable)&&(this._notifyPluginsOfEnabled=!0),l._next&&(l._next._prev=l)}else t[o]=j.call(this,e,o,"get",h,o,0,null,this.vars.stringFilter,n);return r&&this._kill(r,e)?this._initProps(e,t,i,r,n):1<this._overwrite&&this._firstPT&&1<i.length&&ee(e,this,t,this._overwrite,i)?(this._kill(t,e),this._initProps(e,t,i,r,n)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(N[e._gsTweenID]=!0),s)},r.render=function(e,t,i){var r,n,o,a,s=this._time,c=this._duration,l=this._rawPrevTime;if(c-1e-7<=e&&0<=e)this._totalTime=this._time=c,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(r=!0,n="onComplete",i=i||this._timeline.autoRemoveChildren),0===c&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(e=0),(l<0||e<=0&&-1e-7<=e||l===y&&"isPause"!==this.data)&&l!==e&&(i=!0,y<l&&(n="onReverseComplete")),this._rawPrevTime=a=!t||e||l===e?e:y);else if(e<1e-7)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==s||0===c&&0<l)&&(n="onReverseComplete",r=this._reversed),e<0&&(this._active=!1,0===c&&(this._initted||!this.vars.lazy||i)&&(0<=l&&(l!==y||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=a=!t||e||l===e?e:y)),(!this._initted||this._startAt&&this._startAt.progress())&&(i=!0);else if(this._totalTime=this._time=e,this._easeType){var h=e/c,u=this._easeType,p=this._easePower;(1===u||3===u&&.5<=h)&&(h=1-h),3===u&&(h*=2),1===p?h*=h:2===p?h*=h*h:3===p?h*=h*h*h:4===p&&(h*=h*h*h*h),this.ratio=1===u?1-h:2===u?h:e/c<.5?h/2:1-h/2}else this.ratio=this._ease.getRatio(e/c);if(this._time!==s||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=s,this._rawPrevTime=l,B.push(this),void(this._lazy=[e,t]);this._time&&!r?this.ratio=this._ease.getRatio(this._time/c):r&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==s&&0<=e&&(this._active=!0),0===s&&(this._startAt&&(0<=e?this._startAt.render(e,!0,i):n||(n="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==c||t||this._callback("onStart"))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(e<0&&this._startAt&&-1e-4!==e&&this._startAt.render(e,!0,i),t||(this._time!==s||r||i)&&this._callback("onUpdate")),n&&(this._gc&&!i||(e<0&&this._startAt&&!this._onUpdate&&-1e-4!==e&&this._startAt.render(e,!0,i),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[n]&&this._callback(n),0===c&&this._rawPrevTime===y&&a!==y&&(this._rawPrevTime=0)))}},r._kill=function(e,t,i){if("all"===e&&(e=null),null==e&&(null==t||t===this.target))return this._lazy=!1,this._enabled(!1,!1);t="string"!=typeof t?t||this._targets||this.target:I.selector(t)||t;var r,n,o,a,s,c,l,h,u,p=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline;if((x(t)||D(t))&&"number"!=typeof t[0])for(r=t.length;-1<--r;)this._kill(e,t[r],i)&&(c=!0);else{if(this._targets){for(r=this._targets.length;-1<--r;)if(t===this._targets[r]){s=this._propLookup[r]||{},this._overwrittenProps=this._overwrittenProps||[],n=this._overwrittenProps[r]=e?this._overwrittenProps[r]||{}:"all";break}}else{if(t!==this.target)return!1;s=this._propLookup,n=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(s){if(l=e||s,h=e!==n&&"all"!==n&&e!==s&&("object"!==(void 0===e?"undefined":(0,re.default)(e))||!e._tempKill),i&&(I.onOverwrite||this.vars.onOverwrite)){for(o in l)s[o]&&(u||(u=[]),u.push(o));if((u||!e)&&!$(this,i,t,u))return!1}for(o in l)(a=s[o])&&(p&&(a.f?a.t[a.p](a.s):a.t[a.p]=a.s,c=!0),a.pg&&a.t._kill(l)&&(c=!0),a.pg&&0!==a.t._overwriteProps.length||(a._prev?a._prev._next=a._next:a===this._firstPT&&(this._firstPT=a._next),a._next&&(a._next._prev=a._prev),a._next=a._prev=null),delete s[o]),h&&(n[o]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return c},r.invalidate=function(){return this._notifyPluginsOfEnabled&&I._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],C.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-y,this.render(Math.min(0,-this._delay))),this},r._enabled=function(e,t){if(g||m.wake(),e&&this._gc){var i,r=this._targets;if(r)for(i=r.length;-1<--i;)this._siblings[i]=Q(r[i],this,!0);else this._siblings=Q(this.target,this,!0)}return C.prototype._enabled.call(this,e,t),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&I._onPluginEvent(e?"_onEnable":"_onDisable",this)},I.to=function(e,t,i){return new I(e,t,i)},I.from=function(e,t,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new I(e,t,i)},I.fromTo=function(e,t,i,r){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,new I(e,t,r)},I.delayedCall=function(e,t,i,r,n){return new I(t,0,{delay:e,onComplete:t,onCompleteParams:i,callbackScope:r,onReverseComplete:t,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:n,overwrite:0})},I.set=function(e,t){return new I(e,0,t)},I.getTweensOf=function(e,t){if(null==e)return[];var i,r,n,o;if(e="string"!=typeof e?e:I.selector(e)||e,(x(e)||D(e))&&"number"!=typeof e[0]){for(i=e.length,r=[];-1<--i;)r=r.concat(I.getTweensOf(e[i],t));for(i=r.length;-1<--i;)for(o=r[i],n=i;-1<--n;)o===r[n]&&r.splice(i,1)}else if(e._gsTweenID)for(i=(r=Q(e).concat()).length;-1<--i;)(r[i]._gc||t&&!r[i].isActive())&&r.splice(i,1);return r||[]},I.killTweensOf=I.killDelayedCallsTo=function(e,t,i){"object"===(void 0===t?"undefined":(0,re.default)(t))&&(i=t,t=!1);for(var r=I.getTweensOf(e,t),n=r.length;-1<--n;)r[n]._kill(i,e)};var ie=w("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=ie.prototype},!0);if(r=ie.prototype,ie.version="1.19.0",ie.API=2,r._firstPT=null,r._addTween=j,r.setRatio=F,r._kill=function(e){var t,i=this._overwriteProps,r=this._firstPT;if(null!=e[this._propName])this._overwriteProps=[];else for(t=i.length;-1<--t;)null!=e[i[t]]&&i.splice(t,1);for(;r;)null!=e[r.n]&&(r._next&&(r._next._prev=r._prev),r._prev?(r._prev._next=r._next,r._prev=null):this._firstPT===r&&(this._firstPT=r._next)),r=r._next;return!1},r._mod=r._roundProps=function(e){for(var t,i=this._firstPT;i;)(t=e[this._propName]||null!=i.n&&e[i.n.split(this._propName+"_").join("")])&&"function"==typeof t&&(2===i.f?i.t._applyPT.m=t:i.m=t),i=i._next},I._onPluginEvent=function(e,t){var i,r,n,o,a,s=t._firstPT;if("_onInitAllProps"===e){for(;s;){for(a=s._next,r=n;r&&r.pr>s.pr;)r=r._next;(s._prev=r?r._prev:o)?s._prev._next=s:n=s,(s._next=r)?r._prev=s:o=s,s=a}s=t._firstPT=n}for(;s;)s.pg&&"function"==typeof s.t[e]&&s.t[e]()&&(i=!0),s=s._next;return i},ie.activate=function(e){for(var t=e.length;-1<--t;)e[t].API===ie.API&&(G[(new e[t])._propName]=e[t]);return!0},l.plugin=function(e){if(!(e&&e.propName&&e.init&&e.API))throw"illegal plugin definition.";var t,i=e.propName,r=e.priority||0,n=e.overwriteProps,o={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},a=w("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){ie.call(this,i,r),this._overwriteProps=n||[]},!0===e.global),s=a.prototype=new ie(i);for(t in(s.constructor=a).API=e.API,o)"function"==typeof e[t]&&(s[o[t]]=e[t]);return a.version=e.version,ie.activate([a]),a},t=u._gsQueue){for(i=0;i<t.length;i++)t[i]();for(r in b)b[r].func||u.console.log("GSAP encountered missing dependency: "+r)}return g=!1,I}(r),o=r.com.greensock;l.default=n;l.SimpleTimeline=o.core.SimpleTimeline,l.Animation=o.core.Animation,l.Ease=r.Ease;var a=l.Linear=r.Linear;l.Power0=a,l.Power1=r.Power1,l.Power2=r.Power2,l.Power3=r.Power3,l.Power4=r.Power4,l.TweenPlugin=r.TweenPlugin,l.EventDispatcher=o.events.EventDispatcher}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/helpers/typeof":30}],8:[function(e,t,i){"use strict";var r,n=e("./greet"),o=e("./stage"),a=e("./fingerprint"),s=e("./nav"),c=e("./mouse"),l=(r=c)&&r.__esModule?r:{default:r};e("./gsap/TimelineLite"),e("./gsap/CSSPlugin");var h=document.getElementById("greeting"),u=document.getElementById("particles"),p=document.getElementById("fingerprint");null!=h&&(0,n.ShowGreet)(h),null!=u&&(0,o.Initialize)(u,new l.default),null!=p&&(0,a.InitFingerprint)(p),(0,s.InitNav)()},{"./fingerprint":3,"./greet":4,"./gsap/CSSPlugin":5,"./gsap/TimelineLite":6,"./mouse":9,"./nav":10,"./stage":14}],9:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=o(e("babel-runtime/helpers/classCallCheck")),n=o(e("babel-runtime/helpers/createClass"));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(){(0,r.default)(this,e),this.x=0,this.y=0,this.isTouch=!1,this.Normalize(this.x,this.y),document.addEventListener("mousemove",this.OnMouseMove.bind(this)),document.addEventListener("touchstart",this.OnTouchMove.bind(this),!1),document.addEventListener("touchmove",this.OnTouchMove.bind(this),!1)}return(0,n.default)(e,[{key:"Normalize",value:function(e,t){this.normalizedX=e/window.innerWidth-.5,this.normalizedY=t/window.innerHeight-.5}},{key:"OnMouseMove",value:function(e){this.x=e.clientX,this.y=e.clientY,this.Normalize(this.x,this.y)}},{key:"OnTouchMove",value:function(e){this.isTouch=!0,this.x=e.touches[0].clientX,this.y=e.touches[0].clientY,this.Normalize(this.x,this.y)}}]),e}();i.default=a},{"babel-runtime/helpers/classCallCheck":26,"babel-runtime/helpers/createClass":27}],10:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.InitNav=function(){a=window.innerWidth/parseFloat(getComputedStyle(document.querySelector("body"))["font-size"]);var e=(0,c.debounce)(function(e){30<(a=window.innerWidth/parseFloat(getComputedStyle(document.querySelector("body"))["font-size"]))?(t.style.display="none",i.style.display="block",s.default.to(i,.4,{opacity:"1",top:"0px"})):(t.style.display="block",t.classList.contains("change")&&t.classList.remove("change"),s.default.fromTo(i,0,{opacity:"1",top:"62px"},{opacity:"0",top:"0px",onComplete:o}))},200);window.addEventListener("resize",e);var t=document.querySelector(".menu_icon"),i=document.querySelector(".nav_options"),r=document.querySelectorAll(".nav_option");function n(e){30<a||("block"!=i.style.display?(i.style.display="block",t.classList.add("change"),s.default.fromTo(r,.4,{backgroundColor:"rgba(0,0,0,0.0)"},{backgroundColor:"rgba(0,0,0,0.75)",delay:"0.3"}),s.default.fromTo(i,.4,{top:"0px",opacity:"0"},{top:"62px",opacity:"1"})):(t.classList.remove("change"),s.default.fromTo(i,.4,{opacity:"1",top:"62px"},{opacity:"0",top:"0px",onComplete:o})))}function o(){i.style.display="none"}t.addEventListener("click",n),i.addEventListener("click",n)};var r,a,n=e("./gsap/TweenLite"),s=(r=n)&&r.__esModule?r:{default:r},c=e("./debounce");e("./tactus")},{"./debounce":2,"./gsap/TweenLite":7,"./tactus":15}],11:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=s(e("babel-runtime/core-js/promise")),r=s(e("babel-runtime/helpers/classCallCheck")),n=s(e("babel-runtime/helpers/createClass")),a=(function(e){{if(e&&e.__esModule)return;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);t.default=e}}(e("three")),s(e("three-gltf-loader")));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){(0,r.default)(this,e)}return(0,n.default)(e,null,[{key:"GenericLoader",value:function(e,r,n){return new o.default(function(t,i){e.load(r,function(e){n?n(e,t):t(e)},function(e){console.log(e)},function(e){console.log(e.target),i(e)})})}},{key:"GetGLTF",value:function(e,t){var i=new a.default;return this.GenericLoader(i,e,t)}}]),e}();i.default=c},{"babel-runtime/core-js/promise":22,"babel-runtime/helpers/classCallCheck":26,"babel-runtime/helpers/createClass":27,three:164,"three-gltf-loader":163}],12:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=p(e("babel-runtime/regenerator")),n=p(e("babel-runtime/helpers/asyncToGenerator")),o=p(e("babel-runtime/helpers/classCallCheck")),a=p(e("babel-runtime/helpers/createClass")),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(e("three")),c=e("../gsap/TweenLite"),l=p(c),h=p(e("../promiseLoad")),u=e("../utils/easing.js");function p(e){return e&&e.__esModule?e:{default:e}}var d=function(){function i(e,t){(0,o.default)(this,i),this.scene=e,this.mouse=t,document.addEventListener("touchstart",this.OnTouchStart.bind(this),!1),document.addEventListener("touchend",this.OnTouchEnd.bind(this),!1),this._setup()}var e;return(0,a.default)(i,[{key:"_setup",value:(e=(0,n.default)(r.default.mark(function e(){var t,i=this;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.default.GetGLTF("/models/Silas_Fractured.gltf");case 2:t=e.sent,this.obj=t.scene.children[0],this.outsideMat=new s.MeshStandardMaterial({color:3394611,metalness:.3,roughness:.7}),this.insideMat=new s.MeshStandardMaterial({color:13421772}),this.insideMat.emissive.set(new s.Color(.3,.3,.3)),this.obj.scale.set(1,1,1),this.obj.rotateX(Math.PI/12),this.obj.rotateZ(.1),this.obj.position.set(0,0,-75),this.obj.traverse(function(e){e instanceof s.Mesh&&(e.basePosition=e.position.clone(),e.pTarg=e.position.clone(),e.pMath=e.parent.position.clone(),e.pAngle=e.pMath.clone().normalize(),e.material.name.includes("Inner")?e.material=i.insideMat:e.material.name.includes("Outer")&&(e.material=i.outsideMat))}),this.scene.add(this.obj),this.keyLight=new s.DirectionalLight(new s.Color(16777215),1),this.keyLight.position.set(-1,1,.25),this.scene.add(this.keyLight),this.fillLight=new s.DirectionalLight(new s.Color(16777215),.3),this.fillLight.position.set(1,0,.5),this.scene.add(this.fillLight);case 19:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"OnTouchStart",value:function(e){null!=this.obj&&this.Explode()}},{key:"OnTouchEnd",value:function(e){null!=this.obj&&this.Unexplode()}},{key:"Explode",value:function(){this.obj.traverse(function(e){e instanceof s.Mesh&&l.default.to(e.position,1.5,{x:e.basePosition.x+50*e.pAngle.x,y:e.basePosition.y+50*e.pAngle.y,z:e.basePosition.z+50*e.pAngle.z,ease:c.Power2.easeOut})})}},{key:"Unexplode",value:function(){this.obj.traverse(function(e){e instanceof s.Mesh&&l.default.to(e.position,.5,{x:e.basePosition.x,y:e.basePosition.y,z:e.basePosition.z,ease:c.Power2.easeOut})})}},{key:"Update",value:function(e){if(null!=this.obj&&this.obj.visible&&(this.insideMat.color.copy(e),!this.mouse.isTouch)){var r=1-(Math.abs(this.mouse.normalizedX)+Math.abs(this.mouse.normalizedY));this.obj.traverse(function(e){if(e instanceof s.Mesh){if(.7<=r){var t=(r-.7)*(3+1/3),i=(0,u.easeOutCubic)(t);e.pTarg.set(e.basePosition.x+i*e.pAngle.x*50,e.basePosition.y+i*e.pAngle.y*50,e.basePosition.z+i*e.pAngle.z*50)}else e.pTarg.set(e.basePosition.x,e.basePosition.y,e.basePosition.z);e.position.lerp(e.pTarg,.05)}})}}}]),i}();i.default=d},{"../gsap/TweenLite":7,"../promiseLoad":11,"../utils/easing.js":16,"babel-runtime/helpers/asyncToGenerator":25,"babel-runtime/helpers/classCallCheck":26,"babel-runtime/helpers/createClass":27,"babel-runtime/regenerator":31,three:164}],13:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=o(e("babel-runtime/helpers/classCallCheck")),n=o(e("babel-runtime/helpers/createClass")),p=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(e("three"));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(){function i(e,t){(0,r.default)(this,i),this.mouse=t,this.scene=e,this._setup()}return(0,n.default)(i,[{key:"_setup",value:function(){this.colorPalette=[new p.Color(3381555),new p.Color(47359),new p.Color(12386559),new p.Color(16645957)],this.currentColor=new p.Color(3381555),this.nextColorIdx=1,this.originalsX=[500],this.originalsY=[500],this.originalsZ=[500],this.mode=0,window.addEventListener("resize",this.OnWindowResize.bind(this)),document.addEventListener("click",this.ChangeColor.bind(this)),document.addEventListener("touchstart",this.ChangeColor.bind(this),!1),this.geometry=new p.Geometry;for(var e,t,i,r=new p.PointsMaterial({size:5,vertexColors:p.VertexColors}),n=0;n<500;n++)e=50*Math.random()*Math.cos(40*n),t=75*Math.random()*Math.sin(40*n),i=25*Math.random()-400,this.originalsX.push(e),this.originalsY.push(t),this.originalsZ.push(i),this.geometry.vertices.push(new p.Vector3(e,t,i)),this.geometry.colors.push(new p.Color(Math.random(),Math.random(),Math.random()));var o=new p.Points(this.geometry,r);this.scene.add(o),this.iterator=0,this.colorIterator=0,this.colorSteps=400,this.modeCounter=0,this.modeReversing=!1,this.OnWindowResize(),this.Show()}},{key:"Show",value:function(){this.active=!0,this.ResetParticlePositions()}},{key:"Hide",value:function(){this.active=!1;for(var e=0;e<this.geometry.vertices.length;e++){var t=this.geometry.vertices[e];t.x=-100,t.y=-100,t.z=-100}this.geometry.verticesNeedUpdate=!0}},{key:"Update",value:function(){if(this.active){this.iterator++,this.colorIterator++,this.colorIterator>this.colorSteps&&(this.colorIterator=0,this.currentColor=this.colorPalette[this.nextColorIdx],this.nextColorIdx=(this.nextColorIdx+1)%this.colorPalette.length),this.modeReversing?(this.modeCounter--,this.modeCounter<-2e3&&(this.modeReversing=!1)):(this.modeCounter++,2e3<this.modeCounter&&(this.modeReversing=!0));for(var e=this.currentColor.clone().lerp(this.colorPalette[this.nextColorIdx],this.colorIterator/this.colorSteps),t=0;t<this.geometry.vertices.length;t++){var i,r,n,o=this.geometry.vertices[t],a=this.originalsX[t],s=this.originalsY[t],c=this.originalsZ[t],l=t%2==0?1:-1;switch(this.mode){case 0:i=10*Math.cos((this.iterator+t)/30)*l+2.5*Math.sin((this.iterator-t)/40),r=2.5*Math.sin((this.iterator-t)/40)*l+2.5*Math.cos((this.iterator+t)/40),n=0,o.add(new p.Vector3(i,r,n));break;case 1:var h=Math.abs(this.mouse.x/this.width*25-12.5),u=Math.abs(this.mouse.y/this.height*25-12.5);i=a*(Math.sin((this.iterator-t)/20)+h+0)*l,r=s*((Math.sin((this.iterator-t)/20)+u+0)*l),n=c*(Math.sin((this.iterator-t)/20)+(h+u)/25)-400,o.x=i,o.y=r,o.z=n;break;case 2:h=20*Math.sin(this.modeCounter/3e3),u=20*Math.sin(this.modeCounter/3e3);i=a*(Math.sin((this.modeCounter-t)/100)*h+0),r=s*(Math.sin((this.modeCounter-t)/100)*u+0),n=c*(.5*Math.sin((this.modeCounter-t)/100))-400,o.x=i,o.y=r,o.z=n;break;case 3:o.x=a,o.y=s,o.z=c}this.geometry.colors[t]=e}this.geometry.verticesNeedUpdate=!0,this.geometry.colorsNeedUpdate=!0}}},{key:"ResetParticlePositions",value:function(){for(var e=0;e<this.geometry.vertices.length;e++){var t=this.geometry.vertices[e];t.x=this.originalsX[e],t.y=this.originalsY[e],t.z=this.originalsZ[e]}}},{key:"ChangeColor",value:function(){this.colorIterator=0,this.currentColor=this.colorPalette[this.nextColorIdx],this.nextColorIdx=(this.nextColorIdx+1)%this.colorPalette.length}},{key:"ChangeMode",value:function(e){1<arguments.length&&void 0!==arguments[1]&&arguments[1];this.mode=e,this.modeCounter=0,this.ResetParticlePositions()}},{key:"OnWindowResize",value:function(){this.width=window.innerWidth,this.height=window.innerHeight}}]),i}();i.default=a},{"babel-runtime/helpers/classCallCheck":26,"babel-runtime/helpers/createClass":27,three:164}],14:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Initialize=function(e,t){y=t,f=new s.Clock,_=document.querySelector(".particles_mode"),window.addEventListener("resize",E),document.querySelector(".particles_left").addEventListener("click",A),document.querySelector(".particles_right").addEventListener("click",S),u=new s.Scene,(p=new s.PerspectiveCamera(45,x/b,1,2e3)).position.set(0,0,100),p.lookAt(u.position),d=new s.WebGLRenderer({canvas:e});var i=new s.CylinderGeometry(3,10,100,40,10,!1);i.applyMatrix((new s.Matrix4).makeRotationX(Math.PI/2));var r=new s.MeshLambertMaterial({color:43775});(a=new s.Mesh(i,r)).position.set(0,0,100),a.lookAt(new s.Vector3(0,0,300)),u.add(a),E(),m=new c.default(u,y),g=new l.default("/imgs/textures/astronaut.png",y,!0,p),u.add(g),g.visible=!1,g.position.set(0,0,-75),v=new h.default(u,y),L()};var n,o,a,s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}}(e("three")),c=r(e("./scenes/particles")),l=r(e("./Particler")),h=r(e("./scenes/head"));function r(e){return e&&e.__esModule?e:{default:e}}var u,p,d,f,m,g,v,y,_,x=window.innerWidth,b=window.innerHeight,w={x:20,y:20,z:100},M=0,T=3;function E(){x=window.innerWidth,b=window.innerHeight,{x:x/2,y:b/2},d.setSize(x,b),p.aspect=x/b,p.updateProjectionMatrix()}function S(){M=(M+1)%T,R()}function A(){M=(M-1+T)%T,R()}function R(){M<=1?(v.obj.visible=!0,g.Hide(),m.Show(),m.ChangeMode(M)):(v.obj.visible=!1,m.Hide(),g.Show()),_.innerHTML=M+1+"/"+T}function L(){f.getDelta();var e,t,i,r=f.getElapsedTime();window.requestAnimationFrame(L),e=-1*(w.x*(y.x/x)-w.x/2),t=w.y*(y.y/b)-w.y/2-0,i=w.z*Math.sin(Math.PI*(y.x/x))+200,o=(new s.Quaternion).copy(p.quaternion),a.lookAt(new s.Vector3(e,t,i)),n=(new s.Quaternion).copy(a.quaternion),s.Quaternion.slerp(o,n,p.quaternion,.025),m.Update(),g&&(g._mesh.material.uniforms.uTime.value=r,g._mesh.material.uniforms.u_mouse.value={x:y.x,y:b-y.y}),v.Update(m.geometry.colors[0]),d.render(u,p)}},{"./Particler":1,"./scenes/head":12,"./scenes/particles":13,three:164}],15:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r,n=e("babel-runtime/core-js/promise"),o=(r=n)&&r.__esModule?r:{default:r};i.isTouch=l;var a="ontouchstart"in window||0<navigator.msMaxTouchPoints,s=null,c=!1;function l(){return new o.default(function(e,t){null!=s&&e(s),a?function(e,t){if(window.touch_promise=e,c)return t("Already listening for touch/mouse.");c=!0,window.addEventListener("mousemove",h),window.addEventListener("touchstart",u)}(e,t):e(!1)})}function h(e){p(),s=!1,e.currentTarget.touch_promise(!1)}function u(e){p(),s=!0,e.currentTarget.touch_promise(!0)}function p(){c=!1,window.removeEventListener("mousemove",h),window.removeEventListener("touchstart",u)}i.default={isTouch:l}},{"babel-runtime/core-js/promise":22}],16:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.easeInQuad=function(e){return e*e},i.easeOutQuad=function(e){return e*(2-e)},i.easeInOutQuad=function(e){return e<.5?2*e*e:(4-2*e)*e-1},i.easeInCubic=function(e){return e*e*e},i.easeOutCubic=function(e){return--e*e*e+1},i.easeInOutCubic=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},i.easeInQuart=function(e){return e*e*e*e},i.easeOutQuart=function(e){return 1- --e*e*e*e},i.easeInOutQuart=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},{}],17:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.shuffle=function(e){for(var t,i,r=e.length;0!==r;)i=Math.floor(Math.random()*r),t=e[r-=1],e[r]=e[i],e[i]=t;return e}},{}],18:[function(e,t,i){t.exports={default:e("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":32}],19:[function(e,t,i){t.exports={default:e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":33}],20:[function(e,t,i){t.exports={default:e("core-js/library/fn/object/get-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/get-prototype-of":34}],21:[function(e,t,i){t.exports={default:e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":35}],22:[function(e,t,i){t.exports={default:e("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":36}],23:[function(e,t,i){t.exports={default:e("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":37}],24:[function(e,t,i){t.exports={default:e("core-js/library/fn/symbol/iterator"),__esModule:!0}},{"core-js/library/fn/symbol/iterator":38}],25:[function(e,t,i){"use strict";i.__esModule=!0;var r,n=e("../core-js/promise"),c=(r=n)&&r.__esModule?r:{default:r};i.default=function(e){return function(){var s=e.apply(this,arguments);return new c.default(function(o,a){return function t(e,i){try{var r=s[e](i),n=r.value}catch(e){return void a(e)}if(!r.done)return c.default.resolve(n).then(function(e){t("next",e)},function(e){t("throw",e)});o(n)}("next")})}}},{"../core-js/promise":22}],26:[function(e,t,i){"use strict";i.__esModule=!0,i.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],27:[function(e,t,i){"use strict";i.__esModule=!0;var r,n=e("../core-js/object/define-property"),o=(r=n)&&r.__esModule?r:{default:r};i.default=function(){function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}}return function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}}()},{"../core-js/object/define-property":19}],28:[function(e,t,i){"use strict";i.__esModule=!0;var r=a(e("../core-js/object/set-prototype-of")),n=a(e("../core-js/object/create")),o=a(e("../helpers/typeof"));function a(e){return e&&e.__esModule?e:{default:e}}i.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,o.default)(t)));e.prototype=(0,n.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},{"../core-js/object/create":18,"../core-js/object/set-prototype-of":21,"../helpers/typeof":30}],29:[function(e,t,i){"use strict";i.__esModule=!0;var r,n=e("../helpers/typeof"),o=(r=n)&&r.__esModule?r:{default:r};i.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},{"../helpers/typeof":30}],30:[function(e,t,i){"use strict";i.__esModule=!0;var r=a(e("../core-js/symbol/iterator")),n=a(e("../core-js/symbol")),o="function"==typeof n.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof n.default&&e.constructor===n.default&&e!==n.default.prototype?"symbol":typeof e};function a(e){return e&&e.__esModule?e:{default:e}}i.default="function"==typeof n.default&&"symbol"===o(r.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof n.default&&e.constructor===n.default&&e!==n.default.prototype?"symbol":void 0===e?"undefined":o(e)}},{"../core-js/symbol":23,"../core-js/symbol/iterator":24}],31:[function(e,t,i){t.exports=e("regenerator-runtime")},{"regenerator-runtime":161}],32:[function(e,t,i){e("../../modules/es6.object.create");var r=e("../../modules/_core").Object;t.exports=function(e,t){return r.create(e,t)}},{"../../modules/_core":46,"../../modules/es6.object.create":114}],33:[function(e,t,i){e("../../modules/es6.object.define-property");var r=e("../../modules/_core").Object;t.exports=function(e,t,i){return r.defineProperty(e,t,i)}},{"../../modules/_core":46,"../../modules/es6.object.define-property":115}],34:[function(e,t,i){e("../../modules/es6.object.get-prototype-of"),t.exports=e("../../modules/_core").Object.getPrototypeOf},{"../../modules/_core":46,"../../modules/es6.object.get-prototype-of":116}],35:[function(e,t,i){e("../../modules/es6.object.set-prototype-of"),t.exports=e("../../modules/_core").Object.setPrototypeOf},{"../../modules/_core":46,"../../modules/es6.object.set-prototype-of":117}],36:[function(e,t,i){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),e("../modules/es7.promise.finally"),e("../modules/es7.promise.try"),t.exports=e("../modules/_core").Promise},{"../modules/_core":46,"../modules/es6.object.to-string":118,"../modules/es6.promise":119,"../modules/es6.string.iterator":120,"../modules/es7.promise.finally":122,"../modules/es7.promise.try":123,"../modules/web.dom.iterable":126}],37:[function(e,t,i){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),e("../../modules/es7.symbol.async-iterator"),e("../../modules/es7.symbol.observable"),t.exports=e("../../modules/_core").Symbol},{"../../modules/_core":46,"../../modules/es6.object.to-string":118,"../../modules/es6.symbol":121,"../../modules/es7.symbol.async-iterator":124,"../../modules/es7.symbol.observable":125}],38:[function(e,t,i){e("../../modules/es6.string.iterator"),e("../../modules/web.dom.iterable"),t.exports=e("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":110,"../../modules/es6.string.iterator":120,"../../modules/web.dom.iterable":126}],39:[function(e,t,i){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],40:[function(e,t,i){t.exports=function(){}},{}],41:[function(e,t,i){t.exports=function(e,t,i,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(i+": incorrect invocation!");return e}},{}],42:[function(e,t,i){var r=e("./_is-object");t.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":65}],43:[function(e,t,i){var c=e("./_to-iobject"),l=e("./_to-length"),h=e("./_to-absolute-index");t.exports=function(s){return function(e,t,i){var r,n=c(e),o=l(n.length),a=h(i,o);if(s&&t!=t){for(;a<o;)if((r=n[a++])!=r)return!0}else for(;a<o;a++)if((s||a in n)&&n[a]===t)return s||a||0;return!s&&-1}}},{"./_to-absolute-index":101,"./_to-iobject":103,"./_to-length":104}],44:[function(e,t,i){var n=e("./_cof"),o=e("./_wks")("toStringTag"),a="Arguments"==n(function(){return arguments}());t.exports=function(e){var t,i,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?i:a?n(t):"Object"==(r=n(t))&&"function"==typeof t.callee?"Arguments":r}},{"./_cof":45,"./_wks":111}],45:[function(e,t,i){var r={}.toString;t.exports=function(e){return r.call(e).slice(8,-1)}},{}],46:[function(e,t,i){var r=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=r)},{}],47:[function(e,t,i){var o=e("./_a-function");t.exports=function(r,n,e){if(o(r),void 0===n)return r;switch(e){case 1:return function(e){return r.call(n,e)};case 2:return function(e,t){return r.call(n,e,t)};case 3:return function(e,t,i){return r.call(n,e,t,i)}}return function(){return r.apply(n,arguments)}}},{"./_a-function":39}],48:[function(e,t,i){t.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},{}],49:[function(e,t,i){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":54}],50:[function(e,t,i){var r=e("./_is-object"),n=e("./_global").document,o=r(n)&&r(n.createElement);t.exports=function(e){return o?n.createElement(e):{}}},{"./_global":56,"./_is-object":65}],51:[function(e,t,i){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],52:[function(e,t,i){var s=e("./_object-keys"),c=e("./_object-gops"),l=e("./_object-pie");t.exports=function(e){var t=s(e),i=c.f;if(i)for(var r,n=i(e),o=l.f,a=0;n.length>a;)o.call(e,r=n[a++])&&t.push(r);return t}},{"./_object-gops":82,"./_object-keys":85,"./_object-pie":86}],53:[function(e,t,i){var m=e("./_global"),g=e("./_core"),v=e("./_ctx"),y=e("./_hide"),_=e("./_has"),x="prototype",b=function(e,t,i){var r,n,o,a=e&b.F,s=e&b.G,c=e&b.S,l=e&b.P,h=e&b.B,u=e&b.W,p=s?g:g[t]||(g[t]={}),d=p[x],f=s?m:c?m[t]:(m[t]||{})[x];for(r in s&&(i=t),i)(n=!a&&f&&void 0!==f[r])&&_(p,r)||(o=n?f[r]:i[r],p[r]=s&&"function"!=typeof f[r]?i[r]:h&&n?v(o,m):u&&f[r]==o?function(r){var e=function(e,t,i){if(this instanceof r){switch(arguments.length){case 0:return new r;case 1:return new r(e);case 2:return new r(e,t)}return new r(e,t,i)}return r.apply(this,arguments)};return e[x]=r[x],e}(o):l&&"function"==typeof o?v(Function.call,o):o,l&&((p.virtual||(p.virtual={}))[r]=o,e&b.R&&d&&!d[r]&&y(d,r,o)))};b.F=1,b.G=2,b.S=4,b.P=8,b.B=16,b.W=32,b.U=64,b.R=128,t.exports=b},{"./_core":46,"./_ctx":47,"./_global":56,"./_has":57,"./_hide":58}],54:[function(e,t,i){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],55:[function(e,t,i){var p=e("./_ctx"),d=e("./_iter-call"),f=e("./_is-array-iter"),m=e("./_an-object"),g=e("./_to-length"),v=e("./core.get-iterator-method"),y={},_={};(i=t.exports=function(e,t,i,r,n){var o,a,s,c,l=n?function(){return e}:v(e),h=p(i,r,t?2:1),u=0;if("function"!=typeof l)throw TypeError(e+" is not iterable!");if(f(l)){for(o=g(e.length);u<o;u++)if((c=t?h(m(a=e[u])[0],a[1]):h(e[u]))===y||c===_)return c}else for(s=l.call(e);!(a=s.next()).done;)if((c=d(s,h,a.value,t))===y||c===_)return c}).BREAK=y,i.RETURN=_},{"./_an-object":42,"./_ctx":47,"./_is-array-iter":63,"./_iter-call":66,"./_to-length":104,"./core.get-iterator-method":112}],56:[function(e,t,i){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},{}],57:[function(e,t,i){var r={}.hasOwnProperty;t.exports=function(e,t){return r.call(e,t)}},{}],58:[function(e,t,i){var r=e("./_object-dp"),n=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,i){return r.f(e,t,n(1,i))}:function(e,t,i){return e[t]=i,e}},{"./_descriptors":49,"./_object-dp":77,"./_property-desc":90}],59:[function(e,t,i){var r=e("./_global").document;t.exports=r&&r.documentElement},{"./_global":56}],60:[function(e,t,i){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":49,"./_dom-create":50,"./_fails":54}],61:[function(e,t,i){t.exports=function(e,t,i){var r=void 0===i;switch(t.length){case 0:return r?e():e.call(i);case 1:return r?e(t[0]):e.call(i,t[0]);case 2:return r?e(t[0],t[1]):e.call(i,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(i,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(i,t[0],t[1],t[2],t[3])}return e.apply(i,t)}},{}],62:[function(e,t,i){var r=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},{"./_cof":45}],63:[function(e,t,i){var r=e("./_iterators"),n=e("./_wks")("iterator"),o=Array.prototype;t.exports=function(e){return void 0!==e&&(r.Array===e||o[n]===e)}},{"./_iterators":71,"./_wks":111}],64:[function(e,t,i){var r=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==r(e)}},{"./_cof":45}],65:[function(e,t,i){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],66:[function(e,t,i){var o=e("./_an-object");t.exports=function(t,e,i,r){try{return r?e(o(i)[0],i[1]):e(i)}catch(e){var n=t.return;throw void 0!==n&&o(n.call(t)),e}}},{"./_an-object":42}],67:[function(e,t,i){"use strict";var r=e("./_object-create"),n=e("./_property-desc"),o=e("./_set-to-string-tag"),a={};e("./_hide")(a,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,i){e.prototype=r(a,{next:n(1,i)}),o(e,t+" Iterator")}},{"./_hide":58,"./_object-create":76,"./_property-desc":90,"./_set-to-string-tag":95,"./_wks":111}],68:[function(e,t,i){"use strict";var _=e("./_library"),x=e("./_export"),b=e("./_redefine"),w=e("./_hide"),M=e("./_iterators"),T=e("./_iter-create"),E=e("./_set-to-string-tag"),S=e("./_object-gpo"),A=e("./_wks")("iterator"),R=!([].keys&&"next"in[].keys()),L="values",P=function(){return this};t.exports=function(e,t,i,r,n,o,a){T(i,t,r);var s,c,l,h=function(e){if(!R&&e in f)return f[e];switch(e){case"keys":case L:return function(){return new i(this,e)}}return function(){return new i(this,e)}},u=t+" Iterator",p=n==L,d=!1,f=e.prototype,m=f[A]||f["@@iterator"]||n&&f[n],g=m||h(n),v=n?p?h("entries"):g:void 0,y="Array"==t&&f.entries||m;if(y&&(l=S(y.call(new e)))!==Object.prototype&&l.next&&(E(l,u,!0),_||"function"==typeof l[A]||w(l,A,P)),p&&m&&m.name!==L&&(d=!0,g=function(){return m.call(this)}),_&&!a||!R&&!d&&f[A]||w(f,A,g),M[t]=g,M[u]=P,n)if(s={values:p?g:h(L),keys:o?g:h("keys"),entries:v},a)for(c in s)c in f||b(f,c,s[c]);else x(x.P+x.F*(R||d),t,s);return s}},{"./_export":53,"./_hide":58,"./_iter-create":67,"./_iterators":71,"./_library":72,"./_object-gpo":83,"./_redefine":92,"./_set-to-string-tag":95,"./_wks":111}],69:[function(e,t,i){var o=e("./_wks")("iterator"),a=!1;try{var r=[7][o]();r.return=function(){a=!0},Array.from(r,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!a)return!1;var i=!1;try{var r=[7],n=r[o]();n.next=function(){return{done:i=!0}},r[o]=function(){return n},e(r)}catch(e){}return i}},{"./_wks":111}],70:[function(e,t,i){t.exports=function(e,t){return{value:t,done:!!e}}},{}],71:[function(e,t,i){t.exports={}},{}],72:[function(e,t,i){t.exports=!0},{}],73:[function(e,t,i){var r=e("./_uid")("meta"),n=e("./_is-object"),o=e("./_has"),a=e("./_object-dp").f,s=0,c=Object.isExtensible||function(){return!0},l=!e("./_fails")(function(){return c(Object.preventExtensions({}))}),h=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},u=t.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!n(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!c(e))return"F";if(!t)return"E";h(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!c(e))return!0;if(!t)return!1;h(e)}return e[r].w},onFreeze:function(e){return l&&u.NEED&&c(e)&&!o(e,r)&&h(e),e}}},{"./_fails":54,"./_has":57,"./_is-object":65,"./_object-dp":77,"./_uid":107}],74:[function(e,t,i){var s=e("./_global"),c=e("./_task").set,l=s.MutationObserver||s.WebKitMutationObserver,h=s.process,u=s.Promise,p="process"==e("./_cof")(h);t.exports=function(){var i,r,n,e=function(){var e,t;for(p&&(e=h.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(e){throw i?n():r=void 0,e}}r=void 0,e&&e.enter()};if(p)n=function(){h.nextTick(e)};else if(!l||s.navigator&&s.navigator.standalone)if(u&&u.resolve){var t=u.resolve(void 0);n=function(){t.then(e)}}else n=function(){c.call(s,e)};else{var o=!0,a=document.createTextNode("");new l(e).observe(a,{characterData:!0}),n=function(){a.data=o=!o}}return function(e){var t={fn:e,next:void 0};r&&(r.next=t),i||(i=t,n()),r=t}}},{"./_cof":45,"./_global":56,"./_task":100}],75:[function(e,t,i){"use strict";var n=e("./_a-function");function r(e){var i,r;this.promise=new e(function(e,t){if(void 0!==i||void 0!==r)throw TypeError("Bad Promise constructor");i=e,r=t}),this.resolve=n(i),this.reject=n(r)}t.exports.f=function(e){return new r(e)}},{"./_a-function":39}],76:[function(r,e,t){var n=r("./_an-object"),o=r("./_object-dps"),a=r("./_enum-bug-keys"),s=r("./_shared-key")("IE_PROTO"),c=function(){},l="prototype",h=function(){var e,t=r("./_dom-create")("iframe"),i=a.length;for(t.style.display="none",r("./_html").appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),h=e.F;i--;)delete h[l][a[i]];return h()};e.exports=Object.create||function(e,t){var i;return null!==e?(c[l]=n(e),i=new c,c[l]=null,i[s]=e):i=h(),void 0===t?i:o(i,t)}},{"./_an-object":42,"./_dom-create":50,"./_enum-bug-keys":51,"./_html":59,"./_object-dps":78,"./_shared-key":96}],77:[function(e,t,i){var r=e("./_an-object"),n=e("./_ie8-dom-define"),o=e("./_to-primitive"),a=Object.defineProperty;i.f=e("./_descriptors")?Object.defineProperty:function(e,t,i){if(r(e),t=o(t,!0),r(i),n)try{return a(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},{"./_an-object":42,"./_descriptors":49,"./_ie8-dom-define":60,"./_to-primitive":106}],78:[function(e,t,i){var a=e("./_object-dp"),s=e("./_an-object"),c=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){s(e);for(var i,r=c(t),n=r.length,o=0;o<n;)a.f(e,i=r[o++],t[i]);return e}},{"./_an-object":42,"./_descriptors":49,"./_object-dp":77,"./_object-keys":85}],79:[function(e,t,i){var r=e("./_object-pie"),n=e("./_property-desc"),o=e("./_to-iobject"),a=e("./_to-primitive"),s=e("./_has"),c=e("./_ie8-dom-define"),l=Object.getOwnPropertyDescriptor;i.f=e("./_descriptors")?l:function(e,t){if(e=o(e),t=a(t,!0),c)try{return l(e,t)}catch(e){}if(s(e,t))return n(!r.f.call(e,t),e[t])}},{"./_descriptors":49,"./_has":57,"./_ie8-dom-define":60,"./_object-pie":86,"./_property-desc":90,"./_to-iobject":103,"./_to-primitive":106}],80:[function(e,t,i){var r=e("./_to-iobject"),n=e("./_object-gopn").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return n(e)}catch(e){return a.slice()}}(e):n(r(e))}},{"./_object-gopn":81,"./_to-iobject":103}],81:[function(e,t,i){var r=e("./_object-keys-internal"),n=e("./_enum-bug-keys").concat("length","prototype");i.f=Object.getOwnPropertyNames||function(e){return r(e,n)}},{"./_enum-bug-keys":51,"./_object-keys-internal":84}],82:[function(e,t,i){i.f=Object.getOwnPropertySymbols},{}],83:[function(e,t,i){var r=e("./_has"),n=e("./_to-object"),o=e("./_shared-key")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=n(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},{"./_has":57,"./_shared-key":96,"./_to-object":105}],84:[function(e,t,i){var a=e("./_has"),s=e("./_to-iobject"),c=e("./_array-includes")(!1),l=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var i,r=s(e),n=0,o=[];for(i in r)i!=l&&a(r,i)&&o.push(i);for(;t.length>n;)a(r,i=t[n++])&&(~c(o,i)||o.push(i));return o}},{"./_array-includes":43,"./_has":57,"./_shared-key":96,"./_to-iobject":103}],85:[function(e,t,i){var r=e("./_object-keys-internal"),n=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return r(e,n)}},{"./_enum-bug-keys":51,"./_object-keys-internal":84}],86:[function(e,t,i){i.f={}.propertyIsEnumerable},{}],87:[function(e,t,i){var n=e("./_export"),o=e("./_core"),a=e("./_fails");t.exports=function(e,t){var i=(o.Object||{})[e]||Object[e],r={};r[e]=t(i),n(n.S+n.F*a(function(){i(1)}),"Object",r)}},{"./_core":46,"./_export":53,"./_fails":54}],88:[function(e,t,i){t.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},{}],89:[function(e,t,i){var r=e("./_an-object"),n=e("./_is-object"),o=e("./_new-promise-capability");t.exports=function(e,t){if(r(e),n(t)&&t.constructor===e)return t;var i=o.f(e);return(0,i.resolve)(t),i.promise}},{"./_an-object":42,"./_is-object":65,"./_new-promise-capability":75}],90:[function(e,t,i){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],91:[function(e,t,i){var n=e("./_hide");t.exports=function(e,t,i){for(var r in t)i&&e[r]?e[r]=t[r]:n(e,r,t[r]);return e}},{"./_hide":58}],92:[function(e,t,i){t.exports=e("./_hide")},{"./_hide":58}],93:[function(t,e,i){var r=t("./_is-object"),n=t("./_an-object"),o=function(e,t){if(n(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,i,r){try{(r=t("./_ctx")(Function.call,t("./_object-gopd").f(Object.prototype,"__proto__").set,2))(e,[]),i=!(e instanceof Array)}catch(e){i=!0}return function(e,t){return o(e,t),i?e.__proto__=t:r(e,t),e}}({},!1):void 0),check:o}},{"./_an-object":42,"./_ctx":47,"./_is-object":65,"./_object-gopd":79}],94:[function(e,t,i){"use strict";var r=e("./_global"),n=e("./_core"),o=e("./_object-dp"),a=e("./_descriptors"),s=e("./_wks")("species");t.exports=function(e){var t="function"==typeof n[e]?n[e]:r[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},{"./_core":46,"./_descriptors":49,"./_global":56,"./_object-dp":77,"./_wks":111}],95:[function(e,t,i){var r=e("./_object-dp").f,n=e("./_has"),o=e("./_wks")("toStringTag");t.exports=function(e,t,i){e&&!n(e=i?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},{"./_has":57,"./_object-dp":77,"./_wks":111}],96:[function(e,t,i){var r=e("./_shared")("keys"),n=e("./_uid");t.exports=function(e){return r[e]||(r[e]=n(e))}},{"./_shared":97,"./_uid":107}],97:[function(e,t,i){var r=e("./_core"),n=e("./_global"),o="__core-js_shared__",a=n[o]||(n[o]={});(t.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:e("./_library")?"pure":"global",copyright:"¬© 2018 Denis Pushkarev (zloirock.ru)"})},{"./_core":46,"./_global":56,"./_library":72}],98:[function(e,t,i){var n=e("./_an-object"),o=e("./_a-function"),a=e("./_wks")("species");t.exports=function(e,t){var i,r=n(e).constructor;return void 0===r||null==(i=n(r)[a])?t:o(i)}},{"./_a-function":39,"./_an-object":42,"./_wks":111}],99:[function(e,t,i){var c=e("./_to-integer"),l=e("./_defined");t.exports=function(s){return function(e,t){var i,r,n=String(l(e)),o=c(t),a=n.length;return o<0||a<=o?s?"":void 0:(i=n.charCodeAt(o))<55296||56319<i||o+1===a||(r=n.charCodeAt(o+1))<56320||57343<r?s?n.charAt(o):i:s?n.slice(o,o+2):r-56320+(i-55296<<10)+65536}}},{"./_defined":48,"./_to-integer":102}],100:[function(e,t,i){var r,n,o,a=e("./_ctx"),s=e("./_invoke"),c=e("./_html"),l=e("./_dom-create"),h=e("./_global"),u=h.process,p=h.setImmediate,d=h.clearImmediate,f=h.MessageChannel,m=h.Dispatch,g=0,v={},y="onreadystatechange",_=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},x=function(e){_.call(e.data)};p&&d||(p=function(e){for(var t=[],i=1;arguments.length>i;)t.push(arguments[i++]);return v[++g]=function(){s("function"==typeof e?e:Function(e),t)},r(g),g},d=function(e){delete v[e]},"process"==e("./_cof")(u)?r=function(e){u.nextTick(a(_,e,1))}:m&&m.now?r=function(e){m.now(a(_,e,1))}:f?(o=(n=new f).port2,n.port1.onmessage=x,r=a(o.postMessage,o,1)):h.addEventListener&&"function"==typeof postMessage&&!h.importScripts?(r=function(e){h.postMessage(e+"","*")},h.addEventListener("message",x,!1)):r=y in l("script")?function(e){c.appendChild(l("script"))[y]=function(){c.removeChild(this),_.call(e)}}:function(e){setTimeout(a(_,e,1),0)}),t.exports={set:p,clear:d}},{"./_cof":45,"./_ctx":47,"./_dom-create":50,"./_global":56,"./_html":59,"./_invoke":61}],101:[function(e,t,i){var r=e("./_to-integer"),n=Math.max,o=Math.min;t.exports=function(e,t){return(e=r(e))<0?n(e+t,0):o(e,t)}},{"./_to-integer":102}],102:[function(e,t,i){var r=Math.ceil,n=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(0<e?n:r)(e)}},{}],103:[function(e,t,i){var r=e("./_iobject"),n=e("./_defined");t.exports=function(e){return r(n(e))}},{"./_defined":48,"./_iobject":62}],104:[function(e,t,i){var r=e("./_to-integer"),n=Math.min;t.exports=function(e){return 0<e?n(r(e),9007199254740991):0}},{"./_to-integer":102}],105:[function(e,t,i){var r=e("./_defined");t.exports=function(e){return Object(r(e))}},{"./_defined":48}],106:[function(e,t,i){var n=e("./_is-object");t.exports=function(e,t){if(!n(e))return e;var i,r;if(t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;if("function"==typeof(i=e.valueOf)&&!n(r=i.call(e)))return r;if(!t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":65}],107:[function(e,t,i){var r=0,n=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},{}],108:[function(e,t,i){var r=e("./_global").navigator;t.exports=r&&r.userAgent||""},{"./_global":56}],109:[function(e,t,i){var r=e("./_global"),n=e("./_core"),o=e("./_library"),a=e("./_wks-ext"),s=e("./_object-dp").f;t.exports=function(e){var t=n.Symbol||(n.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},{"./_core":46,"./_global":56,"./_library":72,"./_object-dp":77,"./_wks-ext":110}],110:[function(e,t,i){i.f=e("./_wks")},{"./_wks":111}],111:[function(e,t,i){var r=e("./_shared")("wks"),n=e("./_uid"),o=e("./_global").Symbol,a="function"==typeof o;(t.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:n)("Symbol."+e))}).store=r},{"./_global":56,"./_shared":97,"./_uid":107}],112:[function(e,t,i){var r=e("./_classof"),n=e("./_wks")("iterator"),o=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(null!=e)return e[n]||e["@@iterator"]||o[r(e)]}},{"./_classof":44,"./_core":46,"./_iterators":71,"./_wks":111}],113:[function(e,t,i){"use strict";var r=e("./_add-to-unscopables"),n=e("./_iter-step"),o=e("./_iterators"),a=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,n(1)):n(0,"keys"==t?i:"values"==t?e[i]:[i,e[i]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},{"./_add-to-unscopables":40,"./_iter-define":68,"./_iter-step":70,"./_iterators":71,"./_to-iobject":103}],114:[function(e,t,i){var r=e("./_export");r(r.S,"Object",{create:e("./_object-create")})},{"./_export":53,"./_object-create":76}],115:[function(e,t,i){var r=e("./_export");r(r.S+r.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":49,"./_export":53,"./_object-dp":77}],116:[function(e,t,i){var r=e("./_to-object"),n=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return n(r(e))}})},{"./_object-gpo":83,"./_object-sap":87,"./_to-object":105}],117:[function(e,t,i){var r=e("./_export");r(r.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":53,"./_set-proto":93}],118:[function(e,t,i){},{}],119:[function(i,e,t){"use strict";var r,n,o,a,s=i("./_library"),c=i("./_global"),l=i("./_ctx"),h=i("./_classof"),u=i("./_export"),p=i("./_is-object"),d=i("./_a-function"),f=i("./_an-instance"),m=i("./_for-of"),g=i("./_species-constructor"),v=i("./_task").set,y=i("./_microtask")(),_=i("./_new-promise-capability"),x=i("./_perform"),b=i("./_user-agent"),w=i("./_promise-resolve"),M="Promise",T=c.TypeError,E=c.process,S=E&&E.versions,A=S&&S.v8||"",R=c[M],L="process"==h(E),P=function(){},C=n=_.f,O=!!function(){try{var e=R.resolve(1),t=(e.constructor={})[i("./_wks")("species")]=function(e){e(P,P)};return(L||"function"==typeof PromiseRejectionEvent)&&e.then(P)instanceof t&&0!==A.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(e){}}(),I=function(e){var t;return!(!p(e)||"function"!=typeof(t=e.then))&&t},D=function(h,i){if(!h._n){h._n=!0;var r=h._c;y(function(){for(var c=h._v,l=1==h._s,e=0,t=function(e){var t,i,r,n=l?e.ok:e.fail,o=e.resolve,a=e.reject,s=e.domain;try{n?(l||(2==h._h&&U(h),h._h=1),!0===n?t=c:(s&&s.enter(),t=n(c),s&&(s.exit(),r=!0)),t===e.promise?a(T("Promise-chain cycle")):(i=I(t))?i.call(t,o,a):o(t)):a(c)}catch(e){s&&!r&&s.exit(),a(e)}};r.length>e;)t(r[e++]);h._c=[],h._n=!1,i&&!h._h&&B(h)})}},B=function(o){v.call(c,function(){var e,t,i,r=o._v,n=N(o);if(n&&(e=x(function(){L?E.emit("unhandledRejection",r,o):(t=c.onunhandledrejection)?t({promise:o,reason:r}):(i=c.console)&&i.error&&i.error("Unhandled promise rejection",r)}),o._h=L||N(o)?2:1),o._a=void 0,n&&e.e)throw e.v})},N=function(e){return 1!==e._h&&0===(e._a||e._c).length},U=function(t){v.call(c,function(){var e;L?E.emit("rejectionHandled",t):(e=c.onrejectionhandled)&&e({promise:t,reason:t._v})})},k=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))},F=function(e){var i,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw T("Promise can't be resolved itself");(i=I(e))?y(function(){var t={_w:r,_d:!1};try{i.call(e,l(F,t,1),l(k,t,1))}catch(e){k.call(t,e)}}):(r._v=e,r._s=1,D(r,!1))}catch(e){k.call({_w:r,_d:!1},e)}}};O||(R=function(e){f(this,R,M,"_h"),d(e),r.call(this);try{e(l(F,this,1),l(k,this,1))}catch(e){k.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=i("./_redefine-all")(R.prototype,{then:function(e,t){var i=C(g(this,R));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=L?E.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&D(this,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=l(F,e,1),this.reject=l(k,e,1)},_.f=C=function(e){return e===R||e===a?new o(e):n(e)}),u(u.G+u.W+u.F*!O,{Promise:R}),i("./_set-to-string-tag")(R,M),i("./_set-species")(M),a=i("./_core")[M],u(u.S+u.F*!O,M,{reject:function(e){var t=C(this);return(0,t.reject)(e),t.promise}}),u(u.S+u.F*(s||!O),M,{resolve:function(e){return w(s&&this===a?R:this,e)}}),u(u.S+u.F*!(O&&i("./_iter-detect")(function(e){R.all(e).catch(P)})),M,{all:function(e){var a=this,t=C(a),s=t.resolve,c=t.reject,i=x(function(){var r=[],n=0,o=1;m(e,!1,function(e){var t=n++,i=!1;r.push(void 0),o++,a.resolve(e).then(function(e){i||(i=!0,r[t]=e,--o||s(r))},c)}),--o||s(r)});return i.e&&c(i.v),t.promise},race:function(e){var t=this,i=C(t),r=i.reject,n=x(function(){m(e,!1,function(e){t.resolve(e).then(i.resolve,r)})});return n.e&&r(n.v),i.promise}})},{"./_a-function":39,"./_an-instance":41,"./_classof":44,"./_core":46,"./_ctx":47,"./_export":53,"./_for-of":55,"./_global":56,"./_is-object":65,"./_iter-detect":69,"./_library":72,"./_microtask":74,"./_new-promise-capability":75,"./_perform":88,"./_promise-resolve":89,"./_redefine-all":91,"./_set-species":94,"./_set-to-string-tag":95,"./_species-constructor":98,"./_task":100,"./_user-agent":108,"./_wks":111}],120:[function(e,t,i){"use strict";var r=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,done:!0}:(e=r(t,i),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":68,"./_string-at":99}],121:[function(e,t,i){"use strict";var r=e("./_global"),a=e("./_has"),n=e("./_descriptors"),o=e("./_export"),s=e("./_redefine"),c=e("./_meta").KEY,l=e("./_fails"),h=e("./_shared"),u=e("./_set-to-string-tag"),p=e("./_uid"),d=e("./_wks"),f=e("./_wks-ext"),m=e("./_wks-define"),g=e("./_enum-keys"),v=e("./_is-array"),y=e("./_an-object"),_=e("./_is-object"),x=e("./_to-iobject"),b=e("./_to-primitive"),w=e("./_property-desc"),M=e("./_object-create"),T=e("./_object-gopn-ext"),E=e("./_object-gopd"),S=e("./_object-dp"),A=e("./_object-keys"),R=E.f,L=S.f,P=T.f,C=r.Symbol,O=r.JSON,I=O&&O.stringify,D="prototype",B=d("_hidden"),N=d("toPrimitive"),U={}.propertyIsEnumerable,k=h("symbol-registry"),F=h("symbols"),z=h("op-symbols"),j=Object[D],H="function"==typeof C,G=r.QObject,V=!G||!G[D]||!G[D].findChild,W=n&&l(function(){return 7!=M(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a})?function(e,t,i){var r=R(j,t);r&&delete j[t],L(e,t,i),r&&e!==j&&L(j,t,r)}:L,X=function(e){var t=F[e]=M(C[D]);return t._k=e,t},q=H&&"symbol"==typeof C.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof C},Y=function(e,t,i){return e===j&&Y(z,t,i),y(e),t=b(t,!0),y(i),a(F,t)?(i.enumerable?(a(e,B)&&e[B][t]&&(e[B][t]=!1),i=M(i,{enumerable:w(0,!1)})):(a(e,B)||L(e,B,w(1,{})),e[B][t]=!0),W(e,t,i)):L(e,t,i)},J=function(e,t){y(e);for(var i,r=g(t=x(t)),n=0,o=r.length;n<o;)Y(e,i=r[n++],t[i]);return e},Z=function(e){var t=U.call(this,e=b(e,!0));return!(this===j&&a(F,e)&&!a(z,e))&&(!(t||!a(this,e)||!a(F,e)||a(this,B)&&this[B][e])||t)},K=function(e,t){if(e=x(e),t=b(t,!0),e!==j||!a(F,t)||a(z,t)){var i=R(e,t);return!i||!a(F,t)||a(e,B)&&e[B][t]||(i.enumerable=!0),i}},Q=function(e){for(var t,i=P(x(e)),r=[],n=0;i.length>n;)a(F,t=i[n++])||t==B||t==c||r.push(t);return r},$=function(e){for(var t,i=e===j,r=P(i?z:x(e)),n=[],o=0;r.length>o;)!a(F,t=r[o++])||i&&!a(j,t)||n.push(F[t]);return n};H||(s((C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var t=p(0<arguments.length?arguments[0]:void 0),i=function(e){this===j&&i.call(z,e),a(this,B)&&a(this[B],t)&&(this[B][t]=!1),W(this,t,w(1,e))};return n&&V&&W(j,t,{configurable:!0,set:i}),X(t)})[D],"toString",function(){return this._k}),E.f=K,S.f=Y,e("./_object-gopn").f=T.f=Q,e("./_object-pie").f=Z,e("./_object-gops").f=$,n&&!e("./_library")&&s(j,"propertyIsEnumerable",Z,!0),f.f=function(e){return X(d(e))}),o(o.G+o.W+o.F*!H,{Symbol:C});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)d(ee[te++]);for(var ie=A(d.store),re=0;ie.length>re;)m(ie[re++]);o(o.S+o.F*!H,"Symbol",{for:function(e){return a(k,e+="")?k[e]:k[e]=C(e)},keyFor:function(e){if(!q(e))throw TypeError(e+" is not a symbol!");for(var t in k)if(k[t]===e)return t},useSetter:function(){V=!0},useSimple:function(){V=!1}}),o(o.S+o.F*!H,"Object",{create:function(e,t){return void 0===t?M(e):J(M(e),t)},defineProperty:Y,defineProperties:J,getOwnPropertyDescriptor:K,getOwnPropertyNames:Q,getOwnPropertySymbols:$}),O&&o(o.S+o.F*(!H||l(function(){var e=C();return"[null]"!=I([e])||"{}"!=I({a:e})||"{}"!=I(Object(e))})),"JSON",{stringify:function(e){for(var t,i,r=[e],n=1;arguments.length>n;)r.push(arguments[n++]);if(i=t=r[1],(_(t)||void 0!==e)&&!q(e))return v(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!q(t))return t}),r[1]=t,I.apply(O,r)}}),C[D][N]||e("./_hide")(C[D],N,C[D].valueOf),u(C,"Symbol"),u(Math,"Math",!0),u(r.JSON,"JSON",!0)},{"./_an-object":42,"./_descriptors":49,"./_enum-keys":52,"./_export":53,"./_fails":54,"./_global":56,"./_has":57,"./_hide":58,"./_is-array":64,"./_is-object":65,"./_library":72,"./_meta":73,"./_object-create":76,"./_object-dp":77,"./_object-gopd":79,"./_object-gopn":81,"./_object-gopn-ext":80,"./_object-gops":82,"./_object-keys":85,"./_object-pie":86,"./_property-desc":90,"./_redefine":92,"./_set-to-string-tag":95,"./_shared":97,"./_to-iobject":103,"./_to-primitive":106,"./_uid":107,"./_wks":111,"./_wks-define":109,"./_wks-ext":110}],122:[function(e,t,i){"use strict";var r=e("./_export"),n=e("./_core"),o=e("./_global"),a=e("./_species-constructor"),s=e("./_promise-resolve");r(r.P+r.R,"Promise",{finally:function(t){var i=a(this,n.Promise||o.Promise),e="function"==typeof t;return this.then(e?function(e){return s(i,t()).then(function(){return e})}:t,e?function(e){return s(i,t()).then(function(){throw e})}:t)}})},{"./_core":46,"./_export":53,"./_global":56,"./_promise-resolve":89,"./_species-constructor":98}],123:[function(e,t,i){"use strict";var r=e("./_export"),n=e("./_new-promise-capability"),o=e("./_perform");r(r.S,"Promise",{try:function(e){var t=n.f(this),i=o(e);return(i.e?t.reject:t.resolve)(i.v),t.promise}})},{"./_export":53,"./_new-promise-capability":75,"./_perform":88}],124:[function(e,t,i){e("./_wks-define")("asyncIterator")},{"./_wks-define":109}],125:[function(e,t,i){e("./_wks-define")("observable")},{"./_wks-define":109}],126:[function(e,t,i){e("./es6.array.iterator");for(var r=e("./_global"),n=e("./_hide"),o=e("./_iterators"),a=e("./_wks")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<s.length;c++){var l=s[c],h=r[l],u=h&&h.prototype;u&&!u[a]&&n(u,a,l),o[l]=o.Array}},{"./_global":56,"./_hide":58,"./_iterators":71,"./_wks":111,"./es6.array.iterator":113}],127:[function(e,t,i){var r,n;r=this,n=function(n){return function(){var e=n,t=e.lib.BlockCipher,i=e.algo,l=[],h=[],u=[],p=[],d=[],f=[],m=[],g=[],v=[],y=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var i=0,r=0;for(t=0;t<256;t++){var n=r^r<<1^r<<2^r<<3^r<<4;n=n>>>8^255&n^99,l[i]=n;var o=e[h[n]=i],a=e[o],s=e[a],c=257*e[n]^16843008*n;u[i]=c<<24|c>>>8,p[i]=c<<16|c>>>16,d[i]=c<<8|c>>>24,f[i]=c;c=16843009*s^65537*a^257*o^16843008*i;m[n]=c<<24|c>>>8,g[n]=c<<16|c>>>16,v[n]=c<<8|c>>>24,y[n]=c,i?(i=o^e[e[e[s^o]]],r^=e[e[r]]):i=r=1}}();var _=[0,1,2,4,8,16,32,64,128,27,54],r=i.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,i=e.sigBytes/4,r=4*((this._nRounds=i+6)+1),n=this._keySchedule=[],o=0;o<r;o++)if(o<i)n[o]=t[o];else{var a=n[o-1];o%i?6<i&&o%i==4&&(a=l[a>>>24]<<24|l[a>>>16&255]<<16|l[a>>>8&255]<<8|l[255&a]):(a=l[(a=a<<8|a>>>24)>>>24]<<24|l[a>>>16&255]<<16|l[a>>>8&255]<<8|l[255&a],a^=_[o/i|0]<<24),n[o]=n[o-i]^a}for(var s=this._invKeySchedule=[],c=0;c<r;c++){o=r-c;if(c%4)a=n[o];else a=n[o-4];s[c]=c<4||o<=4?a:m[l[a>>>24]]^g[l[a>>>16&255]]^v[l[a>>>8&255]]^y[l[255&a]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,u,p,d,f,l)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,m,g,v,y,h);i=e[t+1];e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,r,n,o,a,s){for(var c=this._nRounds,l=e[t]^i[0],h=e[t+1]^i[1],u=e[t+2]^i[2],p=e[t+3]^i[3],d=4,f=1;f<c;f++){var m=r[l>>>24]^n[h>>>16&255]^o[u>>>8&255]^a[255&p]^i[d++],g=r[h>>>24]^n[u>>>16&255]^o[p>>>8&255]^a[255&l]^i[d++],v=r[u>>>24]^n[p>>>16&255]^o[l>>>8&255]^a[255&h]^i[d++],y=r[p>>>24]^n[l>>>16&255]^o[h>>>8&255]^a[255&u]^i[d++];l=m,h=g,u=v,p=y}m=(s[l>>>24]<<24|s[h>>>16&255]<<16|s[u>>>8&255]<<8|s[255&p])^i[d++],g=(s[h>>>24]<<24|s[u>>>16&255]<<16|s[p>>>8&255]<<8|s[255&l])^i[d++],v=(s[u>>>24]<<24|s[p>>>16&255]<<16|s[l>>>8&255]<<8|s[255&h])^i[d++],y=(s[p>>>24]<<24|s[l>>>16&255]<<16|s[h>>>8&255]<<8|s[255&u])^i[d++];e[t]=m,e[t+1]=g,e[t+2]=v,e[t+3]=y},keySize:8});e.AES=t._createHelper(r)}(),n.AES},"object"==typeof i?t.exports=i=n(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],n):n(r.CryptoJS)},{"./cipher-core":128,"./core":129,"./enc-base64":130,"./evpkdf":132,"./md5":137}],128:[function(e,t,i){var r,n;r=this,n=function(e){var t,i,r,c,n,o,a,s,l,h,u,p,d,f,m,g,v,y;e.lib.Cipher||(i=(t=e).lib,r=i.Base,c=i.WordArray,n=i.BufferedBlockAlgorithm,(o=t.enc).Utf8,a=o.Base64,s=t.algo.EvpKDF,l=i.Cipher=n.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){n.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function n(e){return"string"==typeof e?y:g}return function(r){return{encrypt:function(e,t,i){return n(t).encrypt(r,e,t,i)},decrypt:function(e,t,i){return n(t).decrypt(r,e,t,i)}}}}()}),i.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),h=t.mode={},u=i.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=h.CBC=function(){var e=u.extend();function o(e,t,i){var r=this._iv;if(r){var n=r;this._iv=void 0}else n=this._prevBlock;for(var o=0;o<i;o++)e[t+o]^=n[o]}return e.Encryptor=e.extend({processBlock:function(e,t){var i=this._cipher,r=i.blockSize;o.call(this,e,t,r),i.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),e.Decryptor=e.extend({processBlock:function(e,t){var i=this._cipher,r=i.blockSize,n=e.slice(t,t+r);i.decryptBlock(e,t),o.call(this,e,t,r),this._prevBlock=n}}),e}(),d=(t.pad={}).Pkcs7={pad:function(e,t){for(var i=4*t,r=i-e.sigBytes%i,n=r<<24|r<<16|r<<8|r,o=[],a=0;a<r;a+=4)o.push(n);var s=c.create(o,r);e.concat(s)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},i.BlockCipher=l.extend({cfg:l.cfg.extend({mode:p,padding:d}),reset:function(){l.reset.call(this);var e=this.cfg,t=e.iv,i=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=i.createEncryptor;else{r=i.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==r?this._mode.init(this,t&&t.words):(this._mode=r.call(i,this,t&&t.words),this._mode.__creator=r)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{t=this._process(!0);e.unpad(t)}return t},blockSize:4}),f=i.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),m=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,i=e.salt;if(i)var r=c.create([1398893684,1701076831]).concat(i).concat(t);else r=t;return r.toString(a)},parse:function(e){var t=a.parse(e),i=t.words;if(1398893684==i[0]&&1701076831==i[1]){var r=c.create(i.slice(2,4));i.splice(0,4),t.sigBytes-=16}return f.create({ciphertext:t,salt:r})}},g=i.SerializableCipher=r.extend({cfg:r.extend({format:m}),encrypt:function(e,t,i,r){r=this.cfg.extend(r);var n=e.createEncryptor(i,r),o=n.finalize(t),a=n.cfg;return f.create({ciphertext:o,key:i,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,i,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(i,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),v=(t.kdf={}).OpenSSL={execute:function(e,t,i,r){r||(r=c.random(8));var n=s.create({keySize:t+i}).compute(e,r),o=c.create(n.words.slice(t),4*i);return n.sigBytes=4*t,f.create({key:n,iv:o,salt:r})}},y=i.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:v}),encrypt:function(e,t,i,r){var n=(r=this.cfg.extend(r)).kdf.execute(i,e.keySize,e.ivSize);r.iv=n.iv;var o=g.encrypt.call(this,e,t,n.key,r);return o.mixIn(n),o},decrypt:function(e,t,i,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var n=r.kdf.execute(i,e.keySize,e.ivSize,t.salt);return r.iv=n.iv,g.decrypt.call(this,e,t,n.key,r)}}))},"object"==typeof i?t.exports=i=n(e("./core"),e("./evpkdf")):"function"==typeof define&&define.amd?define(["./core","./evpkdf"],n):n(r.CryptoJS)},{"./core":129,"./evpkdf":132}],129:[function(e,t,i){var r,n;r=this,n=function(){var h,i,e,t,r,u,n,o,a,s,c,l,p=p||(h=Math,i=Object.create||function(){function i(){}return function(e){var t;return i.prototype=e,t=new i,i.prototype=null,t}}(),t=(e={}).lib={},r=t.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=t.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||o).stringify(this)},concat:function(e){var t=this.words,i=e.words,r=this.sigBytes,n=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<n;o++){var a=i[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=a<<24-(r+o)%4*8}else for(o=0;o<n;o+=4)t[r+o>>>2]=i[o>>>2];return this.sigBytes+=n,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=h.ceil(t/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t,i=[],r=function(t){t=t;var i=987654321,r=4294967295;return function(){var e=((i=36969*(65535&i)+(i>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return e/=4294967296,(e+=.5)*(.5<h.random()?1:-1)}},n=0;n<e;n+=4){var o=r(4294967296*(t||h.random()));t=987654071*o(),i.push(4294967296*o()|0)}return new u.init(i,e)}}),n=e.enc={},o=n.Hex={stringify:function(e){for(var t=e.words,i=e.sigBytes,r=[],n=0;n<i;n++){var o=t[n>>>2]>>>24-n%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,i=[],r=0;r<t;r+=2)i[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new u.init(i,t/2)}},a=n.Latin1={stringify:function(e){for(var t=e.words,i=e.sigBytes,r=[],n=0;n<i;n++){var o=t[n>>>2]>>>24-n%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,i=[],r=0;r<t;r++)i[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new u.init(i,t)}},s=n.Utf8={stringify:function(e){try{return decodeURIComponent(escape(a.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return a.parse(unescape(encodeURIComponent(e)))}},c=t.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=s.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,i=t.words,r=t.sigBytes,n=this.blockSize,o=r/(4*n),a=(o=e?h.ceil(o):h.max((0|o)-this._minBufferSize,0))*n,s=h.min(4*a,r);if(a){for(var c=0;c<a;c+=n)this._doProcessBlock(i,c);var l=i.splice(0,a);t.sigBytes-=s}return new u.init(l,s)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),t.Hasher=c.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(i){return function(e,t){return new i.init(t).finalize(e)}},_createHmacHelper:function(i){return function(e,t){return new l.HMAC.init(i,t).finalize(e)}}}),l=e.algo={},e);return p},"object"==typeof i?t.exports=i=n():"function"==typeof define&&define.amd?define([],n):r.CryptoJS=n()},{}],130:[function(e,t,i){var r,n;r=this,n=function(e){var t,c;return c=(t=e).lib.WordArray,t.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,r=this._map;e.clamp();for(var n=[],o=0;o<i;o+=3)for(var a=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<i;s++)n.push(r.charAt(a>>>6*(3-s)&63));var c=r.charAt(64);if(c)for(;n.length%4;)n.push(c);return n.join("")},parse:function(e){var t=e.length,i=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var n=0;n<i.length;n++)r[i.charCodeAt(n)]=n}var o=i.charAt(64);if(o){var a=e.indexOf(o);-1!==a&&(t=a)}return function(e,t,i){for(var r=[],n=0,o=0;o<t;o++)if(o%4){var a=i[e.charCodeAt(o-1)]<<o%4*2,s=i[e.charCodeAt(o)]>>>6-o%4*2;r[n>>>2]|=(a|s)<<24-n%4*8,n++}return c.create(r,n)}(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.enc.Base64},"object"==typeof i?t.exports=i=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(r.CryptoJS)},{"./core":129}],131:[function(e,t,i){var r,n;r=this,n=function(i){return function(){var e=i,n=e.lib.WordArray,t=e.enc;t.Utf16=t.Utf16BE={stringify:function(e){for(var t=e.words,i=e.sigBytes,r=[],n=0;n<i;n+=2){var o=t[n>>>2]>>>16-n%4*8&65535;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,i=[],r=0;r<t;r++)i[r>>>1]|=e.charCodeAt(r)<<16-r%2*16;return n.create(i,2*t)}};function a(e){return e<<8&4278255360|e>>>8&16711935}t.Utf16LE={stringify:function(e){for(var t=e.words,i=e.sigBytes,r=[],n=0;n<i;n+=2){var o=a(t[n>>>2]>>>16-n%4*8&65535);r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,i=[],r=0;r<t;r++)i[r>>>1]|=a(e.charCodeAt(r)<<16-r%2*16);return n.create(i,2*t)}}}(),i.enc.Utf16},"object"==typeof i?t.exports=i=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(r.CryptoJS)},{"./core":129}],132:[function(e,t,i){var r,n;r=this,n=function(e){var t,i,r,h,n,o,a;return i=(t=e).lib,r=i.Base,h=i.WordArray,n=t.algo,o=n.MD5,a=n.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,r=i.hasher.create(),n=h.create(),o=n.words,a=i.keySize,s=i.iterations;o.length<a;){c&&r.update(c);var c=r.update(e).finalize(t);r.reset();for(var l=1;l<s;l++)c=r.finalize(c),r.reset();n.concat(c)}return n.sigBytes=4*a,n}}),t.EvpKDF=function(e,t,i){return a.create(i).compute(e,t)},e.EvpKDF},"object"==typeof i?t.exports=i=n(e("./core"),e("./sha1"),e("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],n):n(r.CryptoJS)},{"./core":129,"./hmac":134,"./sha1":153}],133:[function(e,t,i){var r,n;r=this,n=function(e){var t,i,r;return i=(t=e).lib.CipherParams,r=t.enc.Hex,t.format.Hex={stringify:function(e){return e.ciphertext.toString(r)},parse:function(e){var t=r.parse(e);return i.create({ciphertext:t})}},e.format.Hex},"object"==typeof i?t.exports=i=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(r.CryptoJS)},{"./cipher-core":128,"./core":129}],134:[function(e,t,i){var r,n;r=this,n=function(e){var t,i,l;i=(t=e).lib.Base,l=t.enc.Utf8,t.algo.HMAC=i.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=l.parse(t));var i=e.blockSize,r=4*i;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var n=this._oKey=t.clone(),o=this._iKey=t.clone(),a=n.words,s=o.words,c=0;c<i;c++)a[c]^=1549556828,s[c]^=909522486;n.sigBytes=o.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,i=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(i))}})},"object"==typeof i?t.exports=i=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(r.CryptoJS)},{"./core":129}],135:[function(e,t,i){var r,n;r=this,n=function(e){return e},"object"==typeof i?t.exports=i=n(e("./core"),e("./x64-core"),e("./lib-typedarrays"),e("./enc-utf16"),e("./enc-base64"),e("./md5"),e("./sha1"),e("./sha256"),e("./sha224"),e("./sha512"),e("./sha384"),e("./sha3"),e("./ripemd160"),e("./hmac"),e("./pbkdf2"),e("./evpkdf"),e("./cipher-core"),e("./mode-cfb"),e("./mode-ctr"),e("./mode-ctr-gladman"),e("./mode-ofb"),e("./mode-ecb"),e("./pad-ansix923"),e("./pad-iso10126"),e("./pad-iso97971"),e("./pad-zeropadding"),e("./pad-nopadding"),e("./format-hex"),e("./aes"),e("./tripledes"),e("./rc4"),e("./rabbit"),e("./rabbit-legacy")):"function"==typeof define&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy"],n):r.CryptoJS=n(r.CryptoJS)},{"./aes":127,"./cipher-core":128,"./core":129,"./enc-base64":130,"./enc-utf16":131,"./evpkdf":132,"./format-hex":133,"./hmac":134,"./lib-typedarrays":136,"./md5":137,"./mode-cfb":138,"./mode-ctr":140,"./mode-ctr-gladman":139,"./mode-ecb":141,"./mode-ofb":142,"./pad-ansix923":143,"./pad-iso10126":144,"./pad-iso97971":145,"./pad-nopadding":146,"./pad-zeropadding":147,"./pbkdf2":148,"./rabbit":150,"./rabbit-legacy":149,"./rc4":151,"./ripemd160":152,"./sha1":153,"./sha224":154,"./sha256":155,"./sha3":156,"./sha384":157,"./sha512":158,"./tripledes":159,"./x64-core":160}],136:[function(e,t,i){var r,n;r=this,n=function(t){return function(){if("function"==typeof ArrayBuffer){var e=t.lib.WordArray,n=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,i=[],r=0;r<t;r++)i[r>>>2]|=e[r]<<24-r%4*8;n.call(this,i,t)}else n.apply(this,arguments)}).prototype=e}}(),t.lib.WordArray},"object"==typeof i?t.exports=i=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(r.CryptoJS)},{"./core":129}],137:[function(e,t,i){var r,n;r=this,n=function(a){return function(h){var e=a,t=e.lib,i=t.WordArray,r=t.Hasher,n=e.algo,S=[];!function(){for(var e=0;e<64;e++)S[e]=4294967296*h.abs(h.sin(e+1))|0}();var o=n.MD5=r.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var r=t+i,n=e[r];e[r]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var o=this._hash.words,a=e[t+0],s=e[t+1],c=e[t+2],l=e[t+3],h=e[t+4],u=e[t+5],p=e[t+6],d=e[t+7],f=e[t+8],m=e[t+9],g=e[t+10],v=e[t+11],y=e[t+12],_=e[t+13],x=e[t+14],b=e[t+15],w=o[0],M=o[1],T=o[2],E=o[3];M=P(M=P(M=P(M=P(M=L(M=L(M=L(M=L(M=R(M=R(M=R(M=R(M=A(M=A(M=A(M=A(M,T=A(T,E=A(E,w=A(w,M,T,E,a,7,S[0]),M,T,s,12,S[1]),w,M,c,17,S[2]),E,w,l,22,S[3]),T=A(T,E=A(E,w=A(w,M,T,E,h,7,S[4]),M,T,u,12,S[5]),w,M,p,17,S[6]),E,w,d,22,S[7]),T=A(T,E=A(E,w=A(w,M,T,E,f,7,S[8]),M,T,m,12,S[9]),w,M,g,17,S[10]),E,w,v,22,S[11]),T=A(T,E=A(E,w=A(w,M,T,E,y,7,S[12]),M,T,_,12,S[13]),w,M,x,17,S[14]),E,w,b,22,S[15]),T=R(T,E=R(E,w=R(w,M,T,E,s,5,S[16]),M,T,p,9,S[17]),w,M,v,14,S[18]),E,w,a,20,S[19]),T=R(T,E=R(E,w=R(w,M,T,E,u,5,S[20]),M,T,g,9,S[21]),w,M,b,14,S[22]),E,w,h,20,S[23]),T=R(T,E=R(E,w=R(w,M,T,E,m,5,S[24]),M,T,x,9,S[25]),w,M,l,14,S[26]),E,w,f,20,S[27]),T=R(T,E=R(E,w=R(w,M,T,E,_,5,S[28]),M,T,c,9,S[29]),w,M,d,14,S[30]),E,w,y,20,S[31]),T=L(T,E=L(E,w=L(w,M,T,E,u,4,S[32]),M,T,f,11,S[33]),w,M,v,16,S[34]),E,w,x,23,S[35]),T=L(T,E=L(E,w=L(w,M,T,E,s,4,S[36]),M,T,h,11,S[37]),w,M,d,16,S[38]),E,w,g,23,S[39]),T=L(T,E=L(E,w=L(w,M,T,E,_,4,S[40]),M,T,a,11,S[41]),w,M,l,16,S[42]),E,w,p,23,S[43]),T=L(T,E=L(E,w=L(w,M,T,E,m,4,S[44]),M,T,y,11,S[45]),w,M,b,16,S[46]),E,w,c,23,S[47]),T=P(T,E=P(E,w=P(w,M,T,E,a,6,S[48]),M,T,d,10,S[49]),w,M,x,15,S[50]),E,w,u,21,S[51]),T=P(T,E=P(E,w=P(w,M,T,E,y,6,S[52]),M,T,l,10,S[53]),w,M,g,15,S[54]),E,w,s,21,S[55]),T=P(T,E=P(E,w=P(w,M,T,E,f,6,S[56]),M,T,b,10,S[57]),w,M,p,15,S[58]),E,w,_,21,S[59]),T=P(T,E=P(E,w=P(w,M,T,E,h,6,S[60]),M,T,v,10,S[61]),w,M,c,15,S[62]),E,w,m,21,S[63]),o[0]=o[0]+w|0,o[1]=o[1]+M|0,o[2]=o[2]+T|0,o[3]=o[3]+E|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32;var n=h.floor(i/4294967296),o=i;t[15+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t[14+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(t.length+1),this._process();for(var a=this._hash,s=a.words,c=0;c<4;c++){var l=s[c];s[c]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return a},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});function A(e,t,i,r,n,o,a){var s=e+(t&i|~t&r)+n+a;return(s<<o|s>>>32-o)+t}function R(e,t,i,r,n,o,a){var s=e+(t&r|i&~r)+n+a;return(s<<o|s>>>32-o)+t}function L(e,t,i,r,n,o,a){var s=e+(t^i^r)+n+a;return(s<<o|s>>>32-o)+t}function P(e,t,i,r,n,o,a){var s=e+(i^(t|~r))+n+a;return(s<<o|s>>>32-o)+t}e.MD5=r._createHelper(o),e.HmacMD5=r._createHmacHelper(o)}(Math),a.MD5},"object"==typeof i?t.exports=i=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(r.CryptoJS)},{"./core":129}],138:[function(e,t,i){var r,n;r=this,n=function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();function o(e,t,i,r){var n=this._iv;if(n){var o=n.slice(0);this._iv=void 0}else o=this._prevBlock;r.encryptBlock(o,0);for(var a=0;a<i;a++)e[t+a]^=o[a]}return e.Encryptor=e.extend({processBlock:function(e,t){var i=this._cipher,r=i.blockSize;o.call(this,e,t,r,i),this._prevBlock=e.slice(t,t+r)}}),e.Decryptor=e.extend({processBlock:function(e,t){var i=this._cipher,r=i.blockSize,n=e.slice(t,t+r);o.call(this,e,t,r,i),this._prevBlock=n}}),e}(),t.mode.CFB},"object"==typeof i?t.exports=i=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(r.CryptoJS)},{"./cipher-core":128,"./core":129}],139:[function(e,t,i){var r,n;r=this,n=function(i){return i.mode.CTRGladman=function(){var e=i.lib.BlockCipherMode.extend();function l(e){if(255==(e>>24&255)){var t=e>>16&255,i=e>>8&255,r=255&e;255===t?(t=0,255===i?(i=0,255===r?r=0:++r):++i):++t,e=0,e+=t<<16,e+=i<<8,e+=r}else e+=1<<24;return e}var t=e.Encryptor=e.extend({processBlock:function(e,t){var i,r=this._cipher,n=r.blockSize,o=this._iv,a=this._counter;o&&(a=this._counter=o.slice(0),this._iv=void 0),0===((i=a)[0]=l(i[0]))&&(i[1]=l(i[1]));var s=a.slice(0);r.encryptBlock(s,0);for(var c=0;c<n;c++)e[t+c]^=s[c]}});return e.Decryptor=t,e}(),i.mode.CTRGladman},"object"==typeof i?t.exports=i=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(r.CryptoJS)},{"./cipher-core":128,"./core":129}],140:[function(e,t,i){var r,n;r=this,n=function(e){var t,i;return e.mode.CTR=(t=e.lib.BlockCipherMode.extend(),i=t.Encryptor=t.extend({processBlock:function(e,t){var i=this._cipher,r=i.blockSize,n=this._iv,o=this._counter;n&&(o=this._counter=n.slice(0),this._iv=void 0);var a=o.slice(0);i.encryptBlock(a,0),o[r-1]=o[r-1]+1|0;for(var s=0;s<r;s++)e[t+s]^=a[s]}}),t.Decryptor=i,t),e.mode.CTR},"object"==typeof i?t.exports=i=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(r.CryptoJS)},{"./cipher-core":128,"./core":129}],141:[function(e,t,i){var r,n;r=this,n=function(e){var t;return e.mode.ECB=((t=e.lib.BlockCipherMode.extend()).Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t),e.mode.ECB},"object"==typeof i?t.exports=i=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(r.CryptoJS)},{"./cipher-core":128,"./core":129}],142:[function(e,t,i){var r,n;r=this,n=function(e){var t,i;return e.mode.OFB=(t=e.lib.BlockCipherMode.extend(),i=t.Encryptor=t.extend({processBlock:function(e,t){var i=this._cipher,r=i.blockSize,n=this._iv,o=this._keystream;n&&(o=this._keystream=n.slice(0),this._iv=void 0),i.encryptBlock(o,0);for(var a=0;a<r;a++)e[t+a]^=o[a]}}),t.Decryptor=i,t),e.mode.OFB},"object"==typeof i?t.exports=i=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(r.CryptoJS)},{"./cipher-core":128,"./core":129}],143:[function(e,t,i){var r,n;r=this,n=function(e){return e.pad.AnsiX923={pad:function(e,t){var i=e.sigBytes,r=4*t,n=r-i%r,o=i+n-1;e.clamp(),e.words[o>>>2]|=n<<24-o%4*8,e.sigBytes+=n},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923},"object"==typeof i?t.exports=i=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(r.CryptoJS)},{"./cipher-core":128,"./core":129}],144:[function(e,t,i){var r,n;r=this,n=function(n){return n.pad.Iso10126={pad:function(e,t){var i=4*t,r=i-e.sigBytes%i;e.concat(n.lib.WordArray.random(r-1)).concat(n.lib.WordArray.create([r<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Iso10126},"object"==typeof i?t.exports=i=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(r.CryptoJS)},{"./cipher-core":128,"./core":129}],145:[function(e,t,i){var r,n;r=this,n=function(i){return i.pad.Iso97971={pad:function(e,t){e.concat(i.lib.WordArray.create([2147483648],1)),i.pad.ZeroPadding.pad(e,t)},unpad:function(e){i.pad.ZeroPadding.unpad(e),e.sigBytes--}},i.pad.Iso97971},"object"==typeof i?t.exports=i=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(r.CryptoJS)},{"./cipher-core":128,"./core":129}],146:[function(e,t,i){var r,n;r=this,n=function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding},"object"==typeof i?t.exports=i=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(r.CryptoJS)},{"./cipher-core":128,"./core":129}],147:[function(e,t,i){var r,n;r=this,n=function(e){return e.pad.ZeroPadding={pad:function(e,t){var i=4*t;e.clamp(),e.sigBytes+=i-(e.sigBytes%i||i)},unpad:function(e){for(var t=e.words,i=e.sigBytes-1;!(t[i>>>2]>>>24-i%4*8&255);)i--;e.sigBytes=i+1}},e.pad.ZeroPadding},"object"==typeof i?t.exports=i=n(e("./core"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./cipher-core"],n):n(r.CryptoJS)},{"./cipher-core":128,"./core":129}],148:[function(e,t,i){var r,n;r=this,n=function(e){var t,i,r,v,n,o,y,a;return i=(t=e).lib,r=i.Base,v=i.WordArray,n=t.algo,o=n.SHA1,y=n.HMAC,a=n.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:o,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=this.cfg,r=y.create(i.hasher,e),n=v.create(),o=v.create([1]),a=n.words,s=o.words,c=i.keySize,l=i.iterations;a.length<c;){var h=r.update(t).finalize(o);r.reset();for(var u=h.words,p=u.length,d=h,f=1;f<l;f++){d=r.finalize(d),r.reset();for(var m=d.words,g=0;g<p;g++)u[g]^=m[g]}n.concat(h),s[0]++}return n.sigBytes=4*c,n}}),t.PBKDF2=function(e,t,i){return a.create(i).compute(e,t)},e.PBKDF2},"object"==typeof i?t.exports=i=n(e("./core"),e("./sha1"),e("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],n):n(r.CryptoJS)},{"./core":129,"./hmac":134,"./sha1":153}],149:[function(e,t,i){var r,n;r=this,n=function(o){return function(){var e=o,t=e.lib.StreamCipher,i=e.algo,n=[],c=[],l=[],r=i.RabbitLegacy=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]],n=this._b=0;n<4;n++)p.call(this);for(n=0;n<8;n++)r[n]^=i[n+4&7];if(t){var o=t.words,a=o[0],s=o[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),h=c>>>16|4294901760&l,u=l<<16|65535&c;r[0]^=c,r[1]^=h,r[2]^=l,r[3]^=u,r[4]^=c,r[5]^=h,r[6]^=l,r[7]^=u;for(n=0;n<4;n++)p.call(this)}},_doProcessBlock:function(e,t){var i=this._X;p.call(this),n[0]=i[0]^i[5]>>>16^i[3]<<16,n[1]=i[2]^i[7]>>>16^i[5]<<16,n[2]=i[4]^i[1]>>>16^i[7]<<16,n[3]=i[6]^i[3]>>>16^i[1]<<16;for(var r=0;r<4;r++)n[r]=16711935&(n[r]<<8|n[r]>>>24)|4278255360&(n[r]<<24|n[r]>>>8),e[t+r]^=n[r]},blockSize:4,ivSize:2});function p(){for(var e=this._X,t=this._C,i=0;i<8;i++)c[i]=t[i];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<c[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<c[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<c[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<c[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<c[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<c[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<c[6]>>>0?1:0)|0,this._b=t[7]>>>0<c[7]>>>0?1:0;for(i=0;i<8;i++){var r=e[i]+t[i],n=65535&r,o=r>>>16,a=((n*n>>>17)+n*o>>>15)+o*o,s=((4294901760&r)*r|0)+((65535&r)*r|0);l[i]=a^s}e[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,e[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,e[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,e[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,e[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,e[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,e[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,e[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}e.RabbitLegacy=t._createHelper(r)}(),o.RabbitLegacy},"object"==typeof i?t.exports=i=n(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],n):n(r.CryptoJS)},{"./cipher-core":128,"./core":129,"./enc-base64":130,"./evpkdf":132,"./md5":137}],150:[function(e,t,i){var r,n;r=this,n=function(o){return function(){var e=o,t=e.lib.StreamCipher,i=e.algo,n=[],c=[],l=[],r=i.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,i=0;i<4;i++)e[i]=16711935&(e[i]<<8|e[i]>>>24)|4278255360&(e[i]<<24|e[i]>>>8);var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(i=this._b=0;i<4;i++)p.call(this);for(i=0;i<8;i++)n[i]^=r[i+4&7];if(t){var o=t.words,a=o[0],s=o[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),h=c>>>16|4294901760&l,u=l<<16|65535&c;n[0]^=c,n[1]^=h,n[2]^=l,n[3]^=u,n[4]^=c,n[5]^=h,n[6]^=l,n[7]^=u;for(i=0;i<4;i++)p.call(this)}},_doProcessBlock:function(e,t){var i=this._X;p.call(this),n[0]=i[0]^i[5]>>>16^i[3]<<16,n[1]=i[2]^i[7]>>>16^i[5]<<16,n[2]=i[4]^i[1]>>>16^i[7]<<16,n[3]=i[6]^i[3]>>>16^i[1]<<16;for(var r=0;r<4;r++)n[r]=16711935&(n[r]<<8|n[r]>>>24)|4278255360&(n[r]<<24|n[r]>>>8),e[t+r]^=n[r]},blockSize:4,ivSize:2});function p(){for(var e=this._X,t=this._C,i=0;i<8;i++)c[i]=t[i];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<c[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<c[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<c[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<c[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<c[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<c[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<c[6]>>>0?1:0)|0,this._b=t[7]>>>0<c[7]>>>0?1:0;for(i=0;i<8;i++){var r=e[i]+t[i],n=65535&r,o=r>>>16,a=((n*n>>>17)+n*o>>>15)+o*o,s=((4294901760&r)*r|0)+((65535&r)*r|0);l[i]=a^s}e[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,e[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,e[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,e[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,e[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,e[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,e[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,e[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}e.Rabbit=t._createHelper(r)}(),o.Rabbit},"object"==typeof i?t.exports=i=n(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],n):n(r.CryptoJS)},{"./cipher-core":128,"./core":129,"./enc-base64":130,"./evpkdf":132,"./md5":137}],151:[function(e,t,i){var r,n;r=this,n=function(a){return function(){var e=a,t=e.lib.StreamCipher,i=e.algo,r=i.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,i=e.sigBytes,r=this._S=[],n=0;n<256;n++)r[n]=n;n=0;for(var o=0;n<256;n++){var a=n%i,s=t[a>>>2]>>>24-a%4*8&255;o=(o+r[n]+s)%256;var c=r[n];r[n]=r[o],r[o]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=n.call(this)},keySize:8,ivSize:0});function n(){for(var e=this._S,t=this._i,i=this._j,r=0,n=0;n<4;n++){i=(i+e[t=(t+1)%256])%256;var o=e[t];e[t]=e[i],e[i]=o,r|=e[(e[t]+e[i])%256]<<24-8*n}return this._i=t,this._j=i,r}e.RC4=t._createHelper(r);var o=i.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var e=this.cfg.drop;0<e;e--)n.call(this)}});e.RC4Drop=t._createHelper(o)}(),a.RC4},"object"==typeof i?t.exports=i=n(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],n):n(r.CryptoJS)},{"./cipher-core":128,"./core":129,"./enc-base64":130,"./evpkdf":132,"./md5":137}],152:[function(e,t,i){var r,n;r=this,n=function(s){return function(e){var t=s,i=t.lib,r=i.WordArray,n=i.Hasher,o=t.algo,M=r.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),T=r.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),E=r.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),S=r.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),A=r.create([0,1518500249,1859775393,2400959708,2840853838]),R=r.create([1352829926,1548603684,1836072691,2053994217,0]),a=o.RIPEMD160=n.extend({_doReset:function(){this._hash=r.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=0;i<16;i++){var r=t+i,n=e[r];e[r]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var o,a,s,c,l,h,u,p,d,f,m,g=this._hash.words,v=A.words,y=R.words,_=M.words,x=T.words,b=E.words,w=S.words;h=o=g[0],u=a=g[1],p=s=g[2],d=c=g[3],f=l=g[4];for(i=0;i<80;i+=1)m=o+e[t+_[i]]|0,m+=i<16?L(a,s,c)+v[0]:i<32?P(a,s,c)+v[1]:i<48?C(a,s,c)+v[2]:i<64?O(a,s,c)+v[3]:I(a,s,c)+v[4],m=(m=D(m|=0,b[i]))+l|0,o=l,l=c,c=D(s,10),s=a,a=m,m=h+e[t+x[i]]|0,m+=i<16?I(u,p,d)+y[0]:i<32?O(u,p,d)+y[1]:i<48?C(u,p,d)+y[2]:i<64?P(u,p,d)+y[3]:L(u,p,d)+y[4],m=(m=D(m|=0,w[i]))+f|0,h=f,f=d,d=D(p,10),p=u,u=m;m=g[1]+s+d|0,g[1]=g[2]+c+f|0,g[2]=g[3]+l+h|0,g[3]=g[4]+o+u|0,g[4]=g[0]+a+p|0,g[0]=m},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),e.sigBytes=4*(t.length+1),this._process();for(var n=this._hash,o=n.words,a=0;a<5;a++){var s=o[a];o[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return n},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});function L(e,t,i){return e^t^i}function P(e,t,i){return e&t|~e&i}function C(e,t,i){return(e|~t)^i}function O(e,t,i){return e&i|t&~i}function I(e,t,i){return e^(t|~i)}function D(e,t){return e<<t|e>>>32-t}t.RIPEMD160=n._createHelper(a),t.HmacRIPEMD160=n._createHmacHelper(a)}(Math),s.RIPEMD160},"object"==typeof i?t.exports=i=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(r.CryptoJS)},{"./core":129}],153:[function(e,t,i){var r,n;r=this,n=function(e){var t,i,r,n,o,u,a;return i=(t=e).lib,r=i.WordArray,n=i.Hasher,o=t.algo,u=[],a=o.SHA1=n.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var i=this._hash.words,r=i[0],n=i[1],o=i[2],a=i[3],s=i[4],c=0;c<80;c++){if(c<16)u[c]=0|e[t+c];else{var l=u[c-3]^u[c-8]^u[c-14]^u[c-16];u[c]=l<<1|l>>>31}var h=(r<<5|r>>>27)+s+u[c];h+=c<20?1518500249+(n&o|~n&a):c<40?1859775393+(n^o^a):c<60?(n&o|n&a|o&a)-1894007588:(n^o^a)-899497514,s=a,a=o,o=n<<30|n>>>2,n=r,r=h}i[0]=i[0]+r|0,i[1]=i[1]+n|0,i[2]=i[2]+o|0,i[3]=i[3]+a|0,i[4]=i[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(i/4294967296),t[15+(r+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA1=n._createHelper(a),t.HmacSHA1=n._createHmacHelper(a),e.SHA1},"object"==typeof i?t.exports=i=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(r.CryptoJS)},{"./core":129}],154:[function(e,t,i){var r,n;r=this,n=function(e){var t,i,r,n,o;return i=(t=e).lib.WordArray,r=t.algo,n=r.SHA256,o=r.SHA224=n.extend({_doReset:function(){this._hash=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=n._doFinalize.call(this);return e.sigBytes-=4,e}}),t.SHA224=n._createHelper(o),t.HmacSHA224=n._createHmacHelper(o),e.SHA224},"object"==typeof i?t.exports=i=n(e("./core"),e("./sha256")):"function"==typeof define&&define.amd?define(["./core","./sha256"],n):n(r.CryptoJS)},{"./core":129,"./sha256":155}],155:[function(e,t,i){var r,n;r=this,n=function(c){return function(n){var e=c,t=e.lib,i=t.WordArray,r=t.Hasher,o=e.algo,a=[],_=[];!function(){function e(e){for(var t=n.sqrt(e),i=2;i<=t;i++)if(!(e%i))return!1;return!0}function t(e){return 4294967296*(e-(0|e))|0}for(var i=2,r=0;r<64;)e(i)&&(r<8&&(a[r]=t(n.pow(i,.5))),_[r]=t(n.pow(i,1/3)),r++),i++}();var x=[],s=o.SHA256=r.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,r=i[0],n=i[1],o=i[2],a=i[3],s=i[4],c=i[5],l=i[6],h=i[7],u=0;u<64;u++){if(u<16)x[u]=0|e[t+u];else{var p=x[u-15],d=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,f=x[u-2],m=(f<<15|f>>>17)^(f<<13|f>>>19)^f>>>10;x[u]=d+x[u-7]+m+x[u-16]}var g=r&n^r&o^n&o,v=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),y=h+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&c^~s&l)+_[u]+x[u];h=l,l=c,c=s,s=a+y|0,a=o,o=n,n=r,r=y+(v+g)|0}i[0]=i[0]+r|0,i[1]=i[1]+n|0,i[2]=i[2]+o|0,i[3]=i[3]+a|0,i[4]=i[4]+s|0,i[5]=i[5]+c|0,i[6]=i[6]+l|0,i[7]=i[7]+h|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=n.floor(i/4294967296),t[15+(r+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA256=r._createHelper(s),e.HmacSHA256=r._createHmacHelper(s)}(Math),c.SHA256},"object"==typeof i?t.exports=i=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(r.CryptoJS)},{"./core":129}],156:[function(e,t,i){var r,n;r=this,n=function(o){return function(p){var e=o,t=e.lib,d=t.WordArray,r=t.Hasher,h=e.x64.Word,i=e.algo,L=[],P=[],C=[];!function(){for(var e=1,t=0,i=0;i<24;i++){L[e+5*t]=(i+1)*(i+2)/2%64;var r=(2*e+3*t)%5;e=t%5,t=r}for(e=0;e<5;e++)for(t=0;t<5;t++)P[e+5*t]=t+(2*e+3*t)%5*5;for(var n=1,o=0;o<24;o++){for(var a=0,s=0,c=0;c<7;c++){if(1&n){var l=(1<<c)-1;l<32?s^=1<<l:a^=1<<l-32}128&n?n=n<<1^113:n<<=1}C[o]=h.create(a,s)}}();var O=[];!function(){for(var e=0;e<25;e++)O[e]=h.create()}();var n=i.SHA3=r.extend({cfg:r.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new h.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var i=this._state,r=this.blockSize/2,n=0;n<r;n++){var o=e[t+2*n],a=e[t+2*n+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(T=i[n]).high^=a,T.low^=o}for(var s=0;s<24;s++){for(var c=0;c<5;c++){for(var l=0,h=0,u=0;u<5;u++){l^=(T=i[c+5*u]).high,h^=T.low}var p=O[c];p.high=l,p.low=h}for(c=0;c<5;c++){var d=O[(c+4)%5],f=O[(c+1)%5],m=f.high,g=f.low;for(l=d.high^(m<<1|g>>>31),h=d.low^(g<<1|m>>>31),u=0;u<5;u++){(T=i[c+5*u]).high^=l,T.low^=h}}for(var v=1;v<25;v++){var y=(T=i[v]).high,_=T.low,x=L[v];if(x<32)l=y<<x|_>>>32-x,h=_<<x|y>>>32-x;else l=_<<x-32|y>>>64-x,h=y<<x-32|_>>>64-x;var b=O[P[v]];b.high=l,b.low=h}var w=O[0],M=i[0];w.high=M.high,w.low=M.low;for(c=0;c<5;c++)for(u=0;u<5;u++){var T=i[v=c+5*u],E=O[v],S=O[(c+1)%5+5*u],A=O[(c+2)%5+5*u];T.high=E.high^~S.high&A.high,T.low=E.low^~S.low&A.low}T=i[0];var R=C[s];T.high^=R.high,T.low^=R.low}},_doFinalize:function(){var e=this._data,t=e.words,i=(this._nDataBytes,8*e.sigBytes),r=32*this.blockSize;t[i>>>5]|=1<<24-i%32,t[(p.ceil((i+1)/r)*r>>>5)-1]|=128,e.sigBytes=4*t.length,this._process();for(var n=this._state,o=this.cfg.outputLength/8,a=o/8,s=[],c=0;c<a;c++){var l=n[c],h=l.high,u=l.low;h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),u=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),s.push(u),s.push(h)}return new d.init(s,o)},clone:function(){for(var e=r.clone.call(this),t=e._state=this._state.slice(0),i=0;i<25;i++)t[i]=t[i].clone();return e}});e.SHA3=r._createHelper(n),e.HmacSHA3=r._createHmacHelper(n)}(Math),o.SHA3},"object"==typeof i?t.exports=i=n(e("./core"),e("./x64-core")):"function"==typeof define&&define.amd?define(["./core","./x64-core"],n):n(r.CryptoJS)},{"./core":129,"./x64-core":160}],157:[function(e,t,i){var r,n;r=this,n=function(e){var t,i,r,n,o,a,s;return i=(t=e).x64,r=i.Word,n=i.WordArray,o=t.algo,a=o.SHA512,s=o.SHA384=a.extend({_doReset:function(){this._hash=new n.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=16,e}}),t.SHA384=a._createHelper(s),t.HmacSHA384=a._createHmacHelper(s),e.SHA384},"object"==typeof i?t.exports=i=n(e("./core"),e("./x64-core"),e("./sha512")):"function"==typeof define&&define.amd?define(["./core","./x64-core","./sha512"],n):n(r.CryptoJS)},{"./core":129,"./sha512":158,"./x64-core":160}],158:[function(e,t,i){var r,n;r=this,n=function(c){return function(){var e=c,t=e.lib.Hasher,i=e.x64,r=i.Word,n=i.WordArray,o=e.algo;function a(){return r.create.apply(r,arguments)}var Me=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],Te=[];!function(){for(var e=0;e<80;e++)Te[e]=a()}();var s=o.SHA512=t.extend({_doReset:function(){this._hash=new n.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var i=this._hash.words,r=i[0],n=i[1],o=i[2],a=i[3],s=i[4],c=i[5],l=i[6],h=i[7],u=r.high,p=r.low,d=n.high,f=n.low,m=o.high,g=o.low,v=a.high,y=a.low,_=s.high,x=s.low,b=c.high,w=c.low,M=l.high,T=l.low,E=h.high,S=h.low,A=u,R=p,L=d,P=f,C=m,O=g,I=v,D=y,B=_,N=x,U=b,k=w,F=M,z=T,j=E,H=S,G=0;G<80;G++){var V=Te[G];if(G<16)var W=V.high=0|e[t+2*G],X=V.low=0|e[t+2*G+1];else{var q=Te[G-15],Y=q.high,J=q.low,Z=(Y>>>1|J<<31)^(Y>>>8|J<<24)^Y>>>7,K=(J>>>1|Y<<31)^(J>>>8|Y<<24)^(J>>>7|Y<<25),Q=Te[G-2],$=Q.high,ee=Q.low,te=($>>>19|ee<<13)^($<<3|ee>>>29)^$>>>6,ie=(ee>>>19|$<<13)^(ee<<3|$>>>29)^(ee>>>6|$<<26),re=Te[G-7],ne=re.high,oe=re.low,ae=Te[G-16],se=ae.high,ce=ae.low;W=(W=(W=Z+ne+((X=K+oe)>>>0<K>>>0?1:0))+te+((X=X+ie)>>>0<ie>>>0?1:0))+se+((X=X+ce)>>>0<ce>>>0?1:0);V.high=W,V.low=X}var le,he=B&U^~B&F,ue=N&k^~N&z,pe=A&L^A&C^L&C,de=R&P^R&O^P&O,fe=(A>>>28|R<<4)^(A<<30|R>>>2)^(A<<25|R>>>7),me=(R>>>28|A<<4)^(R<<30|A>>>2)^(R<<25|A>>>7),ge=(B>>>14|N<<18)^(B>>>18|N<<14)^(B<<23|N>>>9),ve=(N>>>14|B<<18)^(N>>>18|B<<14)^(N<<23|B>>>9),ye=Me[G],_e=ye.high,xe=ye.low,be=j+ge+((le=H+ve)>>>0<H>>>0?1:0),we=me+de;j=F,H=z,F=U,z=k,U=B,k=N,B=I+(be=(be=(be=be+he+((le=le+ue)>>>0<ue>>>0?1:0))+_e+((le=le+xe)>>>0<xe>>>0?1:0))+W+((le=le+X)>>>0<X>>>0?1:0))+((N=D+le|0)>>>0<D>>>0?1:0)|0,I=C,D=O,C=L,O=P,L=A,P=R,A=be+(fe+pe+(we>>>0<me>>>0?1:0))+((R=le+we|0)>>>0<le>>>0?1:0)|0}p=r.low=p+R,r.high=u+A+(p>>>0<R>>>0?1:0),f=n.low=f+P,n.high=d+L+(f>>>0<P>>>0?1:0),g=o.low=g+O,o.high=m+C+(g>>>0<O>>>0?1:0),y=a.low=y+D,a.high=v+I+(y>>>0<D>>>0?1:0),x=s.low=x+N,s.high=_+B+(x>>>0<N>>>0?1:0),w=c.low=w+k,c.high=b+U+(w>>>0<k>>>0?1:0),T=l.low=T+z,l.high=M+F+(T>>>0<z>>>0?1:0),S=h.low=S+H,h.high=E+j+(S>>>0<H>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(i/4294967296),t[31+(r+128>>>10<<5)]=i,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(s),e.HmacSHA512=t._createHmacHelper(s)}(),c.SHA512},"object"==typeof i?t.exports=i=n(e("./core"),e("./x64-core")):"function"==typeof define&&define.amd?define(["./core","./x64-core"],n):n(r.CryptoJS)},{"./core":129,"./x64-core":160}],159:[function(e,t,i){var r,n;r=this,n=function(s){return function(){var e=s,t=e.lib,i=t.WordArray,r=t.BlockCipher,n=e.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],h=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],p=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],o=n.DES=r.extend({_doReset:function(){for(var e=this._key.words,t=[],i=0;i<56;i++){var r=l[i]-1;t[i]=e[r>>>5]>>>31-r%32&1}for(var n=this._subKeys=[],o=0;o<16;o++){var a=n[o]=[],s=u[o];for(i=0;i<24;i++)a[i/6|0]|=t[(h[i]-1+s)%28]<<31-i%6,a[4+(i/6|0)]|=t[28+(h[i+24]-1+s)%28]<<31-i%6;a[0]=a[0]<<1|a[0]>>>31;for(i=1;i<7;i++)a[i]=a[i]>>>4*(i-1)+3;a[7]=a[7]<<5|a[7]>>>27}var c=this._invSubKeys=[];for(i=0;i<16;i++)c[i]=n[15-i]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,i){this._lBlock=e[t],this._rBlock=e[t+1],f.call(this,4,252645135),f.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),f.call(this,1,1431655765);for(var r=0;r<16;r++){for(var n=i[r],o=this._lBlock,a=this._rBlock,s=0,c=0;c<8;c++)s|=p[c][((a^n[c])&d[c])>>>0];this._lBlock=a,this._rBlock=o^s}var l=this._lBlock;this._lBlock=this._rBlock,this._rBlock=l,f.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),f.call(this,16,65535),f.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function f(e,t){var i=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=i,this._lBlock^=i<<e}function m(e,t){var i=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=i,this._rBlock^=i<<e}e.DES=r._createHelper(o);var a=n.TripleDES=r.extend({_doReset:function(){var e=this._key.words;this._des1=o.createEncryptor(i.create(e.slice(0,2))),this._des2=o.createEncryptor(i.create(e.slice(2,4))),this._des3=o.createEncryptor(i.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=r._createHelper(a)}(),s.TripleDES},"object"==typeof i?t.exports=i=n(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof define&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],n):n(r.CryptoJS)},{"./cipher-core":128,"./core":129,"./enc-base64":130,"./evpkdf":132,"./md5":137}],160:[function(e,t,i){var r,n;r=this,n=function(e){var t,i,n,o,r;return i=(t=e).lib,n=i.Base,o=i.WordArray,(r=t.x64={}).Word=n.extend({init:function(e,t){this.high=e,this.low=t}}),r.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,i=[],r=0;r<t;r++){var n=e[r];i.push(n.high),i.push(n.low)}return o.create(i,this.sigBytes)},clone:function(){for(var e=n.clone.call(this),t=e.words=this.words.slice(0),i=t.length,r=0;r<i;r++)t[r]=t[r].clone();return e}}),e},"object"==typeof i?t.exports=i=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(r.CryptoJS)},{"./core":129}],161:[function(e,t,i){var r=function(){return this}()||Function("return this")(),n=r.regeneratorRuntime&&0<=Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime"),o=n&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=e("./runtime"),n)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},{"./runtime":162}],162:[function(e,O,t){!function(e){"use strict";var c,t=Object.prototype,l=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},n=i.iterator||"@@iterator",r=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag",a="object"==typeof O,s=e.regeneratorRuntime;if(s)a&&(O.exports=s);else{(s=e.regeneratorRuntime=a?O.exports:{}).wrap=_;var u="suspendedStart",p="suspendedYield",d="executing",f="completed",m={},h={};h[n]=function(){return this};var g=Object.getPrototypeOf,v=g&&g(g(P([])));v&&v!==t&&l.call(v,n)&&(h=v);var y=M.prototype=b.prototype=Object.create(h);w.prototype=y.constructor=M,M.constructor=w,M[o]=w.displayName="GeneratorFunction",s.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,M):(e.__proto__=M,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(y),e},s.awrap=function(e){return{__await:e}},T(E.prototype),E.prototype[r]=function(){return this},s.AsyncIterator=E,s.async=function(e,t,i,r){var n=new E(_(e,t,i,r));return s.isGeneratorFunction(t)?n:n.next().then(function(e){return e.done?e.value:n.next()})},T(y),y[o]="Generator",y[n]=function(){return this},y.toString=function(){return"[object Generator]"},s.keys=function(i){var r=[];for(var e in i)r.push(e);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in i)return e.value=t,e.done=!1,e}return e.done=!0,e}},s.values=P,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=c,this.done=!1,this.delegate=null,this.method="next",this.arg=c,this.tryEntries.forEach(R),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=c)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(i){if(this.done)throw i;var r=this;function e(e,t){return o.type="throw",o.arg=i,r.next=e,t&&(r.method="next",r.arg=c),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t],o=n.completion;if("root"===n.tryLoc)return e("end");if(n.tryLoc<=this.prev){var a=l.call(n,"catchLoc"),s=l.call(n,"finallyLoc");if(a&&s){if(this.prev<n.catchLoc)return e(n.catchLoc,!0);if(this.prev<n.finallyLoc)return e(n.finallyLoc)}else if(a){if(this.prev<n.catchLoc)return e(n.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return e(n.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;0<=i;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&l.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var n=r;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=e,o.arg=t,n?(this.method="next",this.next=n.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),R(i),m}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var r=i.completion;if("throw"===r.type){var n=r.arg;R(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:P(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=c),m}}}function _(e,t,i,r){var o,a,s,c,n=t&&t.prototype instanceof b?t:b,l=Object.create(n.prototype),h=new L(r||[]);return l._invoke=(o=e,a=i,s=h,c=u,function(e,t){if(c===d)throw new Error("Generator is already running");if(c===f){if("throw"===e)throw t;return C()}for(s.method=e,s.arg=t;;){var i=s.delegate;if(i){var r=S(i,s);if(r){if(r===m)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(c===u)throw c=f,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);c=d;var n=x(o,a,s);if("normal"===n.type){if(c=s.done?f:p,n.arg===m)continue;return{value:n.arg,done:s.done}}"throw"===n.type&&(c=f,s.method="throw",s.arg=n.arg)}}),l}function x(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}function b(){}function w(){}function M(){}function T(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function E(c){var t;this._invoke=function(i,r){function e(){return new Promise(function(e,t){!function t(e,i,r,n){var o=x(c[e],c,i);if("throw"!==o.type){var a=o.arg,s=a.value;return s&&"object"==typeof s&&l.call(s,"__await")?Promise.resolve(s.__await).then(function(e){t("next",e,r,n)},function(e){t("throw",e,r,n)}):Promise.resolve(s).then(function(e){a.value=e,r(a)},n)}n(o.arg)}(i,r,e,t)})}return t=t?t.then(e,e):e()}}function S(e,t){var i=e.iterator[t.method];if(i===c){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=c,S(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=x(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var n=r.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=c),t.delegate=null,m):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function P(t){if(t){var e=t[n];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,r=function e(){for(;++i<t.length;)if(l.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=c,e.done=!0,e};return r.next=r}}return{next:C}}function C(){return{value:c,done:!0}}}(function(){return this}()||Function("return this")())},{}],163:[function(e,t,i){var X=e("three"),r=function(){function e(e){this.manager=void 0!==e?e:X.DefaultLoadingManager,this.dracoLoader=null}function r(){var i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}e.prototype={constructor:e,crossOrigin:"anonymous",load:function(t,i,e,r){var n,o=this;n=void 0!==this.resourcePath?this.resourcePath:void 0!==this.path?this.path:X.LoaderUtils.extractUrlBase(t),o.manager.itemStart(t);var a=function(e){r?r(e):console.error(e),o.manager.itemError(t),o.manager.itemEnd(t)},s=new X.FileLoader(o.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.load(t,function(e){try{o.parse(e,n,function(e){i(e),o.manager.itemEnd(t)},a)}catch(e){a(e)}},e,a)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setDRACOLoader:function(e){return this.dracoLoader=e,this},parse:function(e,t,i,r){var n,o={};if("string"==typeof e)n=e;else if(X.LoaderUtils.decodeText(new Uint8Array(e,0,4))===d){try{o[f.KHR_BINARY_GLTF]=new m(e)}catch(e){return void(r&&r(e))}n=o[f.KHR_BINARY_GLTF].content}else n=X.LoaderUtils.decodeText(new Uint8Array(e));var a=JSON.parse(n);if(void 0===a.asset||a.asset.version[0]<2)r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead."));else{if(a.extensionsUsed)for(var s=0;s<a.extensionsUsed.length;++s){var c=a.extensionsUsed[s],l=a.extensionsRequired||[];switch(c){case f.KHR_LIGHTS_PUNCTUAL:o[c]=new u(a);break;case f.KHR_MATERIALS_UNLIT:o[c]=new p(a);break;case f.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[c]=new y(a);break;case f.KHR_DRACO_MESH_COMPRESSION:o[c]=new g(a,this.dracoLoader);break;case f.MSFT_TEXTURE_DDS:o[f.MSFT_TEXTURE_DDS]=new h;break;case f.KHR_TEXTURE_TRANSFORM:o[f.KHR_TEXTURE_TRANSFORM]=new v(a);break;default:0<=l.indexOf(c)&&console.warn('THREE.GLTFLoader: Unknown extension "'+c+'".')}}new V(a,o,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager}).parse(i,r)}}};var f={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function h(){if(!X.DDSLoader)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing THREE.DDSLoader");this.name=f.MSFT_TEXTURE_DDS,this.ddsLoader=new X.DDSLoader}function u(e){this.name=f.KHR_LIGHTS_PUNCTUAL;var t=e.extensions&&e.extensions[f.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=t.lights||[]}function p(){this.name=f.KHR_MATERIALS_UNLIT}u.prototype.loadLight=function(e){var t,i=this.lightDefs[e],r=new X.Color(16777215);void 0!==i.color&&r.fromArray(i.color);var n=void 0!==i.range?i.range:0;switch(i.type){case"directional":(t=new X.DirectionalLight(r)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new X.PointLight(r)).distance=n;break;case"spot":(t=new X.SpotLight(r)).distance=n,i.spot=i.spot||{},i.spot.innerConeAngle=void 0!==i.spot.innerConeAngle?i.spot.innerConeAngle:0,i.spot.outerConeAngle=void 0!==i.spot.outerConeAngle?i.spot.outerConeAngle:Math.PI/4,t.angle=i.spot.outerConeAngle,t.penumbra=1-i.spot.innerConeAngle/i.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+i.type+'".')}return t.position.set(0,0,0),t.decay=2,void 0!==i.intensity&&(t.intensity=i.intensity),t.name=i.name||"light_"+e,Promise.resolve(t)},p.prototype.getMaterialType=function(){return X.MeshBasicMaterial},p.prototype.extendParams=function(e,t,i){var r=[];e.color=new X.Color(1,1,1),e.opacity=1;var n=t.pbrMetallicRoughness;if(n){if(Array.isArray(n.baseColorFactor)){var o=n.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==n.baseColorTexture&&r.push(i.assignTexture(e,"map",n.baseColorTexture))}return Promise.all(r)};var d="glTF",c=12,l={JSON:1313821514,BIN:5130562};function m(e){this.name=f.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,c);if(this.header={magic:X.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==d)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");for(var i=new DataView(e,c),r=0;r<i.byteLength;){var n=i.getUint32(r,!0);r+=4;var o=i.getUint32(r,!0);if(r+=4,o===l.JSON){var a=new Uint8Array(e,c+r,n);this.content=X.LoaderUtils.decodeText(a)}else if(o===l.BIN){var s=c+r;this.body=e.slice(s,s+n)}r+=n}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function g(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=f.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t}function v(){this.name=f.KHR_TEXTURE_TRANSFORM}function y(){return{name:f.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return X.ShaderMaterial},extendParams:function(e,t,i){var r=t.extensions[this.name],n=X.ShaderLib.standard,o=X.UniformsUtils.clone(n.uniforms),a=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),s=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),c=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),l=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),h=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),u=n.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",a).replace("#include <metalnessmap_pars_fragment>",s).replace("#include <roughnessmap_fragment>",c).replace("#include <metalnessmap_fragment>",l).replace("#include <lights_physical_fragment>",h);delete o.roughness,delete o.metalness,delete o.roughnessMap,delete o.metalnessMap,o.specular={value:(new X.Color).setHex(1118481)},o.glossiness={value:.5},o.specularMap={value:null},o.glossinessMap={value:null},e.vertexShader=n.vertexShader,e.fragmentShader=u,e.uniforms=o,e.defines={STANDARD:""},e.color=new X.Color(1,1,1),e.opacity=1;var p=[];if(Array.isArray(r.diffuseFactor)){var d=r.diffuseFactor;e.color.fromArray(d),e.opacity=d[3]}if(void 0!==r.diffuseTexture&&p.push(i.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new X.Color(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new X.Color(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var f=r.specularGlossinessTexture;p.push(i.assignTexture(e,"glossinessMap",f)),p.push(i.assignTexture(e,"specularMap",f))}return Promise.all(p)},createMaterial:function(e){var t=new X.ShaderMaterial({defines:e.defines,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,fog:!0,lights:!0,opacity:e.opacity,transparent:e.transparent});return t.isGLTFSpecularGlossinessMaterial=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t.extensions.derivatives=!0,t},cloneMaterial:function(e){var t=e.clone();t.isGLTFSpecularGlossinessMaterial=!0;for(var i=this.specularGlossinessParams,r=0,n=i.length;r<n;r++){var o=e[i[r]];t[i[r]]=o&&o.isColor?o.clone():o}return t},refreshUniforms:function(e,t,i,r,n,o){if(!0===n.isGLTFSpecularGlossinessMaterial){var a,s=n.uniforms,c=n.defines;s.opacity.value=n.opacity,s.diffuse.value.copy(n.color),s.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),s.map.value=n.map,s.specularMap.value=n.specularMap,s.alphaMap.value=n.alphaMap,s.lightMap.value=n.lightMap,s.lightMapIntensity.value=n.lightMapIntensity,s.aoMap.value=n.aoMap,s.aoMapIntensity.value=n.aoMapIntensity,n.map?a=n.map:n.specularMap?a=n.specularMap:n.displacementMap?a=n.displacementMap:n.normalMap?a=n.normalMap:n.bumpMap?a=n.bumpMap:n.glossinessMap?a=n.glossinessMap:n.alphaMap?a=n.alphaMap:n.emissiveMap&&(a=n.emissiveMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),s.uvTransform.value.copy(a.matrix)),n.envMap&&(s.envMap.value=n.envMap,s.envMapIntensity.value=n.envMapIntensity,s.flipEnvMap.value=n.envMap.isCubeTexture?-1:1,s.reflectivity.value=n.reflectivity,s.refractionRatio.value=n.refractionRatio,s.maxMipLevel.value=e.properties.get(n.envMap).__maxMipLevel),s.specular.value.copy(n.specular),s.glossiness.value=n.glossiness,s.glossinessMap.value=n.glossinessMap,s.emissiveMap.value=n.emissiveMap,s.bumpMap.value=n.bumpMap,s.normalMap.value=n.normalMap,s.displacementMap.value=n.displacementMap,s.displacementScale.value=n.displacementScale,s.displacementBias.value=n.displacementBias,null!==s.glossinessMap.value&&void 0===c.USE_GLOSSINESSMAP&&(c.USE_GLOSSINESSMAP="",c.USE_ROUGHNESSMAP=""),null===s.glossinessMap.value&&void 0!==c.USE_GLOSSINESSMAP&&(delete c.USE_GLOSSINESSMAP,delete c.USE_ROUGHNESSMAP)}}}}function T(e,t,i,r){X.Interpolant.call(this,e,t,i,r)}g.prototype.decodePrimitive=function(e,t){var i=this.json,r=this.dracoLoader,n=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},c={};for(var l in o){var h=C[l]||l.toLowerCase();a[h]=o[l]}for(l in e.attributes){h=C[l]||l.toLowerCase();if(void 0!==o[l]){var u=i.accessors[e.attributes[l]],p=A[u.componentType];c[h]=p,s[h]=!0===u.normalized}}return t.getDependency("bufferView",n).then(function(e){return new Promise(function(n){r.decodeDracoFile(e,function(e){for(var t in e.attributes){var i=e.attributes[t],r=s[t];void 0!==r&&(i.normalized=r)}n(e)},a,c)})})},v.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},((T.prototype=Object.create(X.Interpolant.prototype)).constructor=T).prototype.beforeStart_=T.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,n=e*r*3+r,o=0;o!==r;o++)t[o]=i[n+o];return t},T.prototype.afterEnd_=T.prototype.copySampleValue_,T.prototype.interpolate_=function(e,t,i,r){for(var n=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,c=3*a,l=r-t,h=(i-t)/l,u=h*h,p=u*h,d=e*c,f=d-c,m=-2*p+3*u,g=p-u,v=1-m,y=g-u+h,_=0;_!==a;_++){var x=o[f+_+a],b=o[f+_+s]*l,w=o[d+_+a],M=o[d+_]*l;n[_]=v*x+y*b+m*w+g*M}return n};var o,_=0,x=1,b=2,w=3,M=4,E=5,S=6,A=(Number,X.Matrix3,X.Matrix4,X.Vector2,X.Vector3,X.Vector4,X.Texture,{5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array}),R={9728:X.NearestFilter,9729:X.LinearFilter,9984:X.NearestMipMapNearestFilter,9985:X.LinearMipMapNearestFilter,9986:X.NearestMipMapLinearFilter,9987:X.LinearMipMapLinearFilter},L={33071:X.ClampToEdgeWrapping,33648:X.MirroredRepeatWrapping,10497:X.RepeatWrapping},P=(X.BackSide,X.FrontSide,X.NeverDepth,X.LessDepth,X.EqualDepth,X.LessEqualDepth,X.GreaterEqualDepth,X.NotEqualDepth,X.GreaterEqualDepth,X.AlwaysDepth,X.AddEquation,X.SubtractEquation,X.ReverseSubtractEquation,X.ZeroFactor,X.OneFactor,X.SrcColorFactor,X.OneMinusSrcColorFactor,X.SrcAlphaFactor,X.OneMinusSrcAlphaFactor,X.DstAlphaFactor,X.OneMinusDstAlphaFactor,X.DstColorFactor,X.OneMinusDstColorFactor,X.SrcAlphaSaturateFactor,{SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16}),C={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},O={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},I={CUBICSPLINE:void 0,LINEAR:X.InterpolateLinear,STEP:X.InterpolateDiscrete},D="OPAQUE",B="MASK",N="BLEND",U={"image/png":X.RGBAFormat,"image/jpeg":X.RGBFormat};function k(e,t){return"string"!=typeof e||""===e?"":/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:t+e}function F(e,t,i){for(var r in i.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=i.extensions[r])}function z(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function j(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var i=0,r=t.weights.length;i<r;i++)e.morphTargetInfluences[i]=t.weights[i];if(t.extras&&Array.isArray(t.extras.targetNames)){var n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(i=0,r=n.length;i<r;i++)e.morphTargetDictionary[n[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function H(e){for(var t="",i=Object.keys(e).sort(),r=0,n=i.length;r<n;r++)t+=i[r]+":"+e[i[r]]+";";return t}function G(e){if(e.isInterleavedBufferAttribute){for(var t=e.count,i=e.itemSize,r=e.array.slice(0,t*i),n=0,o=0;n<t;++n)r[o++]=e.getX(n),2<=i&&(r[o++]=e.getY(n)),3<=i&&(r[o++]=e.getZ(n)),4<=i&&(r[o++]=e.getW(n));return new X.BufferAttribute(r,i,e.normalized)}return e.clone()}function V(e,t,i){this.json=e||{},this.extensions=t||{},this.options=i||{},this.cache=new r,this.primitiveCache={},this.textureLoader=new X.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new X.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer")}function W(i,e,r){var t=e.attributes,n=[];function o(e,t){return r.getDependency("accessor",e).then(function(e){i.addAttribute(t,e)})}for(var a in t){var s=C[a]||a.toLowerCase();s in i.attributes||n.push(o(t[a],s))}if(void 0!==e.indices&&!i.index){var c=r.getDependency("accessor",e.indices).then(function(e){i.setIndex(e)});n.push(c)}return z(i,e),Promise.all(n).then(function(){return void 0!==e.targets?function(d,f,e){for(var m=!1,g=!1,t=0,i=f.length;t<i&&(void 0!==(o=f[t]).POSITION&&(m=!0),void 0!==o.NORMAL&&(g=!0),!m||!g);t++);if(!m&&!g)return Promise.resolve(d);var r=[],n=[];for(t=0,i=f.length;t<i;t++){var o=f[t];if(m){var a=void 0!==o.POSITION?e.getDependency("accessor",o.POSITION):d.attributes.position;r.push(a)}g&&(a=void 0!==o.NORMAL?e.getDependency("accessor",o.NORMAL):d.attributes.normal,n.push(a))}return Promise.all([Promise.all(r),Promise.all(n)]).then(function(e){for(var t=e[0],i=e[1],r=0,n=t.length;r<n;r++)d.attributes.position!==t[r]&&(t[r]=G(t[r]));for(r=0,n=i.length;r<n;r++)d.attributes.normal!==i[r]&&(i[r]=G(i[r]));for(r=0,n=f.length;r<n;r++){var o=f[r],a="morphTarget"+r;if(m&&void 0!==o.POSITION){var s=t[r];s.name=a;for(var c=d.attributes.position,l=0,h=s.count;l<h;l++)s.setXYZ(l,s.getX(l)+c.getX(l),s.getY(l)+c.getY(l),s.getZ(l)+c.getZ(l))}if(g&&void 0!==o.NORMAL){var u=i[r];u.name=a;var p=d.attributes.normal;for(l=0,h=u.count;l<h;l++)u.setXYZ(l,u.getX(l)+p.getX(l),u.getY(l)+p.getY(l),u.getZ(l)+p.getZ(l))}}return m&&(d.morphAttributes.position=t),g&&(d.morphAttributes.normal=i),d})}(i,e.targets,r):i})}return V.prototype.parse=function(i,e){var r=this,n=this.json,o=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(e){var t={scene:e[0][n.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:n.asset,parser:r,userData:{}};F(o,t,n),i(t)}).catch(e)},V.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[],r={},n={},o=0,a=t.length;o<a;o++)for(var s=t[o].joints,c=0,l=s.length;c<l;c++)e[s[c]].isBone=!0;for(var h=0,u=e.length;h<u;h++){var p=e[h];void 0!==p.mesh&&(void 0===r[p.mesh]&&(r[p.mesh]=n[p.mesh]=0),r[p.mesh]++,void 0!==p.skin&&(i[p.mesh].isSkinnedMesh=!0))}this.json.meshReferences=r,this.json.meshUses=n},V.prototype.getDependency=function(e,t){var i=e+":"+t,r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this.loadMesh(t);break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this.loadBufferView(t);break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this.loadMaterial(t);break;case"texture":r=this.loadTexture(t);break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;case"light":r=this.extensions[f.KHR_LIGHTS_PUNCTUAL].loadLight(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r},V.prototype.getDependencies=function(i){var e=this.cache.get(i);if(!e){var r=this,t=this.json[i+("mesh"===i?"es":"s")]||[];e=Promise.all(t.map(function(e,t){return r.getDependency(i,t)})),this.cache.add(i,e)}return e},V.prototype.loadBuffer=function(e){var i=this.json.buffers[e],r=this.fileLoader;if(i.type&&"arraybuffer"!==i.type)throw new Error("THREE.GLTFLoader: "+i.type+" buffer type is not supported.");if(void 0===i.uri&&0===e)return Promise.resolve(this.extensions[f.KHR_BINARY_GLTF].body);var n=this.options;return new Promise(function(e,t){r.load(k(i.uri,n.path),e,void 0,function(){t(new Error('THREE.GLTFLoader: Failed to load buffer "'+i.uri+'".'))})})},V.prototype.loadBufferView=function(e){var r=this.json.bufferViews[e];return this.getDependency("buffer",r.buffer).then(function(e){var t=r.byteLength||0,i=r.byteOffset||0;return e.slice(i,i+t)})},V.prototype.loadAccessor=function(e){var w=this,M=this.json,T=this.json.accessors[e];if(void 0===T.bufferView&&void 0===T.sparse)return Promise.resolve(null);var t=[];return void 0!==T.bufferView?t.push(this.getDependency("bufferView",T.bufferView)):t.push(null),void 0!==T.sparse&&(t.push(this.getDependency("bufferView",T.sparse.indices.bufferView)),t.push(this.getDependency("bufferView",T.sparse.values.bufferView))),Promise.all(t).then(function(e){var t,i,r=e[0],n=P[T.type],o=A[T.componentType],a=o.BYTES_PER_ELEMENT,s=a*n,c=T.byteOffset||0,l=void 0!==T.bufferView?M.bufferViews[T.bufferView].byteStride:void 0,h=!0===T.normalized;if(l&&l!==s){var u="InterleavedBuffer:"+T.bufferView+":"+T.componentType,p=w.cache.get(u);p||(t=new o(r),p=new X.InterleavedBuffer(t,l/a),w.cache.add(u,p)),i=new X.InterleavedBufferAttribute(p,n,c/a,h)}else t=null===r?new o(T.count*n):new o(r,c,T.count*n),i=new X.BufferAttribute(t,n,h);if(void 0!==T.sparse){var d=P.SCALAR,f=A[T.sparse.indices.componentType],m=T.sparse.indices.byteOffset||0,g=T.sparse.values.byteOffset||0,v=new f(e[1],m,T.sparse.count*d),y=new o(e[2],g,T.sparse.count*n);null!==r&&i.setArray(i.array.slice());for(var _=0,x=v.length;_<x;_++){var b=v[_];if(i.setX(b,y[_*n]),2<=n&&i.setY(b,y[_*n+1]),3<=n&&i.setZ(b,y[_*n+2]),4<=n&&i.setW(b,y[_*n+3]),5<=n)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return i})},V.prototype.loadTexture=function(e){var i,t=this,r=this.json,n=this.options,o=this.textureLoader,a=window.URL||window.webkitURL,s=r.textures[e],c=s.extensions||{},l=(i=c[f.MSFT_TEXTURE_DDS]?r.images[c[f.MSFT_TEXTURE_DDS].source]:r.images[s.source]).uri,h=!1;return void 0!==i.bufferView&&(l=t.getDependency("bufferView",i.bufferView).then(function(e){h=!0;var t=new Blob([e],{type:i.mimeType});return l=a.createObjectURL(t)})),Promise.resolve(l).then(function(i){var r=X.Loader.Handlers.get(i);return r||(r=c[f.MSFT_TEXTURE_DDS]?t.extensions[f.MSFT_TEXTURE_DDS].ddsLoader:o),new Promise(function(e,t){r.load(k(i,n.path),e,void 0,t)})}).then(function(e){!0===h&&a.revokeObjectURL(l),e.flipY=!1,void 0!==s.name&&(e.name=s.name),i.mimeType in U&&(e.format=U[i.mimeType]);var t=(r.samplers||{})[s.sampler]||{};return e.magFilter=R[t.magFilter]||X.LinearFilter,e.minFilter=R[t.minFilter]||X.LinearMipMapLinearFilter,e.wrapS=L[t.wrapS]||X.RepeatWrapping,e.wrapT=L[t.wrapT]||X.RepeatWrapping,e})},V.prototype.assignTexture=function(i,r,n){var o=this;return this.getDependency("texture",n.index).then(function(e){if(!e.isCompressedTexture)switch(r){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":e.format=X.RGBFormat}if(o.extensions[f.KHR_TEXTURE_TRANSFORM]){var t=void 0!==n.extensions?n.extensions[f.KHR_TEXTURE_TRANSFORM]:void 0;t&&(e=o.extensions[f.KHR_TEXTURE_TRANSFORM].extendTexture(e,t))}i[r]=e})},V.prototype.assignFinalMaterial=function(e){var t=e.geometry,i=e.material,r=this.extensions,n=void 0!==t.attributes.tangent,o=void 0!==t.attributes.color,a=void 0===t.attributes.normal,s=!0===e.isSkinnedMesh,c=0<Object.keys(t.morphAttributes).length,l=c&&void 0!==t.morphAttributes.normal;if(e.isPoints){var h="PointsMaterial:"+i.uuid,u=this.cache.get(h);u||(u=new X.PointsMaterial,X.Material.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,u.lights=!1,this.cache.add(h,u)),i=u}else if(e.isLine){h="LineBasicMaterial:"+i.uuid;var p=this.cache.get(h);p||(p=new X.LineBasicMaterial,X.Material.prototype.copy.call(p,i),p.color.copy(i.color),p.lights=!1,this.cache.add(h,p)),i=p}if(n||o||a||s||c){h="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(h+="specular-glossiness:"),s&&(h+="skinning:"),n&&(h+="vertex-tangents:"),o&&(h+="vertex-colors:"),a&&(h+="flat-shading:"),c&&(h+="morph-targets:"),l&&(h+="morph-normals:");var d=this.cache.get(h);d||(d=i.isGLTFSpecularGlossinessMaterial?r[f.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(i):i.clone(),s&&(d.skinning=!0),n&&(d.vertexTangents=!0),o&&(d.vertexColors=X.VertexColors),a&&(d.flatShading=!0),c&&(d.morphTargets=!0),l&&(d.morphNormals=!0),this.cache.add(h,d)),i=d}i.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),t.addAttribute("uv2",new X.BufferAttribute(t.attributes.uv.array,2))),i.isGLTFSpecularGlossinessMaterial&&(e.onBeforeRender=r[f.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms),e.material=i},V.prototype.loadMaterial=function(e){var t,i=this.json,r=this.extensions,n=i.materials[e],o={},a=n.extensions||{},s=[];if(a[f.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var c=r[f.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=c.getMaterialType(),s.push(c.extendParams(o,n,this))}else if(a[f.KHR_MATERIALS_UNLIT]){var l=r[f.KHR_MATERIALS_UNLIT];t=l.getMaterialType(),s.push(l.extendParams(o,n,this))}else{t=X.MeshStandardMaterial;var h=n.pbrMetallicRoughness||{};if(o.color=new X.Color(1,1,1),o.opacity=1,Array.isArray(h.baseColorFactor)){var u=h.baseColorFactor;o.color.fromArray(u),o.opacity=u[3]}void 0!==h.baseColorTexture&&s.push(this.assignTexture(o,"map",h.baseColorTexture)),o.metalness=void 0!==h.metallicFactor?h.metallicFactor:1,o.roughness=void 0!==h.roughnessFactor?h.roughnessFactor:1,void 0!==h.metallicRoughnessTexture&&(s.push(this.assignTexture(o,"metalnessMap",h.metallicRoughnessTexture)),s.push(this.assignTexture(o,"roughnessMap",h.metallicRoughnessTexture)))}!0===n.doubleSided&&(o.side=X.DoubleSide);var p=n.alphaMode||D;return p===N?o.transparent=!0:(o.transparent=!1,p===B&&(o.alphaTest=void 0!==n.alphaCutoff?n.alphaCutoff:.5)),void 0!==n.normalTexture&&t!==X.MeshBasicMaterial&&(s.push(this.assignTexture(o,"normalMap",n.normalTexture)),o.normalScale=new X.Vector2(1,1),void 0!==n.normalTexture.scale&&o.normalScale.set(n.normalTexture.scale,n.normalTexture.scale)),void 0!==n.occlusionTexture&&t!==X.MeshBasicMaterial&&(s.push(this.assignTexture(o,"aoMap",n.occlusionTexture)),void 0!==n.occlusionTexture.strength&&(o.aoMapIntensity=n.occlusionTexture.strength)),void 0!==n.emissiveFactor&&t!==X.MeshBasicMaterial&&(o.emissive=(new X.Color).fromArray(n.emissiveFactor)),void 0!==n.emissiveTexture&&t!==X.MeshBasicMaterial&&s.push(this.assignTexture(o,"emissiveMap",n.emissiveTexture)),Promise.all(s).then(function(){var e;return e=t===X.ShaderMaterial?r[f.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):new t(o),void 0!==n.name&&(e.name=n.name),e.map&&(e.map.encoding=X.sRGBEncoding),e.emissiveMap&&(e.emissiveMap.encoding=X.sRGBEncoding),e.specularMap&&(e.specularMap.encoding=X.sRGBEncoding),z(e,n),n.extensions&&F(r,e,n),e})},V.prototype.loadGeometries=function(e){var i=this,r=this.extensions,t=this.primitiveCache;function n(t){return r[f.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,i).then(function(e){return W(e,t,i)})}for(var o,a,s=[],c=0,l=e.length;c<l;c++){var h,u=e[c],p=(void 0,(a=(o=u).extensions&&o.extensions[f.KHR_DRACO_MESH_COMPRESSION])?"draco:"+a.bufferView+":"+a.indices+":"+H(a.attributes):o.indices+":"+H(o.attributes)+":"+o.mode),d=t[p];if(d)s.push(d.promise);else h=u.extensions&&u.extensions[f.KHR_DRACO_MESH_COMPRESSION]?n(u):W(new X.BufferGeometry,u,i),t[p]={primitive:u,promise:h},s.push(h)}return Promise.all(s)},V.prototype.loadMesh=function(h){for(var u=this,e=this.json,p=(this.extensions,e.meshes[h]),d=p.primitives,t=[],i=0,r=d.length;i<r;i++){var n=void 0===d[i].material?o=o||new X.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:X.FrontSide}):this.getDependency("material",d[i].material);t.push(n)}return Promise.all(t).then(function(l){return u.loadGeometries(d).then(function(e){for(var t=[],i=0,r=e.length;i<r;i++){var n,o=e[i],a=d[i],s=l[i];if(a.mode===M||a.mode===E||a.mode===S||void 0===a.mode)!0===(n=!0===p.isSkinnedMesh?new X.SkinnedMesh(o,s):new X.Mesh(o,s)).isSkinnedMesh&&n.normalizeSkinWeights(),a.mode===E?n.drawMode=X.TriangleStripDrawMode:a.mode===S&&(n.drawMode=X.TriangleFanDrawMode);else if(a.mode===x)n=new X.LineSegments(o,s);else if(a.mode===w)n=new X.Line(o,s);else if(a.mode===b)n=new X.LineLoop(o,s);else{if(a.mode!==_)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+a.mode);n=new X.Points(o,s)}0<Object.keys(n.geometry.morphAttributes).length&&j(n,p),n.name=p.name||"mesh_"+h,1<e.length&&(n.name+="_"+i),z(n,p),u.assignFinalMaterial(n),t.push(n)}if(1===t.length)return t[0];var c=new X.Group;for(i=0,r=t.length;i<r;i++)c.add(t[i]);return c})})},V.prototype.loadCamera=function(e){var t,i=this.json.cameras[e],r=i[i.type];if(r)return"perspective"===i.type?t=new X.PerspectiveCamera(X.Math.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===i.type&&(t=new X.OrthographicCamera(r.xmag/-2,r.xmag/2,r.ymag/2,r.ymag/-2,r.znear,r.zfar)),void 0!==i.name&&(t.name=i.name),z(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},V.prototype.loadSkin=function(e){var t=this.json.skins[e],i={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(i):this.getDependency("accessor",t.inverseBindMatrices).then(function(e){return i.inverseBindMatrices=e,i})},V.prototype.loadAnimation=function(w){for(var M=this.json.animations[w],e=[],t=[],i=[],r=[],n=[],o=0,a=M.channels.length;o<a;o++){var s=M.channels[o],c=M.samplers[s.sampler],l=s.target,h=void 0!==l.node?l.node:l.id,u=void 0!==M.parameters?M.parameters[c.input]:c.input,p=void 0!==M.parameters?M.parameters[c.output]:c.output;e.push(this.getDependency("node",h)),t.push(this.getDependency("accessor",u)),i.push(this.getDependency("accessor",p)),r.push(c),n.push(l)}return Promise.all([Promise.all(e),Promise.all(t),Promise.all(i),Promise.all(r),Promise.all(n)]).then(function(e){for(var t=e[0],i=e[1],r=e[2],n=e[3],o=e[4],a=[],s=0,c=t.length;s<c;s++){var l=t[s],h=i[s],u=r[s],p=n[s],d=o[s];if(void 0!==l){var f;switch(l.updateMatrix(),l.matrixAutoUpdate=!0,O[d.path]){case O.weights:f=X.NumberKeyframeTrack;break;case O.rotation:f=X.QuaternionKeyframeTrack;break;case O.position:case O.scale:default:f=X.VectorKeyframeTrack}var m=l.name?l.name:l.uuid,g=void 0!==p.interpolation?I[p.interpolation]:X.InterpolateLinear,v=[];O[d.path]===O.weights?l.traverse(function(e){!0===e.isMesh&&e.morphTargetInfluences&&v.push(e.name?e.name:e.uuid)}):v.push(m);for(var y=0,_=v.length;y<_;y++){var x=new f(v[y]+"."+O[d.path],h.array,u.array,g);"CUBICSPLINE"===p.interpolation&&(x.createInterpolant=function(e){return new T(this.times,this.values,this.getValueSize()/3,e)},x.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),a.push(x)}}}var b=void 0!==M.name?M.name:"animation_"+w;return new X.AnimationClip(b,void 0,a)})},V.prototype.loadNode=function(e){var t=this.json,i=this.extensions,r=this,o=t.meshReferences,a=t.meshUses,s=t.nodes[e];return(!0===s.isBone?Promise.resolve(new X.Bone):void 0!==s.mesh?r.getDependency("mesh",s.mesh).then(function(e){var t;if(1<o[s.mesh]){var i=a[s.mesh]++;(t=e.clone()).name+="_instance_"+i,t.onBeforeRender=e.onBeforeRender;for(var r=0,n=t.children.length;r<n;r++)t.children[r].name+="_instance_"+i,t.children[r].onBeforeRender=e.children[r].onBeforeRender}else t=e;return void 0!==s.weights&&t.traverse(function(e){if(e.isMesh)for(var t=0,i=s.weights.length;t<i;t++)e.morphTargetInfluences[t]=s.weights[t]}),t}):void 0!==s.camera?r.getDependency("camera",s.camera):s.extensions&&s.extensions[f.KHR_LIGHTS_PUNCTUAL]&&void 0!==s.extensions[f.KHR_LIGHTS_PUNCTUAL].light?r.getDependency("light",s.extensions[f.KHR_LIGHTS_PUNCTUAL].light):Promise.resolve(new X.Object3D)).then(function(e){if(void 0!==s.name&&(e.userData.name=s.name,e.name=X.PropertyBinding.sanitizeNodeName(s.name)),z(e,s),s.extensions&&F(i,e,s),void 0!==s.matrix){var t=new X.Matrix4;t.fromArray(s.matrix),e.applyMatrix(t)}else void 0!==s.translation&&e.position.fromArray(s.translation),void 0!==s.rotation&&e.quaternion.fromArray(s.rotation),void 0!==s.scale&&e.scale.fromArray(s.scale);return e})},V.prototype.loadScene=function(){function h(e,a,s,c){var l=s.nodes[e];return c.getDependency("node",e).then(function(u){return void 0===l.skin?u:c.getDependency("skin",l.skin).then(function(e){for(var t=[],i=0,r=(p=e).joints.length;i<r;i++)t.push(c.getDependency("node",p.joints[i]));return Promise.all(t)}).then(function(e){for(var t=!0===u.isGroup?u.children:[u],i=0,r=t.length;i<r;i++){for(var n=t[i],o=[],a=[],s=0,c=e.length;s<c;s++){var l=e[s];if(l){o.push(l);var h=new X.Matrix4;void 0!==p.inverseBindMatrices&&h.fromArray(p.inverseBindMatrices.array,16*s),a.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',p.joints[s])}n.bind(new X.Skeleton(o,a),n.matrixWorld)}return u});var p}).then(function(e){a.add(e);var t=[];if(l.children)for(var i=l.children,r=0,n=i.length;r<n;r++){var o=i[r];t.push(h(o,e,s,c))}return Promise.all(t)})}return function(e){var t=this.json,i=this.extensions,r=this.json.scenes[e],n=new X.Scene;void 0!==r.name&&(n.name=r.name),z(n,r),r.extensions&&F(i,n,r);for(var o=r.nodes||[],a=[],s=0,c=o.length;s<c;s++)a.push(h(o[s],n,t,this));return Promise.all(a).then(function(){return n})}}(),e}();t.exports=r},{three:164}],164:[function(e,t,i){var r,n;r=this,n=function(e){"use strict";function t(){}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:0<e?1:+e}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}),Object.assign(t.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var i=this._listeners[e];if(void 0!==i){var r=i.indexOf(t);-1!==r&&i.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var i=t.slice(0),r=0,n=i.length;r<n;r++)i[r].call(this,e)}}}});var i,r,h,u,n,o,a,s,c,l,p,d,f,m,g,v,y,_,x,b,w,M,V=0,W=1,X=2,U=1,k=2,B=0,Me=1,te=2,Te=0,T=2,q=0,Y=1,J=2,Z=3,K=4,Q=5,E=100,S=101,A=102,R=103,L=104,P=200,C=201,O=202,I=203,D=204,N=205,F=206,z=207,j=208,H=209,G=210,$=0,ee=1,ie=2,re=3,ne=4,oe=5,ae=6,se=7,ce=0,le=1,he=2,ue=0,Ee=1,pe=2,de=3,fe=4,me=301,ge=302,ve=303,ye=304,_e=305,xe=306,be=307,we=1e3,Se=1001,Ae=1002,Re=1003,Le=1004,Pe=1005,Ce=1006,Oe=1007,Ie=1008,De=1009,Be=1010,Ne=1011,Ue=1012,ke=1013,Fe=1014,ze=1015,je=1016,He=1017,Ge=1018,Ve=1019,We=1020,Xe=1021,qe=1022,Ye=1023,Je=1024,Ze=1025,Ke=Ye,Qe=1026,$e=1027,et=33776,tt=33777,it=33778,rt=33779,nt=35840,ot=35841,at=35842,st=35843,ct=36196,lt=37808,ht=37809,ut=37810,pt=37811,dt=37812,ft=37813,mt=37814,gt=37815,vt=37816,yt=37817,_t=37818,xt=37819,bt=37820,wt=37821,Mt=0,Tt=3e3,Et=3001,St=3007,At=3002,Rt=3004,Lt=3005,Pt=3006,Ct=3200,Ot=3201,It=0,Dt=1,Bt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var n=[],e=0;e<256;e++)n[e]=(e<16?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(n[255&e]+n[e>>8&255]+n[e>>16&255]+n[e>>24&255]+"-"+n[255&t]+n[t>>8&255]+"-"+n[t>>16&15|64]+n[t>>24&255]+"-"+n[63&i|128]+n[i>>8&255]+"-"+n[i>>16&255]+n[i>>24&255]+n[255&r]+n[r>>8&255]+n[r>>16&255]+n[r>>24&255]).toUpperCase()}}(),clamp:function(e,t,i){return Math.max(t,Math.min(i,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,i,r,n){return r+(e-t)*(n-r)/(i-t)},lerp:function(e,t,i){return(1-i)*e+i*t},smoothstep:function(e,t,i){return e<=t?0:i<=e?1:(e=(e-t)/(i-t))*e*(3-2*e)},smootherstep:function(e,t,i){return e<=t?0:i<=e?1:(e=(e-t)/(i-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Bt.DEG2RAD},radToDeg:function(e){return e*Bt.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function Nt(e,t){this.x=e||0,this.y=t||0}function Ut(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function kt(e,t,i,r){this._x=e||0,this._y=t||0,this._z=i||0,this._w=void 0!==r?r:1}function Ft(e,t,i){this.x=e||0,this.y=t||0,this.z=i||0}function zt(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(Nt.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(Nt.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:(i=new Nt,r=new Nt,function(e,t){return i.set(e,e),r.set(t,t),this.clamp(i,r)}),clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y;return t*t+i*i},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var i=Math.cos(t),r=Math.sin(t),n=this.x-e.x,o=this.y-e.y;return this.x=n*i-o*r+e.x,this.y=n*r+o*i+e.y,this}}),Object.assign(Ut.prototype,{isMatrix4:!0,set:function(e,t,i,r,n,o,a,s,c,l,h,u,p,d,f,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=n,g[5]=o,g[9]=a,g[13]=s,g[2]=c,g[6]=l,g[10]=h,g[14]=u,g[3]=p,g[7]=d,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Ut).fromArray(this.elements)},copy:function(e){var t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this},copyPosition:function(e){var t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this},extractBasis:function(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this},extractRotation:(p=new Ft,function(e){var t=this.elements,i=e.elements,r=1/p.setFromMatrixColumn(e,0).length(),n=1/p.setFromMatrixColumn(e,1).length(),o=1/p.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*n,t[5]=i[5]*n,t[6]=i[6]*n,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,i=e.x,r=e.y,n=e.z,o=Math.cos(i),a=Math.sin(i),s=Math.cos(r),c=Math.sin(r),l=Math.cos(n),h=Math.sin(n);if("XYZ"===e.order){var u=o*l,p=o*h,d=a*l,f=a*h;t[0]=s*l,t[4]=-s*h,t[8]=c,t[1]=p+d*c,t[5]=u-f*c,t[9]=-a*s,t[2]=f-u*c,t[6]=d+p*c,t[10]=o*s}else if("YXZ"===e.order){var m=s*l,g=s*h,v=c*l,y=c*h;t[0]=m+y*a,t[4]=v*a-g,t[8]=o*c,t[1]=o*h,t[5]=o*l,t[9]=-a,t[2]=g*a-v,t[6]=y+m*a,t[10]=o*s}else if("ZXY"===e.order){m=s*l,g=s*h,v=c*l,y=c*h;t[0]=m-y*a,t[4]=-o*h,t[8]=v+g*a,t[1]=g+v*a,t[5]=o*l,t[9]=y-m*a,t[2]=-o*c,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){u=o*l,p=o*h,d=a*l,f=a*h;t[0]=s*l,t[4]=d*c-p,t[8]=u*c+f,t[1]=s*h,t[5]=f*c+u,t[9]=p*c-d,t[2]=-c,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var _=o*s,x=o*c,b=a*s,w=a*c;t[0]=s*l,t[4]=w-_*h,t[8]=b*h+x,t[1]=h,t[5]=o*l,t[9]=-a*l,t[2]=-c*l,t[6]=x*h+b,t[10]=_-w*h}else if("XZY"===e.order){_=o*s,x=o*c,b=a*s,w=a*c;t[0]=s*l,t[4]=-h,t[8]=c*l,t[1]=_*h+w,t[5]=o*l,t[9]=x*h-b,t[2]=b*h-x,t[6]=a*l,t[10]=w*h+_}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:(c=new Ft(0,0,0),l=new Ft(1,1,1),function(e){return this.compose(c,e,l)}),lookAt:(o=new Ft,a=new Ft,s=new Ft,function(e,t,i){var r=this.elements;return s.subVectors(e,t),0===s.lengthSq()&&(s.z=1),s.normalize(),o.crossVectors(i,s),0===o.lengthSq()&&(1===Math.abs(i.z)?s.x+=1e-4:s.z+=1e-4,s.normalize(),o.crossVectors(i,s)),o.normalize(),a.crossVectors(s,o),r[0]=o.x,r[4]=a.x,r[8]=s.x,r[1]=o.y,r[5]=a.y,r[9]=s.y,r[2]=o.z,r[6]=a.z,r[10]=s.z,this}),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements,r=t.elements,n=this.elements,o=i[0],a=i[4],s=i[8],c=i[12],l=i[1],h=i[5],u=i[9],p=i[13],d=i[2],f=i[6],m=i[10],g=i[14],v=i[3],y=i[7],_=i[11],x=i[15],b=r[0],w=r[4],M=r[8],T=r[12],E=r[1],S=r[5],A=r[9],R=r[13],L=r[2],P=r[6],C=r[10],O=r[14],I=r[3],D=r[7],B=r[11],N=r[15];return n[0]=o*b+a*E+s*L+c*I,n[4]=o*w+a*S+s*P+c*D,n[8]=o*M+a*A+s*C+c*B,n[12]=o*T+a*R+s*O+c*N,n[1]=l*b+h*E+u*L+p*I,n[5]=l*w+h*S+u*P+p*D,n[9]=l*M+h*A+u*C+p*B,n[13]=l*T+h*R+u*O+p*N,n[2]=d*b+f*E+m*L+g*I,n[6]=d*w+f*S+m*P+g*D,n[10]=d*M+f*A+m*C+g*B,n[14]=d*T+f*R+m*O+g*N,n[3]=v*b+y*E+_*L+x*I,n[7]=v*w+y*S+_*P+x*D,n[11]=v*M+y*A+_*C+x*B,n[15]=v*T+y*R+_*O+x*N,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:(n=new Ft,function(e){for(var t=0,i=e.count;t<i;t++)n.x=e.getX(t),n.y=e.getY(t),n.z=e.getZ(t),n.applyMatrix4(this),e.setXYZ(t,n.x,n.y,n.z);return e}),determinant:function(){var e=this.elements,t=e[0],i=e[4],r=e[8],n=e[12],o=e[1],a=e[5],s=e[9],c=e[13],l=e[2],h=e[6],u=e[10],p=e[14];return e[3]*(+n*s*h-r*c*h-n*a*u+i*c*u+r*a*p-i*s*p)+e[7]*(+t*s*p-t*c*u+n*o*u-r*o*p+r*c*l-n*s*l)+e[11]*(+t*c*h-t*a*p-n*o*h+i*o*p+n*a*l-i*c*l)+e[15]*(-r*a*l-t*s*h+t*a*u+r*o*h-i*o*u+i*s*l)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var i=this.elements,r=e.elements,n=r[0],o=r[1],a=r[2],s=r[3],c=r[4],l=r[5],h=r[6],u=r[7],p=r[8],d=r[9],f=r[10],m=r[11],g=r[12],v=r[13],y=r[14],_=r[15],x=d*y*u-v*f*u+v*h*m-l*y*m-d*h*_+l*f*_,b=g*f*u-p*y*u-g*h*m+c*y*m+p*h*_-c*f*_,w=p*v*u-g*d*u+g*l*m-c*v*m-p*l*_+c*d*_,M=g*d*h-p*v*h-g*l*f+c*v*f+p*l*y-c*d*y,T=n*x+o*b+a*w+s*M;if(0===T){var E="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(E);return console.warn(E),this.identity()}var S=1/T;return i[0]=x*S,i[1]=(v*f*s-d*y*s-v*a*m+o*y*m+d*a*_-o*f*_)*S,i[2]=(l*y*s-v*h*s+v*a*u-o*y*u-l*a*_+o*h*_)*S,i[3]=(d*h*s-l*f*s-d*a*u+o*f*u+l*a*m-o*h*m)*S,i[4]=b*S,i[5]=(p*y*s-g*f*s+g*a*m-n*y*m-p*a*_+n*f*_)*S,i[6]=(g*h*s-c*y*s-g*a*u+n*y*u+c*a*_-n*h*_)*S,i[7]=(c*f*s-p*h*s+p*a*u-n*f*u-c*a*m+n*h*m)*S,i[8]=w*S,i[9]=(g*d*s-p*v*s-g*o*m+n*v*m+p*o*_-n*d*_)*S,i[10]=(c*v*s-g*l*s+g*o*u-n*v*u-c*o*_+n*l*_)*S,i[11]=(p*l*s-c*d*s-p*o*u+n*d*u+c*o*m-n*l*m)*S,i[12]=M*S,i[13]=(p*v*a-g*d*a+g*o*f-n*v*f-p*o*y+n*d*y)*S,i[14]=(g*l*a-c*v*a-g*o*h+n*v*h+c*o*y-n*l*y)*S,i[15]=(c*d*a-p*l*a+p*o*h-n*d*h-c*o*f+n*l*f)*S,this},scale:function(e){var t=this.elements,i=e.x,r=e.y,n=e.z;return t[0]*=i,t[4]*=r,t[8]*=n,t[1]*=i,t[5]*=r,t[9]*=n,t[2]*=i,t[6]*=r,t[10]*=n,t[3]*=i,t[7]*=r,t[11]*=n,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))},makeTranslation:function(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var i=Math.cos(t),r=Math.sin(t),n=1-i,o=e.x,a=e.y,s=e.z,c=n*o,l=n*a;return this.set(c*o+i,c*a-r*s,c*s+r*a,0,c*a+r*s,l*a+i,l*s-r*o,0,c*s-r*a,l*s+r*o,n*s*s+i,0,0,0,0,1),this},makeScale:function(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(e,t,i){return this.set(1,t,i,0,e,1,i,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,i){var r=this.elements,n=t._x,o=t._y,a=t._z,s=t._w,c=n+n,l=o+o,h=a+a,u=n*c,p=n*l,d=n*h,f=o*l,m=o*h,g=a*h,v=s*c,y=s*l,_=s*h,x=i.x,b=i.y,w=i.z;return r[0]=(1-(f+g))*x,r[1]=(p+_)*x,r[2]=(d-y)*x,r[3]=0,r[4]=(p-_)*b,r[5]=(1-(u+g))*b,r[6]=(m+v)*b,r[7]=0,r[8]=(d+y)*w,r[9]=(m-v)*w,r[10]=(1-(u+f))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:(h=new Ft,u=new Ut,function(e,t,i){var r=this.elements,n=h.set(r[0],r[1],r[2]).length(),o=h.set(r[4],r[5],r[6]).length(),a=h.set(r[8],r[9],r[10]).length();this.determinant()<0&&(n=-n),e.x=r[12],e.y=r[13],e.z=r[14],u.copy(this);var s=1/n,c=1/o,l=1/a;return u.elements[0]*=s,u.elements[1]*=s,u.elements[2]*=s,u.elements[4]*=c,u.elements[5]*=c,u.elements[6]*=c,u.elements[8]*=l,u.elements[9]*=l,u.elements[10]*=l,t.setFromRotationMatrix(u),i.x=n,i.y=o,i.z=a,this}),makePerspective:function(e,t,i,r,n,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*n/(t-e),c=2*n/(i-r),l=(t+e)/(t-e),h=(i+r)/(i-r),u=-(o+n)/(o-n),p=-2*o*n/(o-n);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=c,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=u,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,i,r,n,o){var a=this.elements,s=1/(t-e),c=1/(i-r),l=1/(o-n),h=(t+e)*s,u=(i+r)*c,p=(o+n)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-u,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,i=e.elements,r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var i=0;i<16;i++)this.elements[i]=e[i+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}),Object.assign(kt,{slerp:function(e,t,i,r){return i.copy(e).slerp(t,r)},slerpFlat:function(e,t,i,r,n,o,a){var s=i[r+0],c=i[r+1],l=i[r+2],h=i[r+3],u=n[o+0],p=n[o+1],d=n[o+2],f=n[o+3];if(h!==f||s!==u||c!==p||l!==d){var m=1-a,g=s*u+c*p+l*d+h*f,v=0<=g?1:-1,y=1-g*g;if(y>Number.EPSILON){var _=Math.sqrt(y),x=Math.atan2(_,g*v);m=Math.sin(m*x)/_,a=Math.sin(a*x)/_}var b=a*v;if(s=s*m+u*b,c=c*m+p*b,l=l*m+d*b,h=h*m+f*b,m===1-a){var w=1/Math.sqrt(s*s+c*c+l*l+h*h);s*=w,c*=w,l*=w,h*=w}}e[t]=s,e[t+1]=c,e[t+2]=l,e[t+3]=h}}),Object.defineProperties(kt.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(kt.prototype,{set:function(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=e._x,r=e._y,n=e._z,o=e.order,a=Math.cos,s=Math.sin,c=a(i/2),l=a(r/2),h=a(n/2),u=s(i/2),p=s(r/2),d=s(n/2);return"XYZ"===o?(this._x=u*l*h+c*p*d,this._y=c*p*h-u*l*d,this._z=c*l*d+u*p*h,this._w=c*l*h-u*p*d):"YXZ"===o?(this._x=u*l*h+c*p*d,this._y=c*p*h-u*l*d,this._z=c*l*d-u*p*h,this._w=c*l*h+u*p*d):"ZXY"===o?(this._x=u*l*h-c*p*d,this._y=c*p*h+u*l*d,this._z=c*l*d+u*p*h,this._w=c*l*h-u*p*d):"ZYX"===o?(this._x=u*l*h-c*p*d,this._y=c*p*h+u*l*d,this._z=c*l*d-u*p*h,this._w=c*l*h+u*p*d):"YZX"===o?(this._x=u*l*h+c*p*d,this._y=c*p*h+u*l*d,this._z=c*l*d-u*p*h,this._w=c*l*h-u*p*d):"XZY"===o&&(this._x=u*l*h-c*p*d,this._y=c*p*h-u*l*d,this._z=c*l*d+u*p*h,this._w=c*l*h+u*p*d),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,i=e.elements,r=i[0],n=i[4],o=i[8],a=i[1],s=i[5],c=i[9],l=i[2],h=i[6],u=i[10],p=r+s+u;return 0<p?(t=.5/Math.sqrt(p+1),this._w=.25/t,this._x=(h-c)*t,this._y=(o-l)*t,this._z=(a-n)*t):s<r&&u<r?(t=2*Math.sqrt(1+r-s-u),this._w=(h-c)/t,this._x=.25*t,this._y=(n+a)/t,this._z=(o+l)/t):u<s?(t=2*Math.sqrt(1+s-r-u),this._w=(o-l)/t,this._x=(n+a)/t,this._y=.25*t,this._z=(c+h)/t):(t=2*Math.sqrt(1+u-r-s),this._w=(a-n)/t,this._x=(o+l)/t,this._y=(c+h)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:(f=new Ft,function(e,t){return void 0===f&&(f=new Ft),(d=e.dot(t)+1)<1e-6?(d=0,Math.abs(e.x)>Math.abs(e.z)?f.set(-e.y,e.x,0):f.set(0,-e.z,e.y)):f.crossVectors(e,t),this._x=f.x,this._y=f.y,this._z=f.z,this._w=d,this.normalize()}),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var i=e._x,r=e._y,n=e._z,o=e._w,a=t._x,s=t._y,c=t._z,l=t._w;return this._x=i*l+o*a+r*c-n*s,this._y=r*l+o*s+n*a-i*c,this._z=n*l+o*c+i*s-r*a,this._w=o*l-i*a-r*s-n*c,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var i=this._x,r=this._y,n=this._z,o=this._w,a=o*e._w+i*e._x+r*e._y+n*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),1<=a)return this._w=o,this._x=i,this._y=r,this._z=n,this;var s=1-a*a;if(s<=Number.EPSILON){var c=1-t;return this._w=c*o+t*this._w,this._x=c*i+t*this._x,this._y=c*r+t*this._y,this._z=c*n+t*this._z,this.normalize()}var l=Math.sqrt(s),h=Math.atan2(l,a),u=Math.sin((1-t)*h)/l,p=Math.sin(t*h)/l;return this._w=o*u+this._w*p,this._x=i*u+this._x*p,this._y=r*u+this._y*p,this._z=n*u+this._z*p,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(Ft.prototype,{isVector3:!0,set:function(e,t,i){return this.x=e,this.y=t,this.z=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:(w=new kt,function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(w.setFromEuler(e))}),applyAxisAngle:(b=new kt,function(e,t){return this.applyQuaternion(b.setFromAxisAngle(e,t))}),applyMatrix3:function(e){var t=this.x,i=this.y,r=this.z,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6]*r,this.y=n[1]*t+n[4]*i+n[7]*r,this.z=n[2]*t+n[5]*i+n[8]*r,this},applyMatrix4:function(e){var t=this.x,i=this.y,r=this.z,n=e.elements,o=1/(n[3]*t+n[7]*i+n[11]*r+n[15]);return this.x=(n[0]*t+n[4]*i+n[8]*r+n[12])*o,this.y=(n[1]*t+n[5]*i+n[9]*r+n[13])*o,this.z=(n[2]*t+n[6]*i+n[10]*r+n[14])*o,this},applyQuaternion:function(e){var t=this.x,i=this.y,r=this.z,n=e.x,o=e.y,a=e.z,s=e.w,c=s*t+o*r-a*i,l=s*i+a*t-n*r,h=s*r+n*i-o*t,u=-n*t-o*i-a*r;return this.x=c*s+u*-n+l*-a-h*-o,this.y=l*s+u*-o+h*-n-c*-a,this.z=h*s+u*-a+c*-o-l*-n,this},project:(x=new Ut,function(e){return x.multiplyMatrices(e.projectionMatrix,x.getInverse(e.matrixWorld)),this.applyMatrix4(x)}),unproject:(_=new Ut,function(e){return _.multiplyMatrices(e.matrixWorld,_.getInverse(e.projectionMatrix)),this.applyMatrix4(_)}),transformDirection:function(e){var t=this.x,i=this.y,r=this.z,n=e.elements;return this.x=n[0]*t+n[4]*i+n[8]*r,this.y=n[1]*t+n[5]*i+n[9]*r,this.z=n[2]*t+n[6]*i+n[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:(v=new Ft,y=new Ft,function(e,t){return v.set(e,e,e),y.set(t,t,t),this.clamp(v,y)}),clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var i=e.x,r=e.y,n=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-n*a,this.y=n*o-i*s,this.z=i*a-r*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:(g=new Ft,function(e){return g.copy(this).projectOnVector(e),this.sub(g)}),reflect:(m=new Ft,function(e){return this.sub(m.copy(e).multiplyScalar(2*this.dot(e)))}),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(Bt.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(zt.prototype,{isMatrix3:!0,set:function(e,t,i,r,n,o,a,s,c){var l=this.elements;return l[0]=e,l[1]=r,l[2]=a,l[3]=t,l[4]=n,l[5]=s,l[6]=i,l[7]=o,l[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:(M=new Ft,function(e){for(var t=0,i=e.count;t<i;t++)M.x=e.getX(t),M.y=e.getY(t),M.z=e.getZ(t),M.applyMatrix3(this),e.setXYZ(t,M.x,M.y,M.z);return e}),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements,r=t.elements,n=this.elements,o=i[0],a=i[3],s=i[6],c=i[1],l=i[4],h=i[7],u=i[2],p=i[5],d=i[8],f=r[0],m=r[3],g=r[6],v=r[1],y=r[4],_=r[7],x=r[2],b=r[5],w=r[8];return n[0]=o*f+a*v+s*x,n[3]=o*m+a*y+s*b,n[6]=o*g+a*_+s*w,n[1]=c*f+l*v+h*x,n[4]=c*m+l*y+h*b,n[7]=c*g+l*_+h*w,n[2]=u*f+p*v+d*x,n[5]=u*m+p*y+d*b,n[8]=u*g+p*_+d*w,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],i=e[1],r=e[2],n=e[3],o=e[4],a=e[5],s=e[6],c=e[7],l=e[8];return t*o*l-t*a*c-i*n*l+i*a*s+r*n*c-r*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var i=e.elements,r=this.elements,n=i[0],o=i[1],a=i[2],s=i[3],c=i[4],l=i[5],h=i[6],u=i[7],p=i[8],d=p*c-l*u,f=l*h-p*s,m=u*s-c*h,g=n*d+o*f+a*m;if(0===g){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(v);return console.warn(v),this.identity()}var y=1/g;return r[0]=d*y,r[1]=(a*u-p*o)*y,r[2]=(l*o-a*c)*y,r[3]=f*y,r[4]=(p*n-a*h)*y,r[5]=(a*s-l*n)*y,r[6]=m*y,r[7]=(o*h-u*n)*y,r[8]=(c*n-o*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,i,r,n,o,a){var s=Math.cos(n),c=Math.sin(n);this.set(i*s,i*c,-i*(s*o+c*a)+o+e,-r*c,r*s,-r*(-c*o+s*a)+a+t,0,0,1)},scale:function(e,t){var i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this},rotate:function(e){var t=Math.cos(e),i=Math.sin(e),r=this.elements,n=r[0],o=r[3],a=r[6],s=r[1],c=r[4],l=r[7];return r[0]=t*n+i*s,r[3]=t*o+i*c,r[6]=t*a+i*l,r[1]=-i*n+t*s,r[4]=-i*o+t*c,r[7]=-i*a+t*l,this},translate:function(e,t){var i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this},equals:function(e){for(var t=this.elements,i=e.elements,r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var i=0;i<9;i++)this.elements[i]=e[i+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}});var jt,Ht,Gt,Vt,Wt,Xt,qt,Yt,Jt,Zt,Kt,Qt,$t,ei,ti,ii,ri=0;function ni(e,t,i,r,n,o,a,s,c,l){Object.defineProperty(this,"id",{value:ri++}),this.uuid=Bt.generateUUID(),this.name="",this.image=void 0!==e?e:ni.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:ni.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:Se,this.wrapT=void 0!==r?r:Se,this.magFilter=void 0!==n?n:Ce,this.minFilter=void 0!==o?o:Ie,this.anisotropy=void 0!==c?c:1,this.format=void 0!==a?a:Ye,this.type=void 0!==s?s:De,this.offset=new Nt(0,0),this.repeat=new Nt(1,1),this.center=new Nt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new zt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:Tt,this.version=0,this.onUpdate=null}function oi(e,t,i,r){this.x=e||0,this.y=t||0,this.z=i||0,this.w=void 0!==r?r:1}function ai(e,t,i){this.width=e,this.height=t,this.scissor=new oi(0,0,e,t),this.scissorTest=!1,this.viewport=new oi(0,0,e,t),void 0===(i=i||{}).minFilter&&(i.minFilter=Ce),this.texture=new ni(void 0,void 0,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.generateMipmaps=void 0===i.generateMipmaps||i.generateMipmaps,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0===i.stencilBuffer||i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function si(e,t,i){ai.call(this,e,t,i),this.activeCubeFace=0,this.activeMipMapLevel=0}function ci(e,t,i,r,n,o,a,s,c,l,h,u){ni.call(this,null,o,a,s,c,l,r,n,h,u),this.image={data:e,width:t,height:i},this.magFilter=void 0!==c?c:Re,this.minFilter=void 0!==l?l:Re,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function li(e,t){this.min=void 0!==e?e:new Ft(1/0,1/0,1/0),this.max=void 0!==t?t:new Ft(-1/0,-1/0,-1/0)}function hi(e,t){this.center=void 0!==e?e:new Ft,this.radius=void 0!==t?t:0}function ui(e,t){this.normal=void 0!==e?e:new Ft(1,0,0),this.constant=void 0!==t?t:0}function pi(e,t,i,r,n,o){this.planes=[void 0!==e?e:new ui,void 0!==t?t:new ui,void 0!==i?i:new ui,void 0!==r?r:new ui,void 0!==n?n:new ui,void 0!==o?o:new ui]}ni.DEFAULT_IMAGE=void 0,ni.DEFAULT_MAPPING=300,ni.prototype=Object.assign(Object.create(t.prototype),{constructor:ni,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];function i(e){var t;if(e instanceof HTMLCanvasElement)t=e;else{(t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,t.height=e.height;var i=t.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height)}return 2048<t.width||2048<t.height?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=Bt.generateUUID()),!t&&void 0===e.images[n.uuid]){var o;if(Array.isArray(n)){o=[];for(var a=0,s=n.length;a<s;a++)o.push(i(n[a]))}else o=i(n);e.images[n.uuid]={uuid:n.uuid,url:o}}r.image=n.uuid}return t||(e.textures[this.uuid]=r),r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300===this.mapping){if(e.applyMatrix3(this.matrix),e.x<0||1<e.x)switch(this.wrapS){case we:e.x=e.x-Math.floor(e.x);break;case Se:e.x=e.x<0?0:1;break;case Ae:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||1<e.y)switch(this.wrapT){case we:e.y=e.y-Math.floor(e.y);break;case Se:e.y=e.y<0?0:1;break;case Ae:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}}),Object.defineProperty(ni.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(oi.prototype,{isVector4:!0,set:function(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,i=this.y,r=this.z,n=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*n,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*n,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*n,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*n,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,i,r,n,o=e.elements,a=o[0],s=o[4],c=o[8],l=o[1],h=o[5],u=o[9],p=o[2],d=o[6],f=o[10];if(Math.abs(s-l)<.01&&Math.abs(c-p)<.01&&Math.abs(u-d)<.01){if(Math.abs(s+l)<.1&&Math.abs(c+p)<.1&&Math.abs(u+d)<.1&&Math.abs(a+h+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,g=(h+1)/2,v=(f+1)/2,y=(s+l)/4,_=(c+p)/4,x=(u+d)/4;return g<m&&v<m?m<.01?(i=0,n=r=.707106781):(r=y/(i=Math.sqrt(m)),n=_/i):v<g?g<.01?(r=0,n=i=.707106781):(i=y/(r=Math.sqrt(g)),n=x/r):v<.01?(r=i=.707106781,n=0):(i=_/(n=Math.sqrt(v)),r=x/n),this.set(i,r,n,t),this}var b=Math.sqrt((d-u)*(d-u)+(c-p)*(c-p)+(l-s)*(l-s));return Math.abs(b)<.001&&(b=1),this.x=(d-u)/b,this.y=(c-p)/b,this.z=(l-s)/b,this.w=Math.acos((a+h+f-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return void 0===jt&&(jt=new oi,Ht=new oi),jt.set(e,e,e,e),Ht.set(t,t,t,t),this.clamp(jt,Ht)},clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),ai.prototype=Object.assign(Object.create(t.prototype),{constructor:ai,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),((si.prototype=Object.create(ai.prototype)).constructor=si).prototype.isWebGLRenderTargetCube=!0,((ci.prototype=Object.create(ni.prototype)).constructor=ci).prototype.isDataTexture=!0,Object.assign(li.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,i=1/0,r=1/0,n=-1/0,o=-1/0,a=-1/0,s=0,c=e.length;s<c;s+=3){var l=e[s],h=e[s+1],u=e[s+2];l<t&&(t=l),h<i&&(i=h),u<r&&(r=u),n<l&&(n=l),o<h&&(o=h),a<u&&(a=u)}return this.min.set(t,i,r),this.max.set(n,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,i=1/0,r=1/0,n=-1/0,o=-1/0,a=-1/0,s=0,c=e.count;s<c;s++){var l=e.getX(s),h=e.getY(s),u=e.getZ(s);l<t&&(t=l),h<i&&(i=h),u<r&&(r=u),n<l&&(n=l),o<h&&(o=h),a<u&&(a=u)}return this.min.set(t,i,r),this.max.set(n,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:(Xt=new Ft,function(e,t){var i=Xt.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Ft),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Ft),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var n,o,a,s=new Ft;function t(e){var t=e.geometry;if(void 0!==t)if(t.isGeometry){var i=t.vertices;for(o=0,a=i.length;o<a;o++)s.copy(i[o]),s.applyMatrix4(e.matrixWorld),n.expandByPoint(s)}else if(t.isBufferGeometry){var r=t.attributes.position;if(void 0!==r)for(o=0,a=r.count;o<a;o++)s.fromBufferAttribute(r,o).applyMatrix4(e.matrixWorld),n.expandByPoint(s)}}return function(e){return n=this,e.updateMatrixWorld(!0),e.traverse(t),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Ft),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:(Wt=new Ft,function(e){return this.clampPoint(e.center,Wt),Wt.distanceToSquared(e.center)<=e.radius*e.radius}),intersectsPlane:function(e){var t,i;return 0<e.normal.x?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),0<e.normal.y?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),0<e.normal.z?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=e.constant&&i>=e.constant},intersectsTriangle:function(){var s=new Ft,c=new Ft,l=new Ft,i=new Ft,r=new Ft,n=new Ft,h=new Ft,o=new Ft,u=new Ft,a=new Ft;function p(e){var t,i;for(t=0,i=e.length-3;t<=i;t+=3){h.fromArray(e,t);var r=u.x*Math.abs(h.x)+u.y*Math.abs(h.y)+u.z*Math.abs(h.z),n=s.dot(h),o=c.dot(h),a=l.dot(h);if(Math.max(-Math.max(n,o,a),Math.min(n,o,a))>r)return!1}return!0}return function(e){if(this.isEmpty())return!1;this.getCenter(o),u.subVectors(this.max,o),s.subVectors(e.a,o),c.subVectors(e.b,o),l.subVectors(e.c,o),i.subVectors(c,s),r.subVectors(l,c),n.subVectors(s,l);var t=[0,-i.z,i.y,0,-r.z,r.y,0,-n.z,n.y,i.z,0,-i.x,r.z,0,-r.x,n.z,0,-n.x,-i.y,i.x,0,-r.y,r.x,0,-n.y,n.x,0];return!!p(t)&&(!!p(t=[1,0,0,0,1,0,0,0,1])&&(a.crossVectors(i,r),p(t=[a.x,a.y,a.z])))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Ft),t.copy(e).clamp(this.min,this.max)},distanceToPoint:(Vt=new Ft,function(e){return Vt.copy(e).clamp(this.min,this.max).sub(e).length()}),getBoundingSphere:(Gt=new Ft,function(e){return void 0===e&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),e=new hi),this.getCenter(e.center),e.radius=.5*this.getSize(Gt).length(),e}),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){if(this.isEmpty())return this;var t=e.elements,i=t[0]*this.min.x,r=t[1]*this.min.x,n=t[2]*this.min.x,o=t[0]*this.max.x,a=t[1]*this.max.x,s=t[2]*this.max.x,c=t[4]*this.min.y,l=t[5]*this.min.y,h=t[6]*this.min.y,u=t[4]*this.max.y,p=t[5]*this.max.y,d=t[6]*this.max.y,f=t[8]*this.min.z,m=t[9]*this.min.z,g=t[10]*this.min.z,v=t[8]*this.max.z,y=t[9]*this.max.z,_=t[10]*this.max.z;return this.min.x=Math.min(i,o)+Math.min(c,u)+Math.min(f,v)+t[12],this.min.y=Math.min(r,a)+Math.min(l,p)+Math.min(m,y)+t[13],this.min.z=Math.min(n,s)+Math.min(h,d)+Math.min(g,_)+t[14],this.max.x=Math.max(i,o)+Math.max(c,u)+Math.max(f,v)+t[12],this.max.y=Math.max(r,a)+Math.max(l,p)+Math.max(m,y)+t[13],this.max.z=Math.max(n,s)+Math.max(h,d)+Math.max(g,_)+t[14],this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(hi.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:(qt=new li,function(e,t){var i=this.center;void 0!==t?i.copy(t):qt.setFromPoints(e).getCenter(i);for(var r=0,n=0,o=e.length;n<o;n++)r=Math.max(r,i.distanceToSquared(e[n]));return this.radius=Math.sqrt(r),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var i=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Ft),t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new li),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(ui.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:(Kt=new Ft,Qt=new Ft,function(e,t,i){var r=Kt.subVectors(i,t).cross(Qt.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Ft),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:(Zt=new Ft,function(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new Ft);var i=e.delta(Zt),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;var n=-(e.start.dot(this.normal)+this.constant)/r;return n<0||1<n?void 0:t.copy(i).multiplyScalar(n).add(e.start)}),intersectsLine:function(e){var t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&0<i||i<0&&0<t},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Ft),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:(Yt=new Ft,Jt=new zt,function(e,t){var i=t||Jt.getNormalMatrix(e),r=this.coplanarPoint(Yt).applyMatrix4(e),n=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(n),this}),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(pi.prototype,{set:function(e,t,i,r,n,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(n),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,i=0;i<6;i++)t[i].copy(e.planes[i]);return this},setFromMatrix:function(e){var t=this.planes,i=e.elements,r=i[0],n=i[1],o=i[2],a=i[3],s=i[4],c=i[5],l=i[6],h=i[7],u=i[8],p=i[9],d=i[10],f=i[11],m=i[12],g=i[13],v=i[14],y=i[15];return t[0].setComponents(a-r,h-s,f-u,y-m).normalize(),t[1].setComponents(a+r,h+s,f+u,y+m).normalize(),t[2].setComponents(a+n,h+c,f+p,y+g).normalize(),t[3].setComponents(a-n,h-c,f-p,y-g).normalize(),t[4].setComponents(a-o,h-l,f-d,y-v).normalize(),t[5].setComponents(a+o,h+l,f+d,y+v).normalize(),this},intersectsObject:(ii=new hi,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),ii.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(ii)}),intersectsSprite:(ti=new hi,function(e){return ti.center.set(0,0,0),ti.radius=.7071067811865476,ti.applyMatrix4(e.matrixWorld),this.intersectsSphere(ti)}),intersectsSphere:function(e){for(var t=this.planes,i=e.center,r=-e.radius,n=0;n<6;n++){if(t[n].distanceToPoint(i)<r)return!1}return!0},intersectsBox:($t=new Ft,ei=new Ft,function(e){for(var t=this.planes,i=0;i<6;i++){var r=t[i];$t.x=0<r.normal.x?e.min.x:e.max.x,ei.x=0<r.normal.x?e.max.x:e.min.x,$t.y=0<r.normal.y?e.min.y:e.max.y,ei.y=0<r.normal.y?e.max.y:e.min.y,$t.z=0<r.normal.z?e.min.z:e.max.z,ei.z=0<r.normal.z?e.max.z:e.min.z;var n=r.distanceToPoint($t),o=r.distanceToPoint(ei);if(n<0&&o<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}});var di,fi={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_pars_maps:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},mi={merge:function(e){for(var t={},i=0;i<e.length;i++){var r=this.clone(e[i]);for(var n in r)t[n]=r[n]}return t},clone:function(e){var t={};for(var i in e)for(var r in t[i]={},e[i]){var n=e[i][r];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture)?t[i][r]=n.clone():Array.isArray(n)?t[i][r]=n.slice():t[i][r]=n}return t}},gi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function vi(e,t,i){return void 0===t&&void 0===i?this.set(e):this.setRGB(e,t,i)}Object.assign(vi.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,i){return this.r=e,this.g=t,this.b=i,this},setHSL:function(){function o(e,t,i){return i<0&&(i+=1),1<i&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+6*(t-e)*(2/3-i):e}return function(e,t,i){if(e=Bt.euclideanModulo(e,1),t=Bt.clamp(t,0,1),i=Bt.clamp(i,0,1),0===t)this.r=this.g=this.b=i;else{var r=i<=.5?i*(1+t):i+t-i*t,n=2*i-r;this.r=o(n,r,e+1/3),this.g=o(n,r,e),this.b=o(n,r,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var r,n=i[1],o=i[2];switch(n){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,c=parseInt(r[3],10)/100;return e(r[5]),this.setHSL(a,s,c)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(t)){var l,h=(l=i[1]).length;if(3===h)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===h)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}t&&0<t.length&&(void 0!==(l=gi[t])?this.setHex(l):console.warn("THREE.Color: Unknown color "+t));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var i=0<t?1/t:1;return this.r=Math.pow(e.r,i),this.g=Math.pow(e.g,i),this.b=Math.pow(e.b,i),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(){function t(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),copyLinearToSRGB:function(){function t(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,i,r=this.r,n=this.g,o=this.b,a=Math.max(r,n,o),s=Math.min(r,n,o),c=(s+a)/2;if(s===a)i=t=0;else{var l=a-s;switch(i=c<=.5?l/(a+s):l/(2-a-s),a){case r:t=(n-o)/l+(n<o?6:0);break;case n:t=(o-r)/l+2;break;case o:t=(r-n)/l+4}t/=6}return e.h=t,e.s=i,e.l=c,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(di={},function(e,t,i){return this.getHSL(di),di.h+=e,di.s+=t,di.l+=i,this.setHSL(di.h,di.s,di.l),this}),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var yi,_i,xi={common:{diffuse:{value:new vi(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new zt},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Nt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new vi(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new vi(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new zt}}},bi={basic:{uniforms:mi.merge([xi.common,xi.specularmap,xi.envmap,xi.aomap,xi.lightmap,xi.fog]),vertexShader:fi.meshbasic_vert,fragmentShader:fi.meshbasic_frag},lambert:{uniforms:mi.merge([xi.common,xi.specularmap,xi.envmap,xi.aomap,xi.lightmap,xi.emissivemap,xi.fog,xi.lights,{emissive:{value:new vi(0)}}]),vertexShader:fi.meshlambert_vert,fragmentShader:fi.meshlambert_frag},phong:{uniforms:mi.merge([xi.common,xi.specularmap,xi.envmap,xi.aomap,xi.lightmap,xi.emissivemap,xi.bumpmap,xi.normalmap,xi.displacementmap,xi.gradientmap,xi.fog,xi.lights,{emissive:{value:new vi(0)},specular:{value:new vi(1118481)},shininess:{value:30}}]),vertexShader:fi.meshphong_vert,fragmentShader:fi.meshphong_frag},standard:{uniforms:mi.merge([xi.common,xi.envmap,xi.aomap,xi.lightmap,xi.emissivemap,xi.bumpmap,xi.normalmap,xi.displacementmap,xi.roughnessmap,xi.metalnessmap,xi.fog,xi.lights,{emissive:{value:new vi(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:fi.meshphysical_vert,fragmentShader:fi.meshphysical_frag},points:{uniforms:mi.merge([xi.points,xi.fog]),vertexShader:fi.points_vert,fragmentShader:fi.points_frag},dashed:{uniforms:mi.merge([xi.common,xi.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:fi.linedashed_vert,fragmentShader:fi.linedashed_frag},depth:{uniforms:mi.merge([xi.common,xi.displacementmap]),vertexShader:fi.depth_vert,fragmentShader:fi.depth_frag},normal:{uniforms:mi.merge([xi.common,xi.bumpmap,xi.normalmap,xi.displacementmap,{opacity:{value:1}}]),vertexShader:fi.normal_vert,fragmentShader:fi.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:fi.cube_vert,fragmentShader:fi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:fi.equirect_vert,fragmentShader:fi.equirect_frag},distanceRGBA:{uniforms:mi.merge([xi.common,xi.displacementmap,{referencePosition:{value:new Ft},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:fi.distanceRGBA_vert,fragmentShader:fi.distanceRGBA_frag},shadow:{uniforms:mi.merge([xi.lights,xi.fog,{color:{value:new vi(0)},opacity:{value:1}}]),vertexShader:fi.shadow_vert,fragmentShader:fi.shadow_frag}};function wi(){var i=null,r=!1,n=null;function o(e,t){!1!==r&&(n(e,t),i.requestAnimationFrame(o))}return{start:function(){!0!==r&&null!==n&&(i.requestAnimationFrame(o),r=!0)},stop:function(){r=!1},setAnimationLoop:function(e){n=e},setContext:function(e){i=e}}}function Mi(c){var l=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),l.get(e)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);var t=l.get(e);t&&(c.deleteBuffer(t.buffer),l.delete(e))},update:function(e,t){e.isInterleavedBufferAttribute&&(e=e.data);var i,r,n,o,a,s=l.get(e);void 0===s?l.set(e,function(e,t){var i=e.array,r=e.dynamic?c.DYNAMIC_DRAW:c.STATIC_DRAW,n=c.createBuffer();c.bindBuffer(t,n),c.bufferData(t,i,r),e.onUploadCallback();var o=c.FLOAT;return i instanceof Float32Array?o=c.FLOAT:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?o=c.UNSIGNED_SHORT:i instanceof Int16Array?o=c.SHORT:i instanceof Uint32Array?o=c.UNSIGNED_INT:i instanceof Int32Array?o=c.INT:i instanceof Int8Array?o=c.BYTE:i instanceof Uint8Array&&(o=c.UNSIGNED_BYTE),{buffer:n,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}(e,t)):s.version<e.version&&(i=s.buffer,n=t,o=(r=e).array,a=r.updateRange,c.bindBuffer(n,i),!1===r.dynamic?c.bufferData(n,o,c.STATIC_DRAW):-1===a.count?c.bufferSubData(n,0,o):0===a.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(c.bufferSubData(n,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1),s.version=e.version)}}}function Ti(e,t,i,r){this._x=e||0,this._y=t||0,this._z=i||0,this._order=r||Ti.DefaultOrder}function Ei(){this.mask=1}bi.physical={uniforms:mi.merge([bi.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:fi.meshphysical_vert,fragmentShader:fi.meshphysical_frag},Ti.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Ti.DefaultOrder="XYZ",Object.defineProperties(Ti.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(Ti.prototype,{isEuler:!0,set:function(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,i){var r=Bt.clamp,n=e.elements,o=n[0],a=n[4],s=n[8],c=n[1],l=n[5],h=n[9],u=n[2],p=n[6],d=n[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-h,d),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(p,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-u,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(c,o))):"ZYX"===t?(this._y=Math.asin(-r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(p,d),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,l))):"YZX"===t?(this._z=Math.asin(r(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-u,o)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===t?(this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(p,l),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-h,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==i&&this.onChangeCallback(),this},setFromQuaternion:(_i=new Ut,function(e,t,i){return _i.makeRotationFromQuaternion(e),this.setFromRotationMatrix(_i,t,i)}),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(yi=new kt,function(e){return yi.setFromEuler(this),this.setFromQuaternion(yi,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Ft(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(Ei.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});var Si,Ai,Ri,Li,Pi,Ci,Oi,Ii,Di,Bi,Ni,Ui,ki,Fi,zi,ji,Hi,Gi,Vi=0;function Wi(){Object.defineProperty(this,"id",{value:Vi++}),this.uuid=Bt.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Wi.DefaultUp.clone();var e=new Ft,t=new Ti,i=new kt,r=new Ft(1,1,1);t.onChange(function(){i.setFromEuler(t,!1)}),i.onChange(function(){t.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:i},scale:{enumerable:!0,value:r},modelViewMatrix:{value:new Ut},normalMatrix:{value:new zt}}),this.matrix=new Ut,this.matrixWorld=new Ut,this.matrixAutoUpdate=Wi.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Ei,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Xi(){Wi.call(this),this.type="Camera",this.matrixWorldInverse=new Ut,this.projectionMatrix=new Ut}function qi(e,t,i,r,n,o){Xi.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=void 0!==n?n:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Yi(e,t,i,r,n,o){this.a=e,this.b=t,this.c=i,this.normal=r&&r.isVector3?r:new Ft,this.vertexNormals=Array.isArray(r)?r:[],this.color=n&&n.isColor?n:new vi,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=void 0!==o?o:0}Wi.DefaultUp=new Ft(0,1,0),Wi.DefaultMatrixAutoUpdate=!0,Wi.prototype=Object.assign(Object.create(t.prototype),{constructor:Wi,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(Hi=new kt,function(e,t){return Hi.setFromAxisAngle(e,t),this.quaternion.multiply(Hi),this}),rotateOnWorldAxis:(ji=new kt,function(e,t){return ji.setFromAxisAngle(e,t),this.quaternion.premultiply(ji),this}),rotateX:(zi=new Ft(1,0,0),function(e){return this.rotateOnAxis(zi,e)}),rotateY:(Fi=new Ft(0,1,0),function(e){return this.rotateOnAxis(Fi,e)}),rotateZ:(ki=new Ft(0,0,1),function(e){return this.rotateOnAxis(ki,e)}),translateOnAxis:(Ui=new Ft,function(e,t){return Ui.copy(e).applyQuaternion(this.quaternion),this.position.add(Ui.multiplyScalar(t)),this}),translateX:(Ni=new Ft(1,0,0),function(e){return this.translateOnAxis(Ni,e)}),translateY:(Bi=new Ft(0,1,0),function(e){return this.translateOnAxis(Bi,e)}),translateZ:(Di=new Ft(0,0,1),function(e){return this.translateOnAxis(Di,e)}),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(Ii=new Ut,function(e){return e.applyMatrix4(Ii.getInverse(this.matrixWorld))}),lookAt:(Ci=new Ut,Oi=new Ft,function(e,t,i){e.isVector3?Oi.copy(e):Oi.set(e,t,i),this.isCamera?Ci.lookAt(this.position,Oi,this.up):Ci.lookAt(Oi,this.position,this.up),this.quaternion.setFromRotationMatrix(Ci)}),add:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?console.error("THREE.Object3D.add: object can't be added as a child of itself.",e):e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this},remove:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var i=this.children.indexOf(e);return-1!==i&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(i,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var i=0,r=this.children.length;i<r;i++){var n=this.children[i].getObjectByProperty(e,t);if(void 0!==n)return n}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Ft),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(Li=new Ft,Pi=new Ft,function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new kt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Li,e,Pi),e}),getWorldScale:(Ai=new Ft,Ri=new kt,function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new Ft),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Ai,Ri,e),e}),getWorldDirection:(Si=new kt,function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Ft),this.getWorldQuaternion(Si),e.set(0,0,1).applyQuaternion(Si)}),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,i=0,r=t.length;i<r;i++)t[i].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e=!(this.matrixWorldNeedsUpdate=!1));for(var t=this.children,i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)},toJSON:function(i){var e=void 0===i||"string"==typeof i,t={};e&&(i={geometries:{},materials:{},textures:{},images:{},shapes:{}},t.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function n(e,t){return void 0===e[t.uuid]&&(e[t.uuid]=t.toJSON(i)),t.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),void 0!==this.geometry){r.geometry=n(i.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,c=a.length;s<c;s++){var l=a[s];n(i.shapes,l)}else n(i.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var h=[];for(s=0,c=this.material.length;s<c;s++)h.push(n(i.materials,this.material[s]));r.material=h}else r.material=n(i.materials,this.material);if(0<this.children.length){r.children=[];for(s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(i).object)}if(e){var u=m(i.geometries),p=m(i.materials),d=m(i.textures),f=m(i.images);a=m(i.shapes);0<u.length&&(t.geometries=u),0<p.length&&(t.materials=p),0<d.length&&(t.textures=d),0<f.length&&(t.images=f),0<a.length&&(t.shapes=a)}return t.object=r,t;function m(e){var t=[];for(var i in e){var r=e[i];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var i=0;i<e.children.length;i++){var r=e.children[i];this.add(r.clone())}return this}}),Xi.prototype=Object.assign(Object.create(Wi.prototype),{constructor:Xi,isCamera:!0,copy:function(e,t){return Wi.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:(Gi=new kt,function(e){return void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Ft),this.getWorldQuaternion(Gi),e.set(0,0,-1).applyQuaternion(Gi)}),updateMatrixWorld:function(e){Wi.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),qi.prototype=Object.assign(Object.create(Xi.prototype),{constructor:qi,isOrthographicCamera:!0,copy:function(e,t){return Xi.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,i,r,n,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=n,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,n=i-e,o=i+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var c=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),h=(this.right-this.left)/this.view.width,u=(this.top-this.bottom)/this.view.height;o=(n+=h*(this.view.offsetX/c))+h*(this.view.width/c),s=(a-=u*(this.view.offsetY/l))-u*(this.view.height/l)}this.projectionMatrix.makeOrthographic(n,o,a,s,this.near,this.far)},toJSON:function(e){var t=Wi.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Object.assign(Yi.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,i=e.vertexNormals.length;t<i;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,i=e.vertexColors.length;t<i;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var Ji,Zi,Ki,Qi,$i,er,tr,ir=0;function rr(){Object.defineProperty(this,"id",{value:ir+=2}),this.uuid=Bt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function nr(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function or(e,t,i){nr.call(this,new Int8Array(e),t,i)}function ar(e,t,i){nr.call(this,new Uint8Array(e),t,i)}function sr(e,t,i){nr.call(this,new Uint8ClampedArray(e),t,i)}function cr(e,t,i){nr.call(this,new Int16Array(e),t,i)}function lr(e,t,i){nr.call(this,new Uint16Array(e),t,i)}function hr(e,t,i){nr.call(this,new Int32Array(e),t,i)}function ur(e,t,i){nr.call(this,new Uint32Array(e),t,i)}function pr(e,t,i){nr.call(this,new Float32Array(e),t,i)}function dr(e,t,i){nr.call(this,new Float64Array(e),t,i)}function fr(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function mr(e){if(0===e.length)return-1/0;for(var t=e[0],i=1,r=e.length;i<r;++i)e[i]>t&&(t=e[i]);return t}rr.prototype=Object.assign(Object.create(t.prototype),{constructor:rr,isGeometry:!0,applyMatrix:function(e){for(var t=(new zt).getNormalMatrix(e),i=0,r=this.vertices.length;i<r;i++){this.vertices[i].applyMatrix4(e)}for(i=0,r=this.faces.length;i<r;i++){var n=this.faces[i];n.normal.applyMatrix3(t).normalize();for(var o=0,a=n.vertexNormals.length;o<a;o++)n.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:(tr=new Ut,function(e){return tr.makeRotationX(e),this.applyMatrix(tr),this}),rotateY:(er=new Ut,function(e){return er.makeRotationY(e),this.applyMatrix(er),this}),rotateZ:($i=new Ut,function(e){return $i.makeRotationZ(e),this.applyMatrix($i),this}),translate:(Qi=new Ut,function(e,t,i){return Qi.makeTranslation(e,t,i),this.applyMatrix(Qi),this}),scale:(Ki=new Ut,function(e,t,i){return Ki.makeScale(e,t,i),this.applyMatrix(Ki),this}),lookAt:(Zi=new Wi,function(e){Zi.lookAt(e),Zi.updateMatrix(),this.applyMatrix(Zi.matrix)}),fromBufferGeometry:function(e){var o=this,t=null!==e.index?e.index.array:void 0,i=e.attributes,r=i.position.array,a=void 0!==i.normal?i.normal.array:void 0,s=void 0!==i.color?i.color.array:void 0,c=void 0!==i.uv?i.uv.array:void 0,l=void 0!==i.uv2?i.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var h=[],u=[],p=[],n=0,d=0;n<r.length;n+=3,d+=2)o.vertices.push(new Ft(r[n],r[n+1],r[n+2])),void 0!==a&&h.push(new Ft(a[n],a[n+1],a[n+2])),void 0!==s&&o.colors.push(new vi(s[n],s[n+1],s[n+2])),void 0!==c&&u.push(new Nt(c[d],c[d+1])),void 0!==l&&p.push(new Nt(l[d],l[d+1]));function f(e,t,i,r){var n=new Yi(e,t,i,void 0!==a?[h[e].clone(),h[t].clone(),h[i].clone()]:[],void 0!==s?[o.colors[e].clone(),o.colors[t].clone(),o.colors[i].clone()]:[],r);o.faces.push(n),void 0!==c&&o.faceVertexUvs[0].push([u[e].clone(),u[t].clone(),u[i].clone()]),void 0!==l&&o.faceVertexUvs[1].push([p[e].clone(),p[t].clone(),p[i].clone()])}var m=e.groups;if(0<m.length)for(n=0;n<m.length;n++)for(var g=m[n],v=g.start,y=(d=v,v+g.count);d<y;d+=3)void 0!==t?f(t[d],t[d+1],t[d+2],g.materialIndex):f(d,d+1,d+2,g.materialIndex);else if(void 0!==t)for(n=0;n<t.length;n+=3)f(t[n],t[n+1],t[n+2]);else for(n=0;n<r.length/3;n+=3)f(n,n+1,n+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:(Ji=new Ft,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ji).negate(),this.translate(Ji.x,Ji.y,Ji.z),this}),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,i=0===t?1:1/t,r=new Ut;return r.set(i,0,0,-i*e.x,0,i,0,-i*e.y,0,0,i,-i*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new Ft,t=new Ft,i=0,r=this.faces.length;i<r;i++){var n=this.faces[i],o=this.vertices[n.a],a=this.vertices[n.b],s=this.vertices[n.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),n.normal.copy(e)}},computeVertexNormals:function(e){var t,i,r,n,o,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,i=this.vertices.length;t<i;t++)a[t]=new Ft;if(e){var s,c,l,h=new Ft,u=new Ft;for(r=0,n=this.faces.length;r<n;r++)o=this.faces[r],s=this.vertices[o.a],c=this.vertices[o.b],l=this.vertices[o.c],h.subVectors(l,c),u.subVectors(s,c),h.cross(u),a[o.a].add(h),a[o.b].add(h),a[o.c].add(h)}else for(this.computeFaceNormals(),r=0,n=this.faces.length;r<n;r++)a[(o=this.faces[r]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,i=this.vertices.length;t<i;t++)a[t].normalize();for(r=0,n=this.faces.length;r<n;r++){var p=(o=this.faces[r]).vertexNormals;3===p.length?(p[0].copy(a[o.a]),p[1].copy(a[o.b]),p[2].copy(a[o.c])):(p[0]=a[o.a].clone(),p[1]=a[o.b].clone(),p[2]=a[o.c].clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,i;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var r=(i=this.faces[e]).vertexNormals;3===r.length?(r[0].copy(i.normal),r[1].copy(i.normal),r[2].copy(i.normal)):(r[0]=i.normal.clone(),r[1]=i.normal.clone(),r[2]=i.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,i,r,n;for(i=0,r=this.faces.length;i<r;i++)for((n=this.faces[i]).__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]),e=0,t=n.vertexNormals.length;e<t;e++)n.__originalVertexNormals[e]?n.__originalVertexNormals[e].copy(n.vertexNormals[e]):n.__originalVertexNormals[e]=n.vertexNormals[e].clone();var o=new rr;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(i=0,r=this.faces.length;i<r;i++)c=new Ft,l={a:new Ft,b:new Ft,c:new Ft},a.push(c),s.push(l)}var c,l,h=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),i=0,r=this.faces.length;i<r;i++)n=this.faces[i],c=h.faceNormals[i],l=h.vertexNormals[i],c.copy(n.normal),l.a.copy(n.vertexNormals[0]),l.b.copy(n.vertexNormals[1]),l.c.copy(n.vertexNormals[2])}for(i=0,r=this.faces.length;i<r;i++)(n=this.faces[i]).normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new li),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new hi),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,i){if(e&&e.isGeometry){var r,n=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,c=e.faces,l=this.faceVertexUvs[0],h=e.faceVertexUvs[0],u=this.colors,p=e.colors;void 0===i&&(i=0),void 0!==t&&(r=(new zt).getNormalMatrix(t));for(var d=0,f=a.length;d<f;d++){var m=a[d].clone();void 0!==t&&m.applyMatrix4(t),o.push(m)}for(d=0,f=p.length;d<f;d++)u.push(p[d].clone());for(d=0,f=c.length;d<f;d++){var g,v,y,_=c[d],x=_.vertexNormals,b=_.vertexColors;(g=new Yi(_.a+n,_.b+n,_.c+n)).normal.copy(_.normal),void 0!==r&&g.normal.applyMatrix3(r).normalize();for(var w=0,M=x.length;w<M;w++)v=x[w].clone(),void 0!==r&&v.applyMatrix3(r).normalize(),g.vertexNormals.push(v);g.color.copy(_.color);for(w=0,M=b.length;w<M;w++)y=b[w],g.vertexColors.push(y.clone());g.materialIndex=_.materialIndex+i,s.push(g)}for(d=0,f=h.length;d<f;d++){var T=h[d],E=[];if(void 0!==T){for(w=0,M=T.length;w<M;w++)E.push(T[w].clone());l.push(E)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,i,r,n,o,a,s,c={},l=[],h=[],u=Math.pow(10,4);for(i=0,r=this.vertices.length;i<r;i++)e=this.vertices[i],void 0===c[t=Math.round(e.x*u)+"_"+Math.round(e.y*u)+"_"+Math.round(e.z*u)]?(c[t]=i,l.push(this.vertices[i]),h[i]=l.length-1):h[i]=h[c[t]];var p=[];for(i=0,r=this.faces.length;i<r;i++){(n=this.faces[i]).a=h[n.a],n.b=h[n.b],n.c=h[n.c],o=[n.a,n.b,n.c];for(var d=0;d<3;d++)if(o[d]===o[(d+1)%3]){p.push(i);break}}for(i=p.length-1;0<=i;i--){var f=p[i];for(this.faces.splice(f,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(f,1)}var m=this.vertices.length-l.length;return this.vertices=l,m},setFromPoints:function(e){this.vertices=[];for(var t=0,i=e.length;t<i;t++){var r=e[t];this.vertices.push(new Ft(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,i=0;i<t;i++)e[i]._id=i;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var r,n,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];o&&o.length===t&&(r=[]),a&&a.length===t&&(n=[]);for(i=0;i<t;i++){var s=e[i]._id;r&&r.push(o[s]),n&&n.push(a[s])}r&&(this.faceVertexUvs[0]=r),n&&(this.faceVertexUvs[1]=n)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var i in t)void 0!==t[i]&&(e[i]=t[i]);return e}for(var r=[],n=0;n<this.vertices.length;n++){var o=this.vertices[n];r.push(o.x,o.y,o.z)}var a=[],s=[],c={},l=[],h={},u=[],p={};for(n=0;n<this.faces.length;n++){var d=this.faces[n],f=void 0!==this.faceVertexUvs[0][n],m=0<d.normal.length(),g=0<d.vertexNormals.length,v=1!==d.color.r||1!==d.color.g||1!==d.color.b,y=0<d.vertexColors.length,_=0;if(_=M(_=M(_=M(_=M(_=M(_=M(_=M(_=M(_,0,0),1,!0),2,!1),3,f),4,m),5,g),6,v),7,y),a.push(_),a.push(d.a,d.b,d.c),a.push(d.materialIndex),f){var x=this.faceVertexUvs[0][n];a.push(S(x[0]),S(x[1]),S(x[2]))}if(m&&a.push(T(d.normal)),g){var b=d.vertexNormals;a.push(T(b[0]),T(b[1]),T(b[2]))}if(v&&a.push(E(d.color)),y){var w=d.vertexColors;a.push(E(w[0]),E(w[1]),E(w[2]))}}function M(e,t,i){return i?e|1<<t:e&~(1<<t)}function T(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==c[t]||(c[t]=s.length/3,s.push(e.x,e.y,e.z)),c[t]}function E(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==h[t]||(h[t]=l.length,l.push(e.getHex())),h[t]}function S(e){var t=e.x.toString()+e.y.toString();return void 0!==p[t]||(p[t]=u.length/2,u.push(e.x,e.y)),p[t]}return e.data={},e.data.vertices=r,e.data.normals=s,0<l.length&&(e.data.colors=l),0<u.length&&(e.data.uvs=[u]),e.data.faces=a,e},clone:function(){return(new rr).copy(this)},copy:function(e){var t,i,r,n,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,i=s.length;t<i;t++)this.vertices.push(s[t].clone());var c=e.colors;for(t=0,i=c.length;t<i;t++)this.colors.push(c[t].clone());var l=e.faces;for(t=0,i=l.length;t<i;t++)this.faces.push(l[t].clone());for(t=0,i=e.faceVertexUvs.length;t<i;t++){var h=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),r=0,n=h.length;r<n;r++){var u=h[r],p=[];for(o=0,a=u.length;o<a;o++){var d=u[o];p.push(d.clone())}this.faceVertexUvs[t].push(p)}}var f=e.morphTargets;for(t=0,i=f.length;t<i;t++){var m={};if(m.name=f[t].name,void 0!==f[t].vertices)for(m.vertices=[],r=0,n=f[t].vertices.length;r<n;r++)m.vertices.push(f[t].vertices[r].clone());if(void 0!==f[t].normals)for(m.normals=[],r=0,n=f[t].normals.length;r<n;r++)m.normals.push(f[t].normals[r].clone());this.morphTargets.push(m)}var g=e.morphNormals;for(t=0,i=g.length;t<i;t++){var v={};if(void 0!==g[t].vertexNormals)for(v.vertexNormals=[],r=0,n=g[t].vertexNormals.length;r<n;r++){var y=g[t].vertexNormals[r],_={};_.a=y.a.clone(),_.b=y.b.clone(),_.c=y.c.clone(),v.vertexNormals.push(_)}if(void 0!==g[t].faceNormals)for(v.faceNormals=[],r=0,n=g[t].faceNormals.length;r<n;r++)v.faceNormals.push(g[t].faceNormals[r].clone());this.morphNormals.push(v)}var x=e.skinWeights;for(t=0,i=x.length;t<i;t++)this.skinWeights.push(x[t].clone());var b=e.skinIndices;for(t=0,i=b.length;t<i;t++)this.skinIndices.push(b[t].clone());var w=e.lineDistances;for(t=0,i=w.length;t<i;t++)this.lineDistances.push(w[t]);var M=e.boundingBox;null!==M&&(this.boundingBox=M.clone());var T=e.boundingSphere;return null!==T&&(this.boundingSphere=T.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(nr.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(nr.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,i){e*=this.itemSize,i*=t.itemSize;for(var r=0,n=this.itemSize;r<n;r++)this.array[e+r]=t.array[i+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,i=0,r=0,n=e.length;r<n;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new vi),t[i++]=o.r,t[i++]=o.g,t[i++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,i=0,r=0,n=e.length;r<n;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new Nt),t[i++]=o.x,t[i++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,i=0,r=0,n=e.length;r<n;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new Ft),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,i=0,r=0,n=e.length;r<n;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new oi),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z,t[i++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this},setXYZ:function(e,t,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this},setXYZW:function(e,t,i,r,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=n,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),(or.prototype=Object.create(nr.prototype)).constructor=or,(ar.prototype=Object.create(nr.prototype)).constructor=ar,(sr.prototype=Object.create(nr.prototype)).constructor=sr,(cr.prototype=Object.create(nr.prototype)).constructor=cr,(lr.prototype=Object.create(nr.prototype)).constructor=lr,(hr.prototype=Object.create(nr.prototype)).constructor=hr,(ur.prototype=Object.create(nr.prototype)).constructor=ur,(pr.prototype=Object.create(nr.prototype)).constructor=pr,(dr.prototype=Object.create(nr.prototype)).constructor=dr,Object.assign(fr.prototype,{computeGroups:function(e){for(var t,i=[],r=void 0,n=e.faces,o=0;o<n.length;o++){var a=n[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,i.push(t)),t={start:3*o,materialIndex:r})}void 0!==t&&(t.count=3*o-t.start,i.push(t)),this.groups=i},fromGeometry:function(e){var t,i=e.faces,r=e.vertices,n=e.faceVertexUvs,o=n[0]&&0<n[0].length,a=n[1]&&0<n[1].length,s=e.morphTargets,c=s.length;if(0<c){t=[];for(var l=0;l<c;l++)t[l]=[];this.morphTargets.position=t}var h,u=e.morphNormals,p=u.length;if(0<p){h=[];for(l=0;l<p;l++)h[l]=[];this.morphTargets.normal=h}var d=e.skinIndices,f=e.skinWeights,m=d.length===r.length,g=f.length===r.length;0<r.length&&0===i.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(l=0;l<i.length;l++){var v=i[l];this.vertices.push(r[v.a],r[v.b],r[v.c]);var y=v.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var _=v.normal;this.normals.push(_,_,_)}var x,b=v.vertexColors;if(3===b.length)this.colors.push(b[0],b[1],b[2]);else{var w=v.color;this.colors.push(w,w,w)}if(!0===o)void 0!==(x=n[0][l])?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new Nt,new Nt,new Nt));if(!0===a)void 0!==(x=n[1][l])?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new Nt,new Nt,new Nt));for(var M=0;M<c;M++){var T=s[M].vertices;t[M].push(T[v.a],T[v.b],T[v.c])}for(M=0;M<p;M++){var E=u[M].vertexNormals[l];h[M].push(E.a,E.b,E.c)}m&&this.skinIndices.push(d[v.a],d[v.b],d[v.c]),g&&this.skinWeights.push(f[v.a],f[v.b],f[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var gr,vr,yr,_r,xr,br,wr,Mr,Tr,Er,Sr=1;function Ar(){Object.defineProperty(this,"id",{value:Sr+=2}),this.uuid=Bt.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function Rr(e,t,i,r,n,o){rr.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:n,depthSegments:o},this.fromBufferGeometry(new Lr(e,t,i,r,n,o)),this.mergeVertices()}function Lr(e,t,i,r,n,o){Ar.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:n,depthSegments:o};var L=this;e=e||1,t=t||1,i=i||1,r=Math.floor(r)||1,n=Math.floor(n)||1,o=Math.floor(o)||1;var P=[],C=[],O=[],I=[],D=0,B=0;function a(e,t,i,r,n,o,a,s,c,l,h){var u,p,d=o/c,f=a/l,m=o/2,g=a/2,v=s/2,y=c+1,_=l+1,x=0,b=0,w=new Ft;for(p=0;p<_;p++){var M=p*f-g;for(u=0;u<y;u++){var T=u*d-m;w[e]=T*r,w[t]=M*n,w[i]=v,C.push(w.x,w.y,w.z),w[e]=0,w[t]=0,w[i]=0<s?1:-1,O.push(w.x,w.y,w.z),I.push(u/c),I.push(1-p/l),x+=1}}for(p=0;p<l;p++)for(u=0;u<c;u++){var E=D+u+y*p,S=D+u+y*(p+1),A=D+(u+1)+y*(p+1),R=D+(u+1)+y*p;P.push(E,S,R),P.push(S,A,R),b+=6}L.addGroup(B,b,h),B+=b,D+=x}a("z","y","x",-1,-1,i,t,e,o,n,0),a("z","y","x",1,-1,i,t,-e,o,n,1),a("x","z","y",1,1,e,i,t,r,o,2),a("x","z","y",1,-1,e,i,-t,r,o,3),a("x","y","z",1,-1,e,t,i,r,n,4),a("x","y","z",-1,-1,e,t,-i,r,n,5),this.setIndex(P),this.addAttribute("position",new pr(C,3)),this.addAttribute("normal",new pr(O,3)),this.addAttribute("uv",new pr(I,2))}function Pr(e,t,i,r){rr.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r},this.fromBufferGeometry(new Cr(e,t,i,r)),this.mergeVertices()}function Cr(e,t,i,r){Ar.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};var n,o,a=(e=e||1)/2,s=(t=t||1)/2,c=Math.floor(i)||1,l=Math.floor(r)||1,h=c+1,u=l+1,p=e/c,d=t/l,f=[],m=[],g=[],v=[];for(o=0;o<u;o++){var y=o*d-s;for(n=0;n<h;n++){var _=n*p-a;m.push(_,-y,0),g.push(0,0,1),v.push(n/c),v.push(1-o/l)}}for(o=0;o<l;o++)for(n=0;n<c;n++){var x=n+h*o,b=n+h*(o+1),w=n+1+h*(o+1),M=n+1+h*o;f.push(x,b,M),f.push(b,w,M)}this.setIndex(f),this.addAttribute("position",new pr(m,3)),this.addAttribute("normal",new pr(g,3)),this.addAttribute("uv",new pr(v,2))}Ar.prototype=Object.assign(Object.create(t.prototype),{constructor:Ar,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(65535<mr(e)?ur:lr)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?("index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t)):this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new nr(t,arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,i){this.groups.push({start:e,count:t,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var i=this.attributes.normal;void 0!==i&&((new zt).getNormalMatrix(e).applyToBufferAttribute(i),i.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:(Er=new Ut,function(e){return Er.makeRotationX(e),this.applyMatrix(Er),this}),rotateY:(Tr=new Ut,function(e){return Tr.makeRotationY(e),this.applyMatrix(Tr),this}),rotateZ:(Mr=new Ut,function(e){return Mr.makeRotationZ(e),this.applyMatrix(Mr),this}),translate:(wr=new Ut,function(e,t,i){return wr.makeTranslation(e,t,i),this.applyMatrix(wr),this}),scale:(br=new Ut,function(e,t,i){return br.makeScale(e,t,i),this.applyMatrix(br),this}),lookAt:(xr=new Wi,function(e){xr.lookAt(e),xr.updateMatrix(),this.applyMatrix(xr.matrix)}),center:(_r=new Ft,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_r).negate(),this.translate(_r.x,_r.y,_r.z),this}),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var i=new pr(3*t.vertices.length,3),r=new pr(3*t.colors.length,3);if(this.addAttribute("position",i.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var n=new pr(t.lineDistances.length,1);this.addAttribute("lineDistance",n.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],i=0,r=e.length;i<r;i++){var n=e[i];t.push(n.x,n.y,n.z||0)}return this.addAttribute("position",new pr(t,3)),this},updateFromObject:function(e){var t,i=e.geometry;if(e.isMesh){var r=i.__directGeometry;if(!0===i.elementsNeedUpdate&&(r=void 0,i.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(i);r.verticesNeedUpdate=i.verticesNeedUpdate,r.normalsNeedUpdate=i.normalsNeedUpdate,r.colorsNeedUpdate=i.colorsNeedUpdate,r.uvsNeedUpdate=i.uvsNeedUpdate,r.groupsNeedUpdate=i.groupsNeedUpdate,i.verticesNeedUpdate=!1,i.normalsNeedUpdate=!1,i.colorsNeedUpdate=!1,i.uvsNeedUpdate=!1,i.groupsNeedUpdate=!1,i=r}return!0===i.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(i.vertices),t.needsUpdate=!0),i.verticesNeedUpdate=!1),!0===i.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(i.normals),t.needsUpdate=!0),i.normalsNeedUpdate=!1),!0===i.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(i.colors),t.needsUpdate=!0),i.colorsNeedUpdate=!1),i.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(i.uvs),t.needsUpdate=!0),i.uvsNeedUpdate=!1),i.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(i.lineDistances),t.needsUpdate=!0),i.lineDistancesNeedUpdate=!1),i.groupsNeedUpdate&&(i.computeGroups(e.geometry),this.groups=i.groups,i.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new fr).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new nr(t,3).copyVector3sArray(e.vertices)),0<e.normals.length){var i=new Float32Array(3*e.normals.length);this.addAttribute("normal",new nr(i,3).copyVector3sArray(e.normals))}if(0<e.colors.length){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new nr(r,3).copyColorsArray(e.colors))}if(0<e.uvs.length){var n=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new nr(n,2).copyVector2sArray(e.uvs))}if(0<e.uvs2.length){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new nr(o,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var s=[],c=e.morphTargets[a],l=0,h=c.length;l<h;l++){var u=c[l],p=new pr(3*u.length,3);s.push(p.copyVector3sArray(u))}this.morphAttributes[a]=s}if(0<e.skinIndices.length){var d=new pr(4*e.skinIndices.length,4);this.addAttribute("skinIndex",d.copyVector4sArray(e.skinIndices))}if(0<e.skinWeights.length){var f=new pr(4*e.skinWeights.length,4);this.addAttribute("skinWeight",f.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new li);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:(vr=new li,yr=new Ft,function(){null===this.boundingSphere&&(this.boundingSphere=new hi);var e=this.attributes.position;if(e){var t=this.boundingSphere.center;vr.setFromBufferAttribute(e),vr.getCenter(t);for(var i=0,r=0,n=e.count;r<n;r++)yr.x=e.getX(r),yr.y=e.getY(r),yr.z=e.getZ(r),i=Math.max(i,t.distanceToSquared(yr));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,i=this.groups;if(t.position){var r=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new nr(new Float32Array(r.length),3));else for(var n=t.normal.array,o=0,a=n.length;o<a;o++)n[o]=0;var s,c,l,h=t.normal.array,u=new Ft,p=new Ft,d=new Ft,f=new Ft,m=new Ft;if(e){var g=e.array;0===i.length&&this.addGroup(0,g.length);for(var v=0,y=i.length;v<y;++v){var _=i[v],x=_.start;for(o=x,a=x+_.count;o<a;o+=3)s=3*g[o+0],c=3*g[o+1],l=3*g[o+2],u.fromArray(r,s),p.fromArray(r,c),d.fromArray(r,l),f.subVectors(d,p),m.subVectors(u,p),f.cross(m),h[s]+=f.x,h[s+1]+=f.y,h[s+2]+=f.z,h[c]+=f.x,h[c+1]+=f.y,h[c+2]+=f.z,h[l]+=f.x,h[l+1]+=f.y,h[l+2]+=f.z}}else for(o=0,a=r.length;o<a;o+=9)u.fromArray(r,o),p.fromArray(r,o+3),d.fromArray(r,o+6),f.subVectors(d,p),m.subVectors(u,p),f.cross(m),h[o]=f.x,h[o+1]=f.y,h[o+2]=f.z,h[o+3]=f.x,h[o+4]=f.y,h[o+5]=f.z,h[o+6]=f.x,h[o+7]=f.y,h[o+8]=f.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var i=this.attributes;for(var r in i)if(void 0!==e.attributes[r])for(var n=i[r].array,o=e.attributes[r],a=o.array,s=0,c=o.itemSize*t;s<a.length;s++,c++)n[c]=a[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:(gr=new Ft,function(){for(var e=this.attributes.normal,t=0,i=e.count;t<i;t++)gr.x=e.getX(t),gr.y=e.getY(t),gr.z=e.getZ(t),gr.normalize(),e.setXYZ(t,gr.x,gr.y,gr.z)}),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Ar,t=this.index.array,i=this.attributes;for(var r in i){for(var n=i[r],o=n.array,a=n.itemSize,s=new o.constructor(t.length*a),c=0,l=0,h=0,u=t.length;h<u;h++){c=t[h]*a;for(var p=0;p<a;p++)s[l++]=o[c++]}e.addAttribute(r,new nr(s,a))}var d=this.groups;for(h=0,u=d.length;h<u;h++){var f=d[h];e.addGroup(f.start,f.count,f.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),0<Object.keys(this.userData).length&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var i in t)void 0!==t[i]&&(e[i]=t[i]);return e}e.data={attributes:{}};var r=this.index;if(null!==r){var n=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:n}}var o=this.attributes;for(var i in o){var a=o[i];n=Array.prototype.slice.call(a.array);e.data.attributes[i]={itemSize:a.itemSize,type:a.array.constructor.name,array:n,normalized:a.normalized}}var s=this.groups;0<s.length&&(e.data.groups=JSON.parse(JSON.stringify(s)));var c=this.boundingSphere;return null!==c&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e},clone:function(){return(new Ar).copy(this)},copy:function(e){var t,i,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone());var o=e.attributes;for(t in o){var a=o[t];this.addAttribute(t,a.clone())}var s=e.morphAttributes;for(t in s){var c=[],l=s[t];for(i=0,r=l.length;i<r;i++)c.push(l[i].clone());this.morphAttributes[t]=c}var h=e.groups;for(i=0,r=h.length;i<r;i++){var u=h[i];this.addGroup(u.start,u.count,u.materialIndex)}var p=e.boundingBox;null!==p&&(this.boundingBox=p.clone());var d=e.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),(Rr.prototype=Object.create(rr.prototype)).constructor=Rr,(Lr.prototype=Object.create(Ar.prototype)).constructor=Lr,(Pr.prototype=Object.create(rr.prototype)).constructor=Pr,(Cr.prototype=Object.create(Ar.prototype)).constructor=Cr;var Or,Ir,Dr,Br,Nr,Ur,kr,Fr,zr,jr,Hr,Gr,Vr,Wr,Xr,qr,Yr,Jr,Zr,Kr,Qr,$r,en,tn,rn=0;function nn(){Object.defineProperty(this,"id",{value:rn++}),this.uuid=Bt.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=Y,this.side=B,this.flatShading=!1,this.vertexColors=Te,this.opacity=1,this.transparent=!1,this.blendSrc=D,this.blendDst=N,this.blendEquation=E,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=re,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function on(e){nn.call(this),this.type="MeshBasicMaterial",this.color=new vi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ce,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function an(e){nn.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function sn(e,t){this.origin=void 0!==e?e:new Ft,this.direction=void 0!==t?t:new Ft}function cn(e,t){this.start=void 0!==e?e:new Ft,this.end=void 0!==t?t:new Ft}function ln(e,t,i){this.a=void 0!==e?e:new Ft,this.b=void 0!==t?t:new Ft,this.c=void 0!==i?i:new Ft}function hn(e,t){Wi.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Ar,this.material=void 0!==t?t:new on({color:16777215*Math.random()}),this.drawMode=Mt,this.updateMorphTargets()}function un(o,i,a,r){var s,c,l,h=new vi(0),u=0;function p(e,t){i.buffers.color.setClear(e.r,e.g,e.b,t,r)}return{getClearColor:function(){return h},setClearColor:function(e,t){h.set(e),p(h,u=void 0!==t?t:1)},getClearAlpha:function(){return u},setClearAlpha:function(e){p(h,u=e)},render:function(e,t,i,r){var n=t.background;null===n?p(h,u):n&&n.isColor&&(p(n,1),r=!0),(o.autoClear||r)&&o.clear(o.autoClearColor,o.autoClearDepth,o.autoClearStencil),n&&n.isCubeTexture?(void 0===l&&((l=new hn(new Lr(1,1,1),new an({uniforms:bi.cube.uniforms,vertexShader:bi.cube.vertexShader,fragmentShader:bi.cube.fragmentShader,side:Me,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),l.geometry.removeAttribute("uv"),l.onBeforeRender=function(e,t,i){this.matrixWorld.copyPosition(i.matrixWorld)},a.update(l)),l.material.uniforms.tCube.value=n,e.push(l,l.geometry,l.material,0,null)):n&&n.isTexture&&(void 0===s&&(s=new qi(-1,1,1,-1,0,1),c=new hn(new Cr(2,2),new on({depthTest:!1,depthWrite:!1,fog:!1})),a.update(c)),c.material.map=n,o.renderBufferDirect(s,null,c.geometry,c.material,c,null))}}}function pn(i,n,o){var a;this.setMode=function(e){a=e},this.render=function(e,t){i.drawArrays(a,e,t),o.update(t,a)},this.renderInstances=function(e,t,i){var r=n.get("ANGLE_instanced_arrays");null!==r?(r.drawArraysInstancedANGLE(a,t,i,e.maxInstancedCount),o.update(i,a,e.maxInstancedCount)):console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}function dn(t,i,e){var r;function n(e){if("highp"===e){if(0<t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision&&0<t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision)return"highp";e="mediump"}return"mediump"===e&&0<t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision&&0<t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision?"mediump":"lowp"}var o=void 0!==e.precision?e.precision:"highp",a=n(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);var s=!0===e.logarithmicDepthBuffer,c=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),l=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=t.getParameter(t.MAX_TEXTURE_SIZE),u=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),p=t.getParameter(t.MAX_VERTEX_ATTRIBS),d=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),f=t.getParameter(t.MAX_VARYING_VECTORS),m=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),g=0<l,v=!!i.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==r)return r;var e=i.get("EXT_texture_filter_anisotropic");return r=null!==e?t.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:n,precision:o,logarithmicDepthBuffer:s,maxTextures:c,maxVertexTextures:l,maxTextureSize:h,maxCubemapSize:u,maxAttributes:p,maxVertexUniforms:d,maxVaryings:f,maxFragmentUniforms:m,vertexTextures:g,floatFragmentTextures:v,floatVertexTextures:g&&v}}function fn(){var h=this,u=null,p=0,d=!1,f=!1,m=new ui,g=new zt,v={value:null,needsUpdate:!1};function y(){v.value!==u&&(v.value=u,v.needsUpdate=0<p),h.numPlanes=p,h.numIntersection=0}function _(e,t,i,r){var n=null!==e?e.length:0,o=null;if(0!==n){if(o=v.value,!0!==r||null===o){var a=i+4*n,s=t.matrixWorldInverse;g.getNormalMatrix(s),(null===o||o.length<a)&&(o=new Float32Array(a));for(var c=0,l=i;c!==n;++c,l+=4)m.copy(e[c]).applyMatrix4(s,g),m.normal.toArray(o,l),o[l+3]=m.constant}v.value=o,v.needsUpdate=!0}return h.numPlanes=n,o}this.uniform=v,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,i){var r=0!==e.length||t||0!==p||d;return d=t,u=_(e,i,0),p=e.length,r},this.beginShadows=function(){f=!0,_(null)},this.endShadows=function(){f=!1,y()},this.setState=function(e,t,i,r,n,o){if(!d||null===e||0===e.length||f&&!i)f?_(null):y();else{var a=f?0:p,s=4*a,c=n.clippingState||null;v.value=c,c=_(e,r,s,o);for(var l=0;l!==s;++l)c[l]=u[l];n.clippingState=c,this.numIntersection=t?this.numPlanes:0,this.numPlanes+=a}}}function mn(i){var r={};return{get:function(e){if(void 0!==r[e])return r[e];var t;switch(e){case"WEBGL_depth_texture":t=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":t=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":t=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":t=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:t=i.getExtension(e)}return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),r[e]=t}}}function gn(u,p,o){var a={},d={};function s(e){var t=e.target,i=a[t.id];for(var r in null!==i.index&&p.remove(i.index),i.attributes)p.remove(i.attributes[r]);t.removeEventListener("dispose",s),delete a[t.id];var n=d[t.id];n&&(p.remove(n),delete d[t.id]),(n=d[i.id])&&(p.remove(n),delete d[i.id]),o.memory.geometries--}return{get:function(e,t){var i=a[t.id];return i||(t.addEventListener("dispose",s),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Ar).setFromObject(e)),i=t._bufferGeometry),a[t.id]=i,o.memory.geometries++,i)},update:function(e){var t=e.index,i=e.attributes;for(var r in null!==t&&p.update(t,u.ELEMENT_ARRAY_BUFFER),i)p.update(i[r],u.ARRAY_BUFFER);var n=e.morphAttributes;for(var r in n)for(var o=n[r],a=0,s=o.length;a<s;a++)p.update(o[a],u.ARRAY_BUFFER)},getWireframeAttribute:function(e){var t=d[e.id];if(t)return t;var i,r=[],n=e.index,o=e.attributes;if(null!==n)for(var a=0,s=(i=n.array).length;a<s;a+=3){var c=i[a+0],l=i[a+1],h=i[a+2];r.push(c,l,l,h,h,c)}else for(a=0,s=(i=o.position.array).length/3-1;a<s;a+=3)c=a+0,l=a+1,h=a+2,r.push(c,l,l,h,h,c);return t=new(65535<mr(r)?ur:lr)(r,1),p.update(t,u.ELEMENT_ARRAY_BUFFER),d[e.id]=t}}}function vn(i,n,o){var a,s,c;this.setMode=function(e){a=e},this.setIndex=function(e){s=e.type,c=e.bytesPerElement},this.render=function(e,t){i.drawElements(a,t,s,e*c),o.update(t,a)},this.renderInstances=function(e,t,i){var r=n.get("ANGLE_instanced_arrays");null!==r?(r.drawElementsInstancedANGLE(a,i,s,t*c,e.maxInstancedCount),o.update(i,a,e.maxInstancedCount)):console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}function yn(r){var n={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:n,programs:null,autoReset:!0,reset:function(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0},update:function(e,t,i){switch(i=i||1,n.calls++,t){case r.TRIANGLES:n.triangles+=i*(e/3);break;case r.TRIANGLE_STRIP:case r.TRIANGLE_FAN:n.triangles+=i*(e-2);break;case r.LINES:n.lines+=i*(e/2);break;case r.LINE_STRIP:n.lines+=i*(e-1);break;case r.LINE_LOOP:n.lines+=i*e;break;case r.POINTS:n.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",t)}}}}function _n(e,t){return Math.abs(t[1])-Math.abs(e[1])}function xn(d){var f={},m=new Float32Array(8);return{update:function(e,t,i,r){var n=e.morphTargetInfluences,o=n.length,a=f[t.id];if(void 0===a){a=[];for(var s=0;s<o;s++)a[s]=[s,0];f[t.id]=a}var c=i.morphTargets&&t.morphAttributes.position,l=i.morphNormals&&t.morphAttributes.normal;for(s=0;s<o;s++)0!==(h=a[s])[1]&&(c&&t.removeAttribute("morphTarget"+s),l&&t.removeAttribute("morphNormal"+s));for(s=0;s<o;s++)(h=a[s])[0]=s,h[1]=n[s];for(a.sort(_n),s=0;s<8;s++){var h;if(h=a[s]){var u=h[0],p=h[1];if(p){c&&t.addAttribute("morphTarget"+s,c[u]),l&&t.addAttribute("morphNormal"+s,l[u]),m[s]=p;continue}}m[s]=0}r.getUniforms().setValue(d,"morphTargetInfluences",m)}}}function bn(n,o){var a={};return{update:function(e){var t=o.render.frame,i=e.geometry,r=n.get(e,i);return a[r.id]!==t&&(i.isGeometry&&r.updateFromObject(e),n.update(r),a[r.id]=t),r},dispose:function(){a={}}}}function wn(e,t,i,r,n,o,a,s,c,l){ni.call(this,e=void 0!==e?e:[],t=void 0!==t?t:me,i,r,n,o,a,s,c,l),this.flipY=!1}nn.prototype=Object.assign(Object.create(t.prototype),{constructor:nn,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var i=e[t];if(void 0!==i)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]="overdraw"===t?Number(i):i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var i in e){var r=e[i];delete r.metadata,t.push(r)}return t}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearCoat&&(i.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(i.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,i.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Y&&(i.blending=this.blending),!0===this.flatShading&&(i.flatShading=this.flatShading),this.side!==B&&(i.side=this.side),this.vertexColors!==Te&&(i.vertexColors=this.vertexColors),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,0!==this.rotation&&(i.rotation=this.rotation),1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),0<this.alphaTest&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),1<this.wireframeLinewidth&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(i.morphTargets=!0),!0===this.skinning&&(i.skinning=!0),!1===this.visible&&(i.visible=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t){var n=r(e.textures),o=r(e.images);0<n.length&&(i.textures=n),0<o.length&&(i.images=o)}return i},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,i=null;if(null!==t){var r=t.length;i=new Array(r);for(var n=0;n!==r;++n)i[n]=t[n].clone()}return this.clippingPlanes=i,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),((on.prototype=Object.create(nn.prototype)).constructor=on).prototype.isMeshBasicMaterial=!0,on.prototype.copy=function(e){return nn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},((an.prototype=Object.create(nn.prototype)).constructor=an).prototype.isShaderMaterial=!0,an.prototype.copy=function(e){return nn.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=mi.clone(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},an.prototype.toJSON=function(e){var t=nn.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(sn.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Ft),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:(Hr=new Ft,function(e){return this.origin.copy(this.at(e,Hr)),this}),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Ft),t.subVectors(e,this.origin);var i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:(jr=new Ft,function(e){var t=jr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(jr.copy(this.direction).multiplyScalar(t).add(this.origin),jr.distanceToSquared(e))}),distanceSqToSegment:(kr=new Ft,Fr=new Ft,zr=new Ft,function(e,t,i,r){kr.copy(e).add(t).multiplyScalar(.5),Fr.copy(t).sub(e).normalize(),zr.copy(this.origin).sub(kr);var n,o,a,s,c=.5*e.distanceTo(t),l=-this.direction.dot(Fr),h=zr.dot(this.direction),u=-zr.dot(Fr),p=zr.lengthSq(),d=Math.abs(1-l*l);if(0<d)if(o=l*h-u,s=c*d,0<=(n=l*u-h))if(-s<=o)if(o<=s){var f=1/d;a=(n*=f)*(n+l*(o*=f)+2*h)+o*(l*n+o+2*u)+p}else o=c,a=-(n=Math.max(0,-(l*o+h)))*n+o*(o+2*u)+p;else o=-c,a=-(n=Math.max(0,-(l*o+h)))*n+o*(o+2*u)+p;else o<=-s?a=-(n=Math.max(0,-(-l*c+h)))*n+(o=0<n?-c:Math.min(Math.max(-c,-u),c))*(o+2*u)+p:o<=s?(n=0,a=(o=Math.min(Math.max(-c,-u),c))*(o+2*u)+p):a=-(n=Math.max(0,-(l*c+h)))*n+(o=0<n?c:Math.min(Math.max(-c,-u),c))*(o+2*u)+p;else o=0<l?-c:c,a=-(n=Math.max(0,-(l*o+h)))*n+o*(o+2*u)+p;return i&&i.copy(this.direction).multiplyScalar(n).add(this.origin),r&&r.copy(Fr).multiplyScalar(o).add(kr),a}),intersectSphere:(Ur=new Ft,function(e,t){Ur.subVectors(e.center,this.origin);var i=Ur.dot(this.direction),r=Ur.dot(Ur)-i*i,n=e.radius*e.radius;if(n<r)return null;var o=Math.sqrt(n-r),a=i-o,s=i+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)}),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var i=-(this.origin.dot(e.normal)+e.constant)/t;return 0<=i?i:null},intersectPlane:function(e,t){var i=this.distanceToPlane(e);return null===i?null:this.at(i,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var i,r,n,o,a,s,c=1/this.direction.x,l=1/this.direction.y,h=1/this.direction.z,u=this.origin;return 0<=c?(i=(e.min.x-u.x)*c,r=(e.max.x-u.x)*c):(i=(e.max.x-u.x)*c,r=(e.min.x-u.x)*c),0<=l?(n=(e.min.y-u.y)*l,o=(e.max.y-u.y)*l):(n=(e.max.y-u.y)*l,o=(e.min.y-u.y)*l),o<i||r<n?null:((i<n||i!=i)&&(i=n),(o<r||r!=r)&&(r=o),0<=h?(a=(e.min.z-u.z)*h,s=(e.max.z-u.z)*h):(a=(e.max.z-u.z)*h,s=(e.min.z-u.z)*h),s<i||r<a?null:((i<a||i!=i)&&(i=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(0<=i?i:r,t)))},intersectsBox:(Nr=new Ft,function(e){return null!==this.intersectBox(e,Nr)}),intersectTriangle:(Or=new Ft,Ir=new Ft,Dr=new Ft,Br=new Ft,function(e,t,i,r,n){Ir.subVectors(t,e),Dr.subVectors(i,e),Br.crossVectors(Ir,Dr);var o,a=this.direction.dot(Br);if(0<a){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}Or.subVectors(this.origin,e);var s=o*this.direction.dot(Dr.crossVectors(Or,Dr));if(s<0)return null;var c=o*this.direction.dot(Ir.cross(Or));if(c<0)return null;if(a<s+c)return null;var l=-o*Or.dot(Br);return l<0?null:this.at(l/a,n)}),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(cn.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Ft),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Ft),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Ft),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(Gr=new Ft,Vr=new Ft,function(e,t){Gr.subVectors(e,this.start),Vr.subVectors(this.end,this.start);var i=Vr.dot(Vr),r=Vr.dot(Gr)/i;return t&&(r=Bt.clamp(r,0,1)),r}),closestPointToPoint:function(e,t,i){var r=this.closestPointToPointParameter(e,t);return void 0===i&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),i=new Ft),this.delta(i).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Object.assign(ln,{getNormal:(Jr=new Ft,function(e,t,i,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Ft),r.subVectors(i,t),Jr.subVectors(e,t),r.cross(Jr);var n=r.lengthSq();return 0<n?r.multiplyScalar(1/Math.sqrt(n)):r.set(0,0,0)}),getBarycoord:(Xr=new Ft,qr=new Ft,Yr=new Ft,function(e,t,i,r,n){Xr.subVectors(r,t),qr.subVectors(i,t),Yr.subVectors(e,t);var o=Xr.dot(Xr),a=Xr.dot(qr),s=Xr.dot(Yr),c=qr.dot(qr),l=qr.dot(Yr),h=o*c-a*a;if(void 0===n&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),n=new Ft),0===h)return n.set(-2,-1,-1);var u=1/h,p=(c*s-a*l)*u,d=(o*l-a*s)*u;return n.set(1-p-d,d,p)}),containsPoint:(Wr=new Ft,function(e,t,i,r){return ln.getBarycoord(e,t,i,r,Wr),0<=Wr.x&&0<=Wr.y&&Wr.x+Wr.y<=1})}),Object.assign(ln.prototype,{set:function(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this},setFromPointsAndIndices:function(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:(en=new Ft,tn=new Ft,function(){return en.subVectors(this.c,this.b),tn.subVectors(this.a,this.b),.5*en.cross(tn).length()}),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Ft),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return ln.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Ft),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return ln.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return ln.containsPoint(e,this.a,this.b,this.c)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:(Zr=new ui,Kr=[new cn,new cn,new cn],Qr=new Ft,$r=new Ft,function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Ft);var i=1/0;if(Zr.setFromCoplanarPoints(this.a,this.b,this.c),Zr.projectPoint(e,Qr),!0===this.containsPoint(Qr))t.copy(Qr);else{Kr[0].set(this.a,this.b),Kr[1].set(this.b,this.c),Kr[2].set(this.c,this.a);for(var r=0;r<Kr.length;r++){Kr[r].closestPointToPoint(Qr,!0,$r);var n=Qr.distanceToSquared($r);n<i&&(i=n,t.copy($r))}}return t}),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),hn.prototype=Object.assign(Object.create(Wi.prototype),{constructor:hn,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return Wi.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,i,r=this.geometry;if(r.isBufferGeometry){var n=r.morphAttributes,o=Object.keys(n);if(0<o.length){var a=n[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)i=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=e}}else{var s=r.morphTargets;if(void 0!==s&&0<s.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)i=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=e}},raycast:function(){var F=new Ut,z=new sn,j=new hi,H=new Ft,G=new Ft,V=new Ft,W=new Ft,X=new Ft,q=new Ft,Y=new Nt,J=new Nt,Z=new Nt,s=new Ft,K=new Ft,l=new Ft;function Q(e,t,i,r,n,o,a){return ln.getBarycoord(e,t,i,r,s),n.multiplyScalar(s.x),o.multiplyScalar(s.y),a.multiplyScalar(s.z),n.add(o).add(a),n.clone()}function $(e,t,i,r,n,o,a,s){if(null===(t.side===Me?r.intersectTriangle(a,o,n,!0,s):r.intersectTriangle(n,o,a,t.side!==te,s)))return null;l.copy(s),l.applyMatrix4(e.matrixWorld);var c=i.ray.origin.distanceTo(l);return c<i.near||c>i.far?null:{distance:c,point:l.clone(),object:e}}function ee(e,t,i,r,n,o,a,s,c){H.fromBufferAttribute(n,a),G.fromBufferAttribute(n,s),V.fromBufferAttribute(n,c);var l=$(e,t,i,r,H,G,V,K);if(l){o&&(Y.fromBufferAttribute(o,a),J.fromBufferAttribute(o,s),Z.fromBufferAttribute(o,c),l.uv=Q(K,H,G,V,Y,J,Z));var h=new Yi(a,s,c);ln.getNormal(H,G,V,h.normal),l.face=h}return l}return function(e,t){var i,r=this.geometry,n=this.material,o=this.matrixWorld;if(void 0!==n&&(null===r.boundingSphere&&r.computeBoundingSphere(),j.copy(r.boundingSphere),j.applyMatrix4(o),!1!==e.ray.intersectsSphere(j)&&(F.getInverse(o),z.copy(e.ray).applyMatrix4(F),null===r.boundingBox||!1!==z.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var a,s,c,l,h,u,p,d,f,m=r.index,g=r.attributes.position,v=r.attributes.uv,y=r.groups,_=r.drawRange;if(null!==m)if(Array.isArray(n))for(l=0,u=y.length;l<u;l++)for(f=n[(d=y[l]).materialIndex],h=Math.max(d.start,_.start),p=Math.min(d.start+d.count,_.start+_.count);h<p;h+=3)a=m.getX(l),s=m.getX(l+1),c=m.getX(l+2),(i=ee(this,f,e,z,g,v,a,s,c))&&(i.faceIndex=Math.floor(l/3),t.push(i));else for(l=Math.max(0,_.start),u=Math.min(m.count,_.start+_.count);l<u;l+=3)a=m.getX(l),s=m.getX(l+1),c=m.getX(l+2),(i=ee(this,n,e,z,g,v,a,s,c))&&(i.faceIndex=Math.floor(l/3),t.push(i));else if(void 0!==g)if(Array.isArray(n))for(l=0,u=y.length;l<u;l++)for(f=n[(d=y[l]).materialIndex],h=Math.max(d.start,_.start),p=Math.min(d.start+d.count,_.start+_.count);h<p;h+=3)(i=ee(this,f,e,z,g,v,a=h,s=h+1,c=h+2))&&(i.faceIndex=Math.floor(l/3),t.push(i));else for(l=Math.max(0,_.start),u=Math.min(g.count,_.start+_.count);l<u;l+=3)(i=ee(this,n,e,z,g,v,a=l,s=l+1,c=l+2))&&(i.faceIndex=Math.floor(l/3),t.push(i))}else if(r.isGeometry){var x,b,w,M,T=Array.isArray(n),E=r.vertices,S=r.faces,A=r.faceVertexUvs[0];0<A.length&&(M=A);for(var R=0,L=S.length;R<L;R++){var P=S[R],C=T?n[P.materialIndex]:n;if(void 0!==C){if(x=E[P.a],b=E[P.b],w=E[P.c],!0===C.morphTargets){var O=r.morphTargets,I=this.morphTargetInfluences;H.set(0,0,0),G.set(0,0,0),V.set(0,0,0);for(var D=0,B=O.length;D<B;D++){var N=I[D];if(0!==N){var U=O[D].vertices;H.addScaledVector(W.subVectors(U[P.a],x),N),G.addScaledVector(X.subVectors(U[P.b],b),N),V.addScaledVector(q.subVectors(U[P.c],w),N)}}H.add(x),G.add(b),V.add(w),x=H,b=G,w=V}if(i=$(this,C,e,z,x,b,w,K)){if(M&&M[R]){var k=M[R];Y.copy(k[0]),J.copy(k[1]),Z.copy(k[2]),i.uv=Q(K,x,b,w,Y,J,Z)}i.face=P,i.faceIndex=R,t.push(i)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),((wn.prototype=Object.create(ni.prototype)).constructor=wn).prototype.isCubeTexture=!0,Object.defineProperty(wn.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var Mn=new ni,Tn=new wn;function En(){this.seq=[],this.map={}}var Sn=[],An=[],Rn=new Float32Array(16),Ln=new Float32Array(9),Pn=new Float32Array(4);function Cn(e,t,i){var r=e[0];if(r<=0||0<r)return e;var n=t*i,o=Sn[n];if(void 0===o&&(o=new Float32Array(n),Sn[n]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=i,e[a].toArray(o,s)}return o}function On(e,t){if(e.length!==t.length)return!1;for(var i=0,r=e.length;i<r;i++)if(e[i]!==t[i])return!1;return!0}function In(e,t){for(var i=0,r=t.length;i<r;i++)e[i]=t[i]}function Dn(e,t){var i=An[t];void 0===i&&(i=new Int32Array(t),An[t]=i);for(var r=0;r!==t;++r)i[r]=e.allocTextureUnit();return i}function Bn(e,t){var i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function Nn(e,t){var i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function Un(e,t){var i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(On(i,t))return;e.uniform2fv(this.addr,t),In(i,t)}}function kn(e,t){var i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(void 0!==t.r)i[0]===t.r&&i[1]===t.g&&i[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(On(i,t))return;e.uniform3fv(this.addr,t),In(i,t)}}function Fn(e,t){var i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(On(i,t))return;e.uniform4fv(this.addr,t),In(i,t)}}function zn(e,t){var i=this.cache,r=t.elements;if(void 0===r){if(On(i,t))return;e.uniformMatrix2fv(this.addr,!1,t),In(i,t)}else{if(On(i,r))return;Pn.set(r),e.uniformMatrix2fv(this.addr,!1,Pn),In(i,r)}}function jn(e,t){var i=this.cache,r=t.elements;if(void 0===r){if(On(i,t))return;e.uniformMatrix3fv(this.addr,!1,t),In(i,t)}else{if(On(i,r))return;Ln.set(r),e.uniformMatrix3fv(this.addr,!1,Ln),In(i,r)}}function Hn(e,t){var i=this.cache,r=t.elements;if(void 0===r){if(On(i,t))return;e.uniformMatrix4fv(this.addr,!1,t),In(i,t)}else{if(On(i,r))return;Rn.set(r),e.uniformMatrix4fv(this.addr,!1,Rn),In(i,r)}}function Gn(e,t,i){var r=this.cache,n=i.allocTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),i.setTexture2D(t||Mn,n)}function Vn(e,t,i){var r=this.cache,n=i.allocTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),i.setTextureCube(t||Tn,n)}function Wn(e,t){var i=this.cache;On(i,t)||(e.uniform2iv(this.addr,t),In(i,t))}function Xn(e,t){var i=this.cache;On(i,t)||(e.uniform3iv(this.addr,t),In(i,t))}function qn(e,t){var i=this.cache;On(i,t)||(e.uniform4iv(this.addr,t),In(i,t))}function Yn(e,t){var i=this.cache;On(i,t)||(e.uniform1fv(this.addr,t),In(i,t))}function Jn(e,t){var i=this.cache;On(i,t)||(e.uniform1iv(this.addr,t),In(i,t))}function Zn(e,t){var i=this.cache,r=Cn(t,this.size,2);On(i,r)||(e.uniform2fv(this.addr,r),this.updateCache(r))}function Kn(e,t){var i=this.cache,r=Cn(t,this.size,3);On(i,r)||(e.uniform3fv(this.addr,r),this.updateCache(r))}function Qn(e,t){var i=this.cache,r=Cn(t,this.size,4);On(i,r)||(e.uniform4fv(this.addr,r),this.updateCache(r))}function $n(e,t){var i=this.cache,r=Cn(t,this.size,4);On(i,r)||(e.uniformMatrix2fv(this.addr,!1,r),this.updateCache(r))}function eo(e,t){var i=this.cache,r=Cn(t,this.size,9);On(i,r)||(e.uniformMatrix3fv(this.addr,!1,r),this.updateCache(r))}function to(e,t){var i=this.cache,r=Cn(t,this.size,16);On(i,r)||(e.uniformMatrix4fv(this.addr,!1,r),this.updateCache(r))}function io(e,t,i){var r=this.cache,n=t.length,o=Dn(i,n);!1===On(r,o)&&(e.uniform1iv(this.addr,o),In(r,o));for(var a=0;a!==n;++a)i.setTexture2D(t[a]||Mn,o[a])}function ro(e,t,i){var r=this.cache,n=t.length,o=Dn(i,n);!1===On(r,o)&&(e.uniform1iv(this.addr,o),In(r,o));for(var a=0;a!==n;++a)i.setTextureCube(t[a]||Tn,o[a])}function no(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Bn;case 35664:return Un;case 35665:return kn;case 35666:return Fn;case 35674:return zn;case 35675:return jn;case 35676:return Hn;case 35678:case 36198:return Gn;case 35680:return Vn;case 5124:case 35670:return Nn;case 35667:case 35671:return Wn;case 35668:case 35672:return Xn;case 35669:case 35673:return qn}}(t.type)}function oo(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Yn;case 35664:return Zn;case 35665:return Kn;case 35666:return Qn;case 35674:return $n;case 35675:return eo;case 35676:return to;case 35678:return io;case 35680:return ro;case 5124:case 35670:return Jn;case 35667:case 35671:return Wn;case 35668:case 35672:return Xn;case 35669:case 35673:return qn}}(t.type)}function ao(e){this.id=e,En.call(this)}oo.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),In(t,e)},ao.prototype.setValue=function(e,t){for(var i=this.seq,r=0,n=i.length;r!==n;++r){var o=i[r];o.setValue(e,t[o.id])}};var so=/([\w\d_]+)(\])?(\[|\.)?/g;function co(e,t){e.seq.push(t),e.map[t.id]=t}function lo(e,t,i){var r=e.name,n=r.length;for(so.lastIndex=0;;){var o=so.exec(r),a=so.lastIndex,s=o[1],c="]"===o[2],l=o[3];if(c&&(s|=0),void 0===l||"["===l&&a+2===n){co(i,void 0===l?new no(s,e,t):new oo(s,e,t));break}var h=i.map[s];void 0===h&&co(i,h=new ao(s)),i=h}}function ho(e,t,i){En.call(this),this.renderer=i;for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<r;++n){var o=e.getActiveUniform(t,n);lo(o,e.getUniformLocation(t,o.name),this)}}function uo(e,t,i){var r=e.createShader(t);return e.shaderSource(r,i),e.compileShader(r),!1===e.getShaderParameter(r,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),function(e){for(var t=e.split("\n"),i=0;i<t.length;i++)t[i]=i+1+": "+t[i];return t.join("\n")}(i)),r}ho.prototype.setValue=function(e,t,i){var r=this.map[t];void 0!==r&&r.setValue(e,i,this.renderer)},ho.prototype.setOptional=function(e,t,i){var r=t[i];void 0!==r&&this.setValue(e,i,r)},ho.upload=function(e,t,i,r){for(var n=0,o=t.length;n!==o;++n){var a=t[n],s=i[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}},ho.seqWithValue=function(e,t){for(var i=[],r=0,n=e.length;r!==n;++r){var o=e[r];o.id in t&&i.push(o)}return i};var po=0;function fo(e){switch(e){case Tt:return["Linear","( value )"];case Et:return["sRGB","( value )"];case At:return["RGBE","( value )"];case Rt:return["RGBM","( value, 7.0 )"];case Lt:return["RGBM","( value, 16.0 )"];case Pt:return["RGBD","( value, 256.0 )"];case St:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function mo(e,t){var i=fo(t);return"vec4 "+e+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function go(e){return""!==e}function vo(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function yo(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function _o(e){return e.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(e,t){var i=fi[t];if(void 0===i)throw new Error("Can not resolve #include <"+t+">");return _o(i)})}function xo(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,i,r){for(var n="",o=parseInt(t);o<parseInt(i);o++)n+=r.replace(/\[ i \]/g,"[ "+o+" ]");return n})}function bo(e,t,i,r,n,o){var a=e.context,s=r.defines,c=n.vertexShader,l=n.fragmentShader,h="SHADOWMAP_TYPE_BASIC";o.shadowMapType===U?h="SHADOWMAP_TYPE_PCF":o.shadowMapType===k&&(h="SHADOWMAP_TYPE_PCF_SOFT");var u="ENVMAP_TYPE_CUBE",p="ENVMAP_MODE_REFLECTION",d="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(r.envMap.mapping){case me:case ge:u="ENVMAP_TYPE_CUBE";break;case xe:case be:u="ENVMAP_TYPE_CUBE_UV";break;case ve:case ye:u="ENVMAP_TYPE_EQUIREC";break;case _e:u="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case ge:case ye:p="ENVMAP_MODE_REFRACTION"}switch(r.combine){case ce:d="ENVMAP_BLENDING_MULTIPLY";break;case le:d="ENVMAP_BLENDING_MIX";break;case he:d="ENVMAP_BLENDING_ADD"}}var f,m,g,v,y,_,x,b,w=0<e.gammaFactor?e.gammaFactor:1,M=(f=r.extensions,m=o,g=t,[(f=f||{}).derivatives||m.envMapCubeUV||m.bumpMap||m.normalMap&&!m.objectSpaceNormalMap||m.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(f.fragDepth||m.logarithmicDepthBuffer)&&g.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",f.drawBuffers&&g.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(f.shaderTextureLOD||m.envMap)&&g.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(go).join("\n")),T=function(e){var t=[];for(var i in e){var r=e[i];!1!==r&&t.push("#define "+i+" "+r)}return t.join("\n")}(s),E=a.createProgram();r.isRawShaderMaterial?(0<(v=[T].filter(go).join("\n")).length&&(v+="\n"),0<(y=[M,T].filter(go).join("\n")).length&&(y+="\n")):(v=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+n.name,T,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+w,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+p:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(go).join("\n"),y=[M,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+n.name,T,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+w,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+u:"",o.envMap?"#define "+p:"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==ue?"#define TONE_MAPPING":"",o.toneMapping!==ue?fi.tonemapping_pars_fragment:"",o.toneMapping!==ue?function(e,t){var i;switch(t){case Ee:i="Linear";break;case pe:i="Reinhard";break;case de:i="Uncharted2";break;case fe:i="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?fi.encodings_pars_fragment:"",o.mapEncoding?mo("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?mo("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?mo("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?(_="linearToOutputTexel",x=o.outputEncoding,b=fo(x),"vec4 "+_+"( vec4 value ) { return LinearTo"+b[0]+b[1]+"; }"):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(go).join("\n")),c=yo(c=vo(c=_o(c),o),o),l=yo(l=vo(l=_o(l),o),o);var S=v+(c=xo(c)),A=y+(l=xo(l)),R=uo(a,a.VERTEX_SHADER,S),L=uo(a,a.FRAGMENT_SHADER,A);a.attachShader(E,R),a.attachShader(E,L),void 0!==r.index0AttributeName?a.bindAttribLocation(E,0,r.index0AttributeName):!0===o.morphTargets&&a.bindAttribLocation(E,0,"position"),a.linkProgram(E);var P,C,O=a.getProgramInfoLog(E).trim(),I=a.getShaderInfoLog(R).trim(),D=a.getShaderInfoLog(L).trim(),B=!0,N=!0;return!1===a.getProgramParameter(E,a.LINK_STATUS)?(B=!1,console.error("THREE.WebGLProgram: shader error: ",a.getError(),"gl.VALIDATE_STATUS",a.getProgramParameter(E,a.VALIDATE_STATUS),"gl.getProgramInfoLog",O,I,D)):""!==O?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",O):""!==I&&""!==D||(N=!1),N&&(this.diagnostics={runnable:B,material:r,programLog:O,vertexShader:{log:I,prefix:v},fragmentShader:{log:D,prefix:y}}),a.deleteShader(R),a.deleteShader(L),this.getUniforms=function(){return void 0===P&&(P=new ho(a,E,e)),P},this.getAttributes=function(){return void 0===C&&(C=function(e,t){for(var i={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),n=0;n<r;n++){var o=e.getActiveAttrib(t,n).name;i[o]=e.getAttribLocation(t,o)}return i}(a,E)),C},this.destroy=function(){a.deleteProgram(E),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=n.name,this.id=po++,this.code=i,this.usedTimes=1,this.program=E,this.vertexShader=R,this.fragmentShader=L,this}function wo(u,c,p){var l=[],d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function f(e,t){var i;return e?e.isTexture?i=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),i=e.texture.encoding):i=Tt,i===Tt&&t&&(i=St),i}this.getParameters=function(e,t,i,r,n,o,a){var s=d[e.type],c=a.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(p.floatVertexTextures)return 1024;var i=p.maxVertexUniforms,r=Math.floor((i-20)/4),n=Math.min(r,t.length);return n<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+n+"."),0):n}(a):0,l=p.precision;null!==e.precision&&(l=p.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",l,"instead.");var h=u.getRenderTarget();return{shaderID:s,precision:l,supportsVertexTextures:p.vertexTextures,outputEncoding:f(h?h.texture:null,u.gammaOutput),map:!!e.map,mapEncoding:f(e.map,u.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:f(e.envMap,u.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===xe||e.envMap.mapping===be),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:f(e.emissiveMap,u.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:e.normalMapType===Dt,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,combine:e.combine,vertexColors:e.vertexColors,fog:!!r,useFog:e.fog,fogExp:r&&r.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:p.logarithmicDepthBuffer,skinning:e.skinning&&0<c,maxBones:c,useVertexTexture:p.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:u.maxMorphTargets,maxMorphNormals:u.maxMorphNormals,numDirLights:t.directional.length,numPointLights:t.point.length,numSpotLights:t.spot.length,numRectAreaLights:t.rectArea.length,numHemiLights:t.hemi.length,numClippingPlanes:n,numClipIntersection:o,dithering:e.dithering,shadowMapEnabled:u.shadowMap.enabled&&a.receiveShadow&&0<i.length,shadowMapType:u.shadowMap.type,toneMapping:u.toneMapping,physicallyCorrectLights:u.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===te,flipSided:e.side===Me,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,t){var i=[];if(t.shaderID?i.push(t.shaderID):(i.push(e.fragmentShader),i.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)i.push(r),i.push(e.defines[r]);for(var n=0;n<o.length;n++)i.push(t[o[n]]);return i.push(e.onBeforeCompile.toString()),i.push(u.gammaOutput),i.join()},this.acquireProgram=function(e,t,i,r){for(var n,o=0,a=l.length;o<a;o++){var s=l[o];if(s.code===r){++(n=s).usedTimes;break}}return void 0===n&&(n=new bo(u,c,r,e,t,i),l.push(n)),n},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=l.indexOf(e);l[t]=l[l.length-1],l.pop(),e.destroy()}},this.programs=l}function Mo(){var r=new WeakMap;return{get:function(e){var t=r.get(e);return void 0===t&&(t={},r.set(e,t)),t},remove:function(e){r.delete(e)},update:function(e,t,i){r.get(e)[t]=i},dispose:function(){r=new WeakMap}}}function To(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Eo(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function So(){var a=[],s=0,c=[],l=[];return{opaque:c,transparent:l,init:function(){s=0,c.length=0,l.length=0},push:function(e,t,i,r,n){var o=a[s];void 0===o?(o={id:e.id,object:e,geometry:t,material:i,program:i.program,renderOrder:e.renderOrder,z:r,group:n},a[s]=o):(o.id=e.id,o.object=e,o.geometry=t,o.material=i,o.program=i.program,o.renderOrder=e.renderOrder,o.z=r,o.group=n),(!0===i.transparent?l:c).push(o),s++},sort:function(){1<c.length&&c.sort(To),1<l.length&&l.sort(Eo)}}}function Ao(){var n={};return{get:function(e,t){var i=e.id+","+t.id,r=n[i];return void 0===r&&(r=new So,n[i]=r),r},dispose:function(){n={}}}}function Ro(){var i={};return{get:function(e){if(void 0!==i[e.id])return i[e.id];var t;switch(e.type){case"DirectionalLight":t={direction:new Ft,color:new vi,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Nt};break;case"SpotLight":t={position:new Ft,direction:new Ft,color:new vi,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Nt};break;case"PointLight":t={position:new Ft,color:new vi,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Nt,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":t={direction:new Ft,skyColor:new vi,groundColor:new vi};break;case"RectAreaLight":t={color:new vi,position:new Ft,halfWidth:new Ft,halfHeight:new Ft}}return i[e.id]=t}}}var Lo,Po,Co,Oo,Io,Do,Bo,No,Uo,ko,Fo,zo,jo,Ho,Go,Vo=0;function Wo(){var b=new Ro,w={id:Vo++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},M=new Ft,T=new Ut,E=new Ut;return{setup:function(e,t,i){for(var r=0,n=0,o=0,a=0,s=0,c=0,l=0,h=0,u=i.matrixWorldInverse,p=0,d=e.length;p<d;p++){var f=e[p],m=f.color,g=f.intensity,v=f.distance,y=f.shadow&&f.shadow.map?f.shadow.map.texture:null;if(f.isAmbientLight)r+=m.r*g,n+=m.g*g,o+=m.b*g;else if(f.isDirectionalLight){if((x=b.get(f)).color.copy(f.color).multiplyScalar(f.intensity),x.direction.setFromMatrixPosition(f.matrixWorld),M.setFromMatrixPosition(f.target.matrixWorld),x.direction.sub(M),x.direction.transformDirection(u),x.shadow=f.castShadow,f.castShadow){var _=f.shadow;x.shadowBias=_.bias,x.shadowRadius=_.radius,x.shadowMapSize=_.mapSize}w.directionalShadowMap[a]=y,w.directionalShadowMatrix[a]=f.shadow.matrix,w.directional[a]=x,a++}else if(f.isSpotLight)(x=b.get(f)).position.setFromMatrixPosition(f.matrixWorld),x.position.applyMatrix4(u),x.color.copy(m).multiplyScalar(g),x.distance=v,x.direction.setFromMatrixPosition(f.matrixWorld),M.setFromMatrixPosition(f.target.matrixWorld),x.direction.sub(M),x.direction.transformDirection(u),x.coneCos=Math.cos(f.angle),x.penumbraCos=Math.cos(f.angle*(1-f.penumbra)),x.decay=0===f.distance?0:f.decay,x.shadow=f.castShadow,f.castShadow&&(_=f.shadow,x.shadowBias=_.bias,x.shadowRadius=_.radius,x.shadowMapSize=_.mapSize),w.spotShadowMap[c]=y,w.spotShadowMatrix[c]=f.shadow.matrix,w.spot[c]=x,c++;else if(f.isRectAreaLight)(x=b.get(f)).color.copy(m).multiplyScalar(g),x.position.setFromMatrixPosition(f.matrixWorld),x.position.applyMatrix4(u),E.identity(),T.copy(f.matrixWorld),T.premultiply(u),E.extractRotation(T),x.halfWidth.set(.5*f.width,0,0),x.halfHeight.set(0,.5*f.height,0),x.halfWidth.applyMatrix4(E),x.halfHeight.applyMatrix4(E),w.rectArea[l]=x,l++;else if(f.isPointLight)(x=b.get(f)).position.setFromMatrixPosition(f.matrixWorld),x.position.applyMatrix4(u),x.color.copy(f.color).multiplyScalar(f.intensity),x.distance=f.distance,x.decay=0===f.distance?0:f.decay,x.shadow=f.castShadow,f.castShadow&&(_=f.shadow,x.shadowBias=_.bias,x.shadowRadius=_.radius,x.shadowMapSize=_.mapSize,x.shadowCameraNear=_.camera.near,x.shadowCameraFar=_.camera.far),w.pointShadowMap[s]=y,w.pointShadowMatrix[s]=f.shadow.matrix,w.point[s]=x,s++;else if(f.isHemisphereLight){var x;(x=b.get(f)).direction.setFromMatrixPosition(f.matrixWorld),x.direction.transformDirection(u),x.direction.normalize(),x.skyColor.copy(f.color).multiplyScalar(g),x.groundColor.copy(f.groundColor).multiplyScalar(g),w.hemi[h]=x,h++}}w.ambient[0]=r,w.ambient[1]=n,w.ambient[2]=o,w.directional.length=a,w.spot.length=c,w.rectArea.length=l,w.point.length=s,w.hemi.length=h,w.hash=w.id+","+a+","+s+","+c+","+l+","+h+","+t.length},state:w}}function Xo(){var t=new Wo,i=[],r=[],n=[];return{init:function(){i.length=0,r.length=0,n.length=0},state:{lightsArray:i,shadowsArray:r,spritesArray:n,lights:t},setupLights:function(e){t.setup(i,r,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){r.push(e)},pushSprite:function(e){n.push(e)}}}function qo(){var n={};return{get:function(e,t){var i=e.id+","+t.id,r=n[i];return void 0===r&&(r=new Xo,n[i]=r),r},dispose:function(){n={}}}}function Yo(e){nn.call(this),this.type="MeshDepthMaterial",this.depthPacking=Ct,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function Jo(e){nn.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Ft,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Zo(_,m,e){for(var x=new pi,b=new Ut,w=new Nt,M=new Nt(e,e),T=new Ft,E=new Ft,v=1,y=2,t=1+(v|y),S=new Array(t),A=new Array(t),R={},L={0:Me,1:B,2:te},P=[new Ft(1,0,0),new Ft(-1,0,0),new Ft(0,0,1),new Ft(0,0,-1),new Ft(0,1,0),new Ft(0,-1,0)],C=[new Ft(0,1,0),new Ft(0,1,0),new Ft(0,1,0),new Ft(0,1,0),new Ft(0,0,1),new Ft(0,0,-1)],O=[new oi,new oi,new oi,new oi,new oi,new oi],i=0;i!==t;++i){var r=0!=(i&v),n=0!=(i&y),o=new Yo({depthPacking:Ot,morphTargets:r,skinning:n});S[i]=o;var a=new Jo({morphTargets:r,skinning:n});A[i]=a}var I=this;function g(e,t,i,r,n,o){var a=e.geometry,s=null,c=S,l=e.customDepthMaterial;if(i&&(c=A,l=e.customDistanceMaterial),l)s=l;else{var h=!1;t.morphTargets&&(a&&a.isBufferGeometry?h=a.morphAttributes&&a.morphAttributes.position&&0<a.morphAttributes.position.length:a&&a.isGeometry&&(h=a.morphTargets&&0<a.morphTargets.length)),e.isSkinnedMesh&&!1===t.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e);var u=e.isSkinnedMesh&&t.skinning,p=0;h&&(p|=v),u&&(p|=y),s=c[p]}if(_.localClippingEnabled&&!0===t.clipShadows&&0!==t.clippingPlanes.length){var d=s.uuid,f=t.uuid,m=R[d];void 0===m&&(m={},R[d]=m);var g=m[f];void 0===g&&(g=s.clone(),m[f]=g),s=g}return s.visible=t.visible,s.wireframe=t.wireframe,s.side=null!=t.shadowSide?t.shadowSide:L[t.side],s.clipShadows=t.clipShadows,s.clippingPlanes=t.clippingPlanes,s.clipIntersection=t.clipIntersection,s.wireframeLinewidth=t.wireframeLinewidth,s.linewidth=t.linewidth,i&&s.isMeshDistanceMaterial&&(s.referencePosition.copy(r),s.nearDistance=n,s.farDistance=o),s}function D(e,t,i,r){if(!1!==e.visible){if(e.layers.test(t.layers)&&(e.isMesh||e.isLine||e.isPoints)&&e.castShadow&&(!e.frustumCulled||x.intersectsObject(e))){e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld);var n=m.update(e),o=e.material;if(Array.isArray(o))for(var a=n.groups,s=0,c=a.length;s<c;s++){var l=a[s],h=o[l.materialIndex];if(h&&h.visible){var u=g(e,h,r,E,i.near,i.far);_.renderBufferDirect(i,null,n,u,e,l)}}else if(o.visible){u=g(e,o,r,E,i.near,i.far);_.renderBufferDirect(i,null,n,u,e,null)}}for(var p=e.children,d=0,f=p.length;d<f;d++)D(p[d],t,i,r)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=U,this.render=function(e,t,i){if(!1!==I.enabled&&(!1!==I.autoUpdate||!1!==I.needsUpdate)&&0!==e.length){var r,n=_.context,o=_.state;o.disable(n.BLEND),o.buffers.color.setClear(1,1,1,1),o.buffers.depth.setTest(!0),o.setScissorTest(!1);for(var a=0,s=e.length;a<s;a++){var c=e[a],l=c.shadow,h=c&&c.isPointLight;if(void 0!==l){var u=l.camera;if(w.copy(l.mapSize),w.min(M),h){var p=w.x,d=w.y;O[0].set(2*p,d,p,d),O[1].set(0,d,p,d),O[2].set(3*p,d,p,d),O[3].set(p,d,p,d),O[4].set(3*p,0,p,d),O[5].set(p,0,p,d),w.x*=4,w.y*=2}if(null===l.map){var f={minFilter:Re,magFilter:Re,format:Ye};l.map=new ai(w.x,w.y,f),l.map.texture.name=c.name+".shadowMap",u.updateProjectionMatrix()}l.isSpotLightShadow&&l.update(c);var m=l.map,g=l.matrix;E.setFromMatrixPosition(c.matrixWorld),u.position.copy(E),h?(r=6,g.makeTranslation(-E.x,-E.y,-E.z)):(r=1,T.setFromMatrixPosition(c.target.matrixWorld),u.lookAt(T),u.updateMatrixWorld(),g.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),g.multiply(u.projectionMatrix),g.multiply(u.matrixWorldInverse)),_.setRenderTarget(m),_.clear();for(var v=0;v<r;v++){if(h){T.copy(u.position),T.add(P[v]),u.up.copy(C[v]),u.lookAt(T),u.updateMatrixWorld();var y=O[v];o.viewport(y)}b.multiplyMatrices(u.projectionMatrix,u.matrixWorldInverse),x.setFromMatrix(b),D(t,i,u,h)}}else console.warn("THREE.WebGLShadowMap:",c,"has no shadow.")}I.needsUpdate=!1}}}function Ko(e,t,i,r,n,o,a,s,c){ni.call(this,e,t,i,r,n,o,a,s,c),this.needsUpdate=!0}function Qo(d,f,m,g,s){var v,y,_,x,b,w,M=new Ft,T=new kt,E=new Ft;function S(){var e,t,i,r=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),n=new Uint16Array([0,1,2,0,2,3]);v=f.createBuffer(),y=f.createBuffer(),f.bindBuffer(f.ARRAY_BUFFER,v),f.bufferData(f.ARRAY_BUFFER,r,f.STATIC_DRAW),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,y),f.bufferData(f.ELEMENT_ARRAY_BUFFER,n,f.STATIC_DRAW),e=f.createProgram(),t=f.createShader(f.VERTEX_SHADER),i=f.createShader(f.FRAGMENT_SHADER),f.shaderSource(t,["precision "+s.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 center;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = ( position - center ) * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n")),f.shaderSource(i,["precision "+s.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n")),f.compileShader(t),f.compileShader(i),f.attachShader(e,t),f.attachShader(e,i),f.linkProgram(e),_=e,x={position:f.getAttribLocation(_,"position"),uv:f.getAttribLocation(_,"uv")},b={uvOffset:f.getUniformLocation(_,"uvOffset"),uvScale:f.getUniformLocation(_,"uvScale"),rotation:f.getUniformLocation(_,"rotation"),center:f.getUniformLocation(_,"center"),scale:f.getUniformLocation(_,"scale"),color:f.getUniformLocation(_,"color"),map:f.getUniformLocation(_,"map"),opacity:f.getUniformLocation(_,"opacity"),modelViewMatrix:f.getUniformLocation(_,"modelViewMatrix"),projectionMatrix:f.getUniformLocation(_,"projectionMatrix"),fogType:f.getUniformLocation(_,"fogType"),fogDensity:f.getUniformLocation(_,"fogDensity"),fogNear:f.getUniformLocation(_,"fogNear"),fogFar:f.getUniformLocation(_,"fogFar"),fogColor:f.getUniformLocation(_,"fogColor"),fogDepth:f.getUniformLocation(_,"fogDepth"),alphaTest:f.getUniformLocation(_,"alphaTest")};var o=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");o.width=8,o.height=8;var a=o.getContext("2d");a.fillStyle="white",a.fillRect(0,0,8,8),w=new Ko(o)}function A(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}this.render=function(e,t,i){if(0!==e.length){void 0===_&&S(),m.useProgram(_),m.initAttributes(),m.enableAttribute(x.position),m.enableAttribute(x.uv),m.disableUnusedAttributes(),m.disable(f.CULL_FACE),m.enable(f.BLEND),f.bindBuffer(f.ARRAY_BUFFER,v),f.vertexAttribPointer(x.position,2,f.FLOAT,!1,16,0),f.vertexAttribPointer(x.uv,2,f.FLOAT,!1,16,8),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,y),f.uniformMatrix4fv(b.projectionMatrix,!1,i.projectionMatrix.elements),m.activeTexture(f.TEXTURE0),f.uniform1i(b.map,0);var r=0,n=0,o=t.fog;o?(f.uniform3f(b.fogColor,o.color.r,o.color.g,o.color.b),o.isFog?(f.uniform1f(b.fogNear,o.near),f.uniform1f(b.fogFar,o.far),f.uniform1i(b.fogType,1),n=r=1):o.isFogExp2&&(f.uniform1f(b.fogDensity,o.density),f.uniform1i(b.fogType,2),n=r=2)):(f.uniform1i(b.fogType,0),n=r=0);for(var a=0,s=e.length;a<s;a++){(h=e[a]).modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,h.matrixWorld),h.z=-h.modelViewMatrix.elements[14]}e.sort(A);var c=[],l=[];for(a=0,s=e.length;a<s;a++){var h,u=(h=e[a]).material;if(!1!==u.visible){h.onBeforeRender(d,t,i,void 0,u,void 0),f.uniform1f(b.alphaTest,u.alphaTest),f.uniformMatrix4fv(b.modelViewMatrix,!1,h.modelViewMatrix.elements),h.matrixWorld.decompose(M,T,E),c[0]=E.x,c[1]=E.y,l[0]=h.center.x-.5,l[1]=h.center.y-.5;var p=0;t.fog&&u.fog&&(p=n),r!==p&&(f.uniform1i(b.fogType,p),r=p),null!==u.map?(f.uniform2f(b.uvOffset,u.map.offset.x,u.map.offset.y),f.uniform2f(b.uvScale,u.map.repeat.x,u.map.repeat.y)):(f.uniform2f(b.uvOffset,0,0),f.uniform2f(b.uvScale,1,1)),f.uniform1f(b.opacity,u.opacity),f.uniform3f(b.color,u.color.r,u.color.g,u.color.b),f.uniform1f(b.rotation,u.rotation),f.uniform2fv(b.center,l),f.uniform2fv(b.scale,c),m.setBlending(u.blending,u.blendEquation,u.blendSrc,u.blendDst,u.blendEquationAlpha,u.blendSrcAlpha,u.blendDstAlpha,u.premultipliedAlpha),m.buffers.depth.setTest(u.depthTest),m.buffers.depth.setMask(u.depthWrite),m.buffers.color.setMask(u.colorWrite),g.setTexture2D(u.map||w,0),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0),h.onAfterRender(d,t,i,void 0,u,void 0)}}m.enable(f.CULL_FACE),m.reset()}}}function $o(h,i,c){var r=new function(){var t=!1,o=new oi,i=null,a=new oi(0,0,0,0);return{setMask:function(e){i===e||t||(h.colorMask(e,e,e,e),i=e)},setLocked:function(e){t=e},setClear:function(e,t,i,r,n){!0===n&&(e*=r,t*=r,i*=r),o.set(e,t,i,r),!1===a.equals(o)&&(h.clearColor(e,t,i,r),a.copy(o))},reset:function(){t=!1,i=null,a.set(-1,0,0,0)}}},n=new function(){var t=!1,i=null,r=null,n=null;return{setTest:function(e){e?U(h.DEPTH_TEST):k(h.DEPTH_TEST)},setMask:function(e){i===e||t||(h.depthMask(e),i=e)},setFunc:function(e){if(r!==e){if(e)switch(e){case $:h.depthFunc(h.NEVER);break;case ee:h.depthFunc(h.ALWAYS);break;case ie:h.depthFunc(h.LESS);break;case re:h.depthFunc(h.LEQUAL);break;case ne:h.depthFunc(h.EQUAL);break;case oe:h.depthFunc(h.GEQUAL);break;case ae:h.depthFunc(h.GREATER);break;case se:h.depthFunc(h.NOTEQUAL);break;default:h.depthFunc(h.LEQUAL)}else h.depthFunc(h.LEQUAL);r=e}},setLocked:function(e){t=e},setClear:function(e){n!==e&&(h.clearDepth(e),n=e)},reset:function(){t=!1,n=r=i=null}}},t=new function(){var t=!1,i=null,r=null,n=null,o=null,a=null,s=null,c=null,l=null;return{setTest:function(e){e?U(h.STENCIL_TEST):k(h.STENCIL_TEST)},setMask:function(e){i===e||t||(h.stencilMask(e),i=e)},setFunc:function(e,t,i){r===e&&n===t&&o===i||(h.stencilFunc(e,t,i),r=e,n=t,o=i)},setOp:function(e,t,i){a===e&&s===t&&c===i||(h.stencilOp(e,t,i),a=e,s=t,c=i)},setLocked:function(e){t=e},setClear:function(e){l!==e&&(h.clearStencil(e),l=e)},reset:function(){t=!1,l=c=s=a=o=n=r=i=null}}},e=h.getParameter(h.MAX_VERTEX_ATTRIBS),o=new Uint8Array(e),a=new Uint8Array(e),s=new Uint8Array(e),l={},u=null,p=null,d=null,f=null,m=null,g=null,v=null,y=null,_=null,x=!1,b=null,w=null,M=null,T=null,E=null,S=h.getParameter(h.MAX_COMBINED_TEXTURE_IMAGE_UNITS),A=!1,R=0,L=h.getParameter(h.VERSION);-1!==L.indexOf("WebGL")?(R=parseFloat(/^WebGL\ ([0-9])/.exec(L)[1]),A=1<=R):-1!==L.indexOf("OpenGL ES")&&(R=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(L)[1]),A=2<=R);var P=null,C={},O=new oi,I=new oi;function D(e,t,i){var r=new Uint8Array(4),n=h.createTexture();h.bindTexture(e,n),h.texParameteri(e,h.TEXTURE_MIN_FILTER,h.NEAREST),h.texParameteri(e,h.TEXTURE_MAG_FILTER,h.NEAREST);for(var o=0;o<i;o++)h.texImage2D(t+o,0,h.RGBA,1,1,0,h.RGBA,h.UNSIGNED_BYTE,r);return n}var B={};function N(e,t){(o[e]=1,0===a[e]&&(h.enableVertexAttribArray(e),a[e]=1),s[e]!==t)&&(i.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(e,t),s[e]=t)}function U(e){!0!==l[e]&&(h.enable(e),l[e]=!0)}function k(e){!1!==l[e]&&(h.disable(e),l[e]=!1)}function F(e,t,i,r,n,o,a,s){if(e!==q?U(h.BLEND):k(h.BLEND),e!==Q){if(e!==d||s!==x)switch(e){case J:s?(h.blendEquationSeparate(h.FUNC_ADD,h.FUNC_ADD),h.blendFuncSeparate(h.ONE,h.ONE,h.ONE,h.ONE)):(h.blendEquation(h.FUNC_ADD),h.blendFunc(h.SRC_ALPHA,h.ONE));break;case Z:s?(h.blendEquationSeparate(h.FUNC_ADD,h.FUNC_ADD),h.blendFuncSeparate(h.ZERO,h.ZERO,h.ONE_MINUS_SRC_COLOR,h.ONE_MINUS_SRC_ALPHA)):(h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ZERO,h.ONE_MINUS_SRC_COLOR));break;case K:s?(h.blendEquationSeparate(h.FUNC_ADD,h.FUNC_ADD),h.blendFuncSeparate(h.ZERO,h.SRC_COLOR,h.ZERO,h.SRC_ALPHA)):(h.blendEquation(h.FUNC_ADD),h.blendFunc(h.ZERO,h.SRC_COLOR));break;default:s?(h.blendEquationSeparate(h.FUNC_ADD,h.FUNC_ADD),h.blendFuncSeparate(h.ONE,h.ONE_MINUS_SRC_ALPHA,h.ONE,h.ONE_MINUS_SRC_ALPHA)):(h.blendEquationSeparate(h.FUNC_ADD,h.FUNC_ADD),h.blendFuncSeparate(h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA,h.ONE,h.ONE_MINUS_SRC_ALPHA))}_=y=v=g=m=f=null}else n=n||t,o=o||i,a=a||r,t===f&&n===v||(h.blendEquationSeparate(c.convert(t),c.convert(n)),f=t,v=n),i===m&&r===g&&o===y&&a===_||(h.blendFuncSeparate(c.convert(i),c.convert(r),c.convert(o),c.convert(a)),m=i,g=r,y=o,_=a);d=e,x=s}function z(e){b!==e&&(e?h.frontFace(h.CW):h.frontFace(h.CCW),b=e)}function j(e){e!==V?(U(h.CULL_FACE),e!==w&&(e===W?h.cullFace(h.BACK):e===X?h.cullFace(h.FRONT):h.cullFace(h.FRONT_AND_BACK))):k(h.CULL_FACE),w=e}function H(e,t,i){e?(U(h.POLYGON_OFFSET_FILL),T===t&&E===i||(h.polygonOffset(t,i),T=t,E=i)):k(h.POLYGON_OFFSET_FILL)}function G(e){void 0===e&&(e=h.TEXTURE0+S-1),P!==e&&(h.activeTexture(e),P=e)}return B[h.TEXTURE_2D]=D(h.TEXTURE_2D,h.TEXTURE_2D,1),B[h.TEXTURE_CUBE_MAP]=D(h.TEXTURE_CUBE_MAP,h.TEXTURE_CUBE_MAP_POSITIVE_X,6),r.setClear(0,0,0,1),n.setClear(1),t.setClear(0),U(h.DEPTH_TEST),n.setFunc(re),z(!1),j(W),U(h.CULL_FACE),U(h.BLEND),F(Y),{buffers:{color:r,depth:n,stencil:t},initAttributes:function(){for(var e=0,t=o.length;e<t;e++)o[e]=0},enableAttribute:function(e){N(e,0)},enableAttributeAndDivisor:N,disableUnusedAttributes:function(){for(var e=0,t=a.length;e!==t;++e)a[e]!==o[e]&&(h.disableVertexAttribArray(e),a[e]=0)},enable:U,disable:k,getCompressedTextureFormats:function(){if(null===u&&(u=[],i.get("WEBGL_compressed_texture_pvrtc")||i.get("WEBGL_compressed_texture_s3tc")||i.get("WEBGL_compressed_texture_etc1")||i.get("WEBGL_compressed_texture_astc")))for(var e=h.getParameter(h.COMPRESSED_TEXTURE_FORMATS),t=0;t<e.length;t++)u.push(e[t]);return u},useProgram:function(e){return p!==e&&(h.useProgram(e),p=e,!0)},setBlending:F,setMaterial:function(e,t){e.side===te?k(h.CULL_FACE):U(h.CULL_FACE);var i=e.side===Me;t&&(i=!i),z(i),e.blending===Y&&!1===e.transparent?F(q):F(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),n.setFunc(e.depthFunc),n.setTest(e.depthTest),n.setMask(e.depthWrite),r.setMask(e.colorWrite),H(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:z,setCullFace:j,setLineWidth:function(e){e!==M&&(A&&h.lineWidth(e),M=e)},setPolygonOffset:H,setScissorTest:function(e){e?U(h.SCISSOR_TEST):k(h.SCISSOR_TEST)},activeTexture:G,bindTexture:function(e,t){null===P&&G();var i=C[P];void 0===i&&(i={type:void 0,texture:void 0},C[P]=i),i.type===e&&i.texture===t||(h.bindTexture(e,t||B[e]),i.type=e,i.texture=t)},compressedTexImage2D:function(){try{h.compressedTexImage2D.apply(h,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{h.texImage2D.apply(h,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(e){!1===O.equals(e)&&(h.scissor(e.x,e.y,e.z,e.w),O.copy(e))},viewport:function(e){!1===I.equals(e)&&(h.viewport(e.x,e.y,e.z,e.w),I.copy(e))},reset:function(){for(var e=0;e<a.length;e++)1===a[e]&&(h.disableVertexAttribArray(e),a[e]=0);l={},C={},w=b=d=p=P=u=null,r.reset(),n.reset(),t.reset()}}}function ea(m,n,g,v,y,_,x){var f,b="undefined"!=typeof WebGL2RenderingContext&&m instanceof WebGL2RenderingContext,s={};function w(e,t){if(e.width>t||e.height>t){if("data"in e)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+e.width+"x"+e.height+").");var i=t/Math.max(e.width,e.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return r.width=Math.floor(e.width*i),r.height=Math.floor(e.height*i),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height,e),r}return e}function M(e){return Bt.isPowerOfTwo(e.width)&&Bt.isPowerOfTwo(e.height)}function T(e,t){return e.generateMipmaps&&t&&e.minFilter!==Re&&e.minFilter!==Ce}function E(e,t,i,r){m.generateMipmap(e),v.get(t).__maxMipLevel=Math.log(Math.max(i,r))*Math.LOG2E}function o(e){return e===Re||e===Le||e===Pe?m.NEAREST:m.LINEAR}function S(e){var t=e.target;t.removeEventListener("dispose",S),function(e){var t=v.get(e);if(e.image&&t.__image__webglTextureCube)m.deleteTexture(t.__image__webglTextureCube);else{if(void 0===t.__webglInit)return;m.deleteTexture(t.__webglTexture)}v.remove(e)}(t),t.isVideoTexture&&delete s[t.id],x.memory.textures--}function a(e){var t=e.target;t.removeEventListener("dispose",a),function(e){var t=v.get(e),i=v.get(e.texture);if(!e)return;void 0!==i.__webglTexture&&m.deleteTexture(i.__webglTexture);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLRenderTargetCube)for(var r=0;r<6;r++)m.deleteFramebuffer(t.__webglFramebuffer[r]),t.__webglDepthbuffer&&m.deleteRenderbuffer(t.__webglDepthbuffer[r]);else m.deleteFramebuffer(t.__webglFramebuffer),t.__webglDepthbuffer&&m.deleteRenderbuffer(t.__webglDepthbuffer);v.remove(e.texture),v.remove(e)}(t),x.memory.textures--}function c(e,t){var i,r,n,o=v.get(e);if(e.isVideoTexture&&(r=(i=e).id,n=x.render.frame,s[r]!==n&&(s[r]=n,i.update())),0<e.version&&o.__version!==e.version){var a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",e);else{if(!1!==a.complete)return void function(e,t,i){void 0===e.__webglInit&&(e.__webglInit=!0,t.addEventListener("dispose",S),e.__webglTexture=m.createTexture(),x.memory.textures++);g.activeTexture(m.TEXTURE0+i),g.bindTexture(m.TEXTURE_2D,e.__webglTexture),m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,t.flipY),m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),m.pixelStorei(m.UNPACK_ALIGNMENT,t.unpackAlignment);var r=w(t.image,y.maxTextureSize);o=t,(o.wrapS!==Se||o.wrapT!==Se||o.minFilter!==Re&&o.minFilter!==Ce)&&!1===M(r)&&(r=(n=r)instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof ImageBitmap?(void 0===f&&(f=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),f.width=Bt.floorPowerOfTwo(n.width),f.height=Bt.floorPowerOfTwo(n.height),f.getContext("2d").drawImage(n,0,0,f.width,f.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+n.width+"x"+n.height+"). Resized to "+f.width+"x"+f.height,n),f):n);var n;var o;var a=M(r),s=_.convert(t.format),c=_.convert(t.type);A(m.TEXTURE_2D,t,a);var l,h=t.mipmaps;if(t.isDepthTexture){var u=m.DEPTH_COMPONENT;if(t.type===ze){if(!b)throw new Error("Float Depth Texture only supported in WebGL2.0");u=m.DEPTH_COMPONENT32F}else b&&(u=m.DEPTH_COMPONENT16);t.format===Qe&&u===m.DEPTH_COMPONENT&&t.type!==Ue&&t.type!==Fe&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),t.type=Ue,c=_.convert(t.type)),t.format===$e&&(u=m.DEPTH_STENCIL,t.type!==We&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),t.type=We,c=_.convert(t.type))),g.texImage2D(m.TEXTURE_2D,0,u,r.width,r.height,0,s,c,null)}else if(t.isDataTexture)if(0<h.length&&a){for(var p=0,d=h.length;p<d;p++)l=h[p],g.texImage2D(m.TEXTURE_2D,p,s,l.width,l.height,0,s,c,l.data);t.generateMipmaps=!1,e.__maxMipLevel=h.length-1}else g.texImage2D(m.TEXTURE_2D,0,s,r.width,r.height,0,s,c,r.data),e.__maxMipLevel=0;else if(t.isCompressedTexture){for(var p=0,d=h.length;p<d;p++)l=h[p],t.format!==Ye&&t.format!==qe?-1<g.getCompressedTextureFormats().indexOf(s)?g.compressedTexImage2D(m.TEXTURE_2D,p,s,l.width,l.height,0,l.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):g.texImage2D(m.TEXTURE_2D,p,s,l.width,l.height,0,s,c,l.data);e.__maxMipLevel=h.length-1}else if(0<h.length&&a){for(var p=0,d=h.length;p<d;p++)l=h[p],g.texImage2D(m.TEXTURE_2D,p,s,s,c,l);t.generateMipmaps=!1,e.__maxMipLevel=h.length-1}else g.texImage2D(m.TEXTURE_2D,0,s,s,c,r),e.__maxMipLevel=0;T(t,a)&&E(m.TEXTURE_2D,t,r.width,r.height);e.__version=t.version,t.onUpdate&&t.onUpdate(t)}(o,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",e)}}g.activeTexture(m.TEXTURE0+t),g.bindTexture(m.TEXTURE_2D,o.__webglTexture)}function A(e,t,i){var r;if(i?(m.texParameteri(e,m.TEXTURE_WRAP_S,_.convert(t.wrapS)),m.texParameteri(e,m.TEXTURE_WRAP_T,_.convert(t.wrapT)),m.texParameteri(e,m.TEXTURE_MAG_FILTER,_.convert(t.magFilter)),m.texParameteri(e,m.TEXTURE_MIN_FILTER,_.convert(t.minFilter))):(m.texParameteri(e,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(e,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),t.wrapS===Se&&t.wrapT===Se||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",t),m.texParameteri(e,m.TEXTURE_MAG_FILTER,o(t.magFilter)),m.texParameteri(e,m.TEXTURE_MIN_FILTER,o(t.minFilter)),t.minFilter!==Re&&t.minFilter!==Ce&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",t)),r=n.get("EXT_texture_filter_anisotropic")){if(t.type===ze&&null===n.get("OES_texture_float_linear"))return;if(t.type===je&&null===n.get("OES_texture_half_float_linear"))return;(1<t.anisotropy||v.get(t).__currentAnisotropy)&&(m.texParameterf(e,r.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,y.getMaxAnisotropy())),v.get(t).__currentAnisotropy=t.anisotropy)}}function l(e,t,i,r){var n=_.convert(t.texture.format),o=_.convert(t.texture.type);g.texImage2D(r,0,n,t.width,t.height,0,n,o,null),m.bindFramebuffer(m.FRAMEBUFFER,e),m.framebufferTexture2D(m.FRAMEBUFFER,i,r,v.get(t.texture).__webglTexture,0),m.bindFramebuffer(m.FRAMEBUFFER,null)}function h(e,t){m.bindRenderbuffer(m.RENDERBUFFER,e),t.depthBuffer&&!t.stencilBuffer?(m.renderbufferStorage(m.RENDERBUFFER,m.DEPTH_COMPONENT16,t.width,t.height),m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_ATTACHMENT,m.RENDERBUFFER,e)):t.depthBuffer&&t.stencilBuffer?(m.renderbufferStorage(m.RENDERBUFFER,m.DEPTH_STENCIL,t.width,t.height),m.framebufferRenderbuffer(m.FRAMEBUFFER,m.DEPTH_STENCIL_ATTACHMENT,m.RENDERBUFFER,e)):m.renderbufferStorage(m.RENDERBUFFER,m.RGBA4,t.width,t.height),m.bindRenderbuffer(m.RENDERBUFFER,null)}function u(e){var t=v.get(e),i=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,t){if(t&&t.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(m.bindFramebuffer(m.FRAMEBUFFER,e),!t.depthTexture||!t.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");v.get(t.depthTexture).__webglTexture&&t.depthTexture.image.width===t.width&&t.depthTexture.image.height===t.height||(t.depthTexture.image.width=t.width,t.depthTexture.image.height=t.height,t.depthTexture.needsUpdate=!0),c(t.depthTexture,0);var i=v.get(t.depthTexture).__webglTexture;if(t.depthTexture.format===Qe)m.framebufferTexture2D(m.FRAMEBUFFER,m.DEPTH_ATTACHMENT,m.TEXTURE_2D,i,0);else{if(t.depthTexture.format!==$e)throw new Error("Unknown depthTexture format");m.framebufferTexture2D(m.FRAMEBUFFER,m.DEPTH_STENCIL_ATTACHMENT,m.TEXTURE_2D,i,0)}}(t.__webglFramebuffer,e)}else if(i){t.__webglDepthbuffer=[];for(var r=0;r<6;r++)m.bindFramebuffer(m.FRAMEBUFFER,t.__webglFramebuffer[r]),t.__webglDepthbuffer[r]=m.createRenderbuffer(),h(t.__webglDepthbuffer[r],e)}else m.bindFramebuffer(m.FRAMEBUFFER,t.__webglFramebuffer),t.__webglDepthbuffer=m.createRenderbuffer(),h(t.__webglDepthbuffer,e);m.bindFramebuffer(m.FRAMEBUFFER,null)}this.setTexture2D=c,this.setTextureCube=function(e,t){var i=v.get(e);if(6===e.image.length)if(0<e.version&&i.__version!==e.version){i.__image__webglTextureCube||(e.addEventListener("dispose",S),i.__image__webglTextureCube=m.createTexture(),x.memory.textures++),g.activeTexture(m.TEXTURE0+t),g.bindTexture(m.TEXTURE_CUBE_MAP,i.__image__webglTextureCube),m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,e.flipY);for(var r=e&&e.isCompressedTexture,n=e.image[0]&&e.image[0].isDataTexture,o=[],a=0;a<6;a++)o[a]=r||n?n?e.image[a].image:e.image[a]:w(e.image[a],y.maxCubemapSize);var s=o[0],c=M(s),l=_.convert(e.format),h=_.convert(e.type);for(A(m.TEXTURE_CUBE_MAP,e,c),a=0;a<6;a++)if(r)for(var u,p=o[a].mipmaps,d=0,f=p.length;d<f;d++)u=p[d],e.format!==Ye&&e.format!==qe?-1<g.getCompressedTextureFormats().indexOf(l)?g.compressedTexImage2D(m.TEXTURE_CUBE_MAP_POSITIVE_X+a,d,l,u.width,u.height,0,u.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):g.texImage2D(m.TEXTURE_CUBE_MAP_POSITIVE_X+a,d,l,u.width,u.height,0,l,h,u.data);else n?g.texImage2D(m.TEXTURE_CUBE_MAP_POSITIVE_X+a,0,l,o[a].width,o[a].height,0,l,h,o[a].data):g.texImage2D(m.TEXTURE_CUBE_MAP_POSITIVE_X+a,0,l,l,h,o[a]);i.__maxMipLevel=r?p.length-1:0,T(e,c)&&E(m.TEXTURE_CUBE_MAP,e,s.width,s.height),i.__version=e.version,e.onUpdate&&e.onUpdate(e)}else g.activeTexture(m.TEXTURE0+t),g.bindTexture(m.TEXTURE_CUBE_MAP,i.__image__webglTextureCube)},this.setTextureCubeDynamic=function(e,t){g.activeTexture(m.TEXTURE0+t),g.bindTexture(m.TEXTURE_CUBE_MAP,v.get(e).__webglTexture)},this.setupRenderTarget=function(e){var t=v.get(e),i=v.get(e.texture);e.addEventListener("dispose",a),i.__webglTexture=m.createTexture(),x.memory.textures++;var r=!0===e.isWebGLRenderTargetCube,n=M(e);if(r){t.__webglFramebuffer=[];for(var o=0;o<6;o++)t.__webglFramebuffer[o]=m.createFramebuffer()}else t.__webglFramebuffer=m.createFramebuffer();if(r){for(g.bindTexture(m.TEXTURE_CUBE_MAP,i.__webglTexture),A(m.TEXTURE_CUBE_MAP,e.texture,n),o=0;o<6;o++)l(t.__webglFramebuffer[o],e,m.COLOR_ATTACHMENT0,m.TEXTURE_CUBE_MAP_POSITIVE_X+o);T(e.texture,n)&&E(m.TEXTURE_CUBE_MAP,e.texture,e.width,e.height),g.bindTexture(m.TEXTURE_CUBE_MAP,null)}else g.bindTexture(m.TEXTURE_2D,i.__webglTexture),A(m.TEXTURE_2D,e.texture,n),l(t.__webglFramebuffer,e,m.COLOR_ATTACHMENT0,m.TEXTURE_2D),T(e.texture,n)&&E(m.TEXTURE_2D,e.texture,e.width,e.height),g.bindTexture(m.TEXTURE_2D,null);e.depthBuffer&&u(e)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(T(t,M(e))){var i=e.isWebGLRenderTargetCube?m.TEXTURE_CUBE_MAP:m.TEXTURE_2D,r=v.get(t).__webglTexture;g.bindTexture(i,r),E(i,t,e.width,e.height),g.bindTexture(i,null)}}}function ta(i,r){return{convert:function(e){var t;if(e===we)return i.REPEAT;if(e===Se)return i.CLAMP_TO_EDGE;if(e===Ae)return i.MIRRORED_REPEAT;if(e===Re)return i.NEAREST;if(e===Le)return i.NEAREST_MIPMAP_NEAREST;if(e===Pe)return i.NEAREST_MIPMAP_LINEAR;if(e===Ce)return i.LINEAR;if(e===Oe)return i.LINEAR_MIPMAP_NEAREST;if(e===Ie)return i.LINEAR_MIPMAP_LINEAR;if(e===De)return i.UNSIGNED_BYTE;if(e===He)return i.UNSIGNED_SHORT_4_4_4_4;if(e===Ge)return i.UNSIGNED_SHORT_5_5_5_1;if(e===Ve)return i.UNSIGNED_SHORT_5_6_5;if(e===Be)return i.BYTE;if(e===Ne)return i.SHORT;if(e===Ue)return i.UNSIGNED_SHORT;if(e===ke)return i.INT;if(e===Fe)return i.UNSIGNED_INT;if(e===ze)return i.FLOAT;if(e===je&&null!==(t=r.get("OES_texture_half_float")))return t.HALF_FLOAT_OES;if(e===Xe)return i.ALPHA;if(e===qe)return i.RGB;if(e===Ye)return i.RGBA;if(e===Je)return i.LUMINANCE;if(e===Ze)return i.LUMINANCE_ALPHA;if(e===Qe)return i.DEPTH_COMPONENT;if(e===$e)return i.DEPTH_STENCIL;if(e===E)return i.FUNC_ADD;if(e===S)return i.FUNC_SUBTRACT;if(e===A)return i.FUNC_REVERSE_SUBTRACT;if(e===P)return i.ZERO;if(e===C)return i.ONE;if(e===O)return i.SRC_COLOR;if(e===I)return i.ONE_MINUS_SRC_COLOR;if(e===D)return i.SRC_ALPHA;if(e===N)return i.ONE_MINUS_SRC_ALPHA;if(e===F)return i.DST_ALPHA;if(e===z)return i.ONE_MINUS_DST_ALPHA;if(e===j)return i.DST_COLOR;if(e===H)return i.ONE_MINUS_DST_COLOR;if(e===G)return i.SRC_ALPHA_SATURATE;if((e===et||e===tt||e===it||e===rt)&&null!==(t=r.get("WEBGL_compressed_texture_s3tc"))){if(e===et)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===tt)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===it)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===rt)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((e===nt||e===ot||e===at||e===st)&&null!==(t=r.get("WEBGL_compressed_texture_pvrtc"))){if(e===nt)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===ot)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===at)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===st)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===ct&&null!==(t=r.get("WEBGL_compressed_texture_etc1")))return t.COMPRESSED_RGB_ETC1_WEBGL;if((e===lt||e===ht||e===ut||e===pt||e===dt||e===ft||e===mt||e===gt||e===vt||e===yt||e===_t||e===xt||e===bt||e===wt)&&null!==(t=r.get("WEBGL_compressed_texture_astc")))return e;if((e===R||e===L)&&null!==(t=r.get("EXT_blend_minmax"))){if(e===R)return t.MIN_EXT;if(e===L)return t.MAX_EXT}return e===We&&null!==(t=r.get("WEBGL_depth_texture"))?t.UNSIGNED_INT_24_8_WEBGL:0}}}function ia(){Wi.call(this),this.type="Group"}function ra(e,t,i,r){Xi.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function na(e){ra.call(this),this.cameras=e||[]}function oa(r){var s=this,c=null,l=null,h=null,u=[],p=new Ut,d=new Ut;"undefined"!=typeof window&&"VRFrameData"in window&&(l=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",e,!1));var f=new Ut,m=new kt,g=new Ft,v=new ra;v.bounds=new oi(0,0,.5,1),v.layers.enable(1);var y=new ra;y.bounds=new oi(.5,0,.5,1),y.layers.enable(2);var n,o,_=new na([v,y]);function a(){return null!==c&&!0===c.isPresenting}function e(){if(a()){var e=c.getEyeParameters("left"),t=e.renderWidth,i=e.renderHeight;o=r.getPixelRatio(),n=r.getSize(),r.setDrawingBufferSize(2*t,i,1),w.start()}else s.enabled&&(r.setDrawingBufferSize(n.width,n.height,o),w.stop())}_.layers.enable(1),_.layers.enable(2);var x=!1;function b(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),i=0,r=0,n=t.length;i<n;i++){var o=t[i];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("Spatial Controller"))){if(r===e)return o;r++}}}this.enabled=!1,this.userHeight=1.6,this.getController=function(e){var t=u[e];return void 0===t&&((t=new ia).matrixAutoUpdate=!1,t.visible=!1,u[e]=t),t},this.getDevice=function(){return c},this.setDevice=function(e){void 0!==e&&(c=e),w.setContext(e)},this.setPoseTarget=function(e){void 0!==e&&(h=e)},this.getCamera=function(e){if(null===c)return e.position.set(0,s.userHeight,0),e;c.depthNear=e.near,c.depthFar=e.far,c.getFrameData(l);var t=c.stageParameters;t?p.fromArray(t.sittingToStandingTransform):p.makeTranslation(0,s.userHeight,0);var i=l.pose,r=null!==h?h:e;if(r.matrix.copy(p),r.matrix.decompose(r.position,r.quaternion,r.scale),null!==i.orientation&&(m.fromArray(i.orientation),r.quaternion.multiply(m)),null!==i.position&&(m.setFromRotationMatrix(p),g.fromArray(i.position),g.applyQuaternion(m),r.position.add(g)),r.updateMatrixWorld(),!1===c.isPresenting)return e;v.near=e.near,y.near=e.near,v.far=e.far,y.far=e.far,_.matrixWorld.copy(e.matrixWorld),_.matrixWorldInverse.copy(e.matrixWorldInverse),v.matrixWorldInverse.fromArray(l.leftViewMatrix),y.matrixWorldInverse.fromArray(l.rightViewMatrix),d.getInverse(p),v.matrixWorldInverse.multiply(d),y.matrixWorldInverse.multiply(d);var n=r.parent;null!==n&&(f.getInverse(n.matrixWorld),v.matrixWorldInverse.multiply(f),y.matrixWorldInverse.multiply(f)),v.matrixWorld.getInverse(v.matrixWorldInverse),y.matrixWorld.getInverse(y.matrixWorldInverse),v.projectionMatrix.fromArray(l.leftProjectionMatrix),y.projectionMatrix.fromArray(l.rightProjectionMatrix),_.projectionMatrix.copy(v.projectionMatrix);var o=c.getLayers();if(o.length){var a=o[0];null!==a.leftBounds&&4===a.leftBounds.length&&v.bounds.fromArray(a.leftBounds),null!==a.rightBounds&&4===a.rightBounds.length&&y.bounds.fromArray(a.rightBounds)}return function(){for(var e=0;e<u.length;e++){var t=u[e],i=b(e);if(void 0!==i&&void 0!==i.pose){if(null===i.pose)return;var r=i.pose;!1===r.hasPosition&&t.position.set(.2,-.6,-.05),null!==r.position&&t.position.fromArray(r.position),null!==r.orientation&&t.quaternion.fromArray(r.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(p),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var n="Daydream Controller"===i.id?0:1;x!==i.buttons[n].pressed&&((x=i.buttons[n].pressed)?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}(),_},this.getStandingMatrix=function(){return p},this.isPresenting=a;var w=new wi;this.setAnimationLoop=function(e){w.setAnimationLoop(e)},this.submitFrame=function(){a()&&c.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",e)}}function aa(i){var r=i.context,t=null,p=null,d=null,f=null,m=[],g=[];function a(){return null!==p&&null!==d}var e=new ra;e.layers.enable(1),e.viewport=new oi;var n=new ra;n.layers.enable(2),n.viewport=new oi;var v=new na([e,n]);function o(e){var t=m[g.indexOf(e.inputSource)];t&&t.dispatchEvent({type:e.type})}function s(){i.setFramebuffer(null),l.stop()}function c(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}v.layers.enable(1),v.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=m[e];return void 0===t&&((t=new ia).matrixAutoUpdate=!1,t.visible=!1,m[e]=t),t},this.getDevice=function(){return t},this.setDevice=function(e){void 0!==e&&(t=e),r.setCompatibleXRDevice(e)},this.setSession=function(e,t){null!==(p=e)&&(p.addEventListener("select",o),p.addEventListener("selectstart",o),p.addEventListener("selectend",o),p.addEventListener("end",s),p.baseLayer=new XRWebGLLayer(p,r),p.requestFrameOfReference(t.frameOfReferenceType).then(function(e){d=e,i.setFramebuffer(p.baseLayer.framebuffer),l.setContext(p),l.start()}),g=p.getInputSources(),p.addEventListener("inputsourceschange",function(){g=p.getInputSources(),console.log(g)}))},this.getCamera=function(e){if(a()){var t=e.parent,i=v.cameras;c(v,t);for(var r=0;r<i.length;r++)c(i[r],t);e.matrixWorld.copy(v.matrixWorld);for(var n=e.children,o=(r=0,n.length);r<o;r++)n[r].updateMatrixWorld(!0);return v}return e},this.isPresenting=a;var y=null;var l=new wi;l.setAnimationLoop(function(e,t){if(null!==(f=t.getDevicePose(d)))for(var i=p.baseLayer,r=t.views,n=0;n<r.length;n++){var o=r[n],a=i.getViewport(o),s=f.getViewMatrix(o),c=v.cameras[n];c.matrix.fromArray(s).getInverse(c.matrix),c.projectionMatrix.fromArray(o.projectionMatrix),c.viewport.set(a.x,a.y,a.width,a.height),0===n&&(v.matrix.copy(c.matrix),v.projectionMatrix.copy(c.projectionMatrix))}for(n=0;n<m.length;n++){var l=m[n],h=g[n];if(h){var u=t.getInputPose(h,d);if(null!==u){l.matrix.elements=u.pointerMatrix,l.matrix.decompose(l.position,l.rotation,l.scale),l.visible=!0;continue}}l.visible=!1}y&&y(e)}),this.setAnimationLoop=function(e){y=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new THREE.Matrix4},this.submitFrame=function(){}}function sa(e){console.log("THREE.WebGLRenderer","94");var r=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),t=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,n=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,c=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",d=null,U=null;this.domElement=r,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Ee,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var k,T,F,z,h,j,u,E,S,f,g,p,m,v,A,R,L,y,_,H=this,x=!1,b=null,w=null,M=null,G=-1,P="",V=null,W=null,C=new oi,O=new oi,I=null,X=0,D=r.width,q=r.height,Y=1,B=new oi(0,0,D,q),N=new oi(0,0,D,q),J=!1,Z=new pi,K=new fn,Q=!1,$=!1,ee=new Ut,te=new Ft;function ie(){return null===w?Y:1}try{var re={alpha:i,depth:n,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:c,powerPreference:l};if(r.addEventListener("webglcontextlost",se,!1),r.addEventListener("webglcontextrestored",ce,!1),null===(k=t||r.getContext("webgl",re)||r.getContext("experimental-webgl",re)))throw null!==r.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===k.getShaderPrecisionFormat&&(k.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){console.error("THREE.WebGLRenderer: "+e.message)}function ne(){(T=new mn(k)).get("WEBGL_depth_texture"),T.get("OES_texture_float"),T.get("OES_texture_float_linear"),T.get("OES_texture_half_float"),T.get("OES_texture_half_float_linear"),T.get("OES_standard_derivatives"),T.get("OES_element_index_uint"),T.get("ANGLE_instanced_arrays"),_=new ta(k,T),F=new dn(k,T,e),(z=new $o(k,T,_)).scissor(O.copy(N).multiplyScalar(Y)),z.viewport(C.copy(B).multiplyScalar(Y)),h=new yn(k),j=new Mo,u=new ea(k,T,z,j,F,_,h),E=new Mi(k),S=new gn(k,E,h),f=new bn(S,h),A=new xn(k),g=new wo(H,T,F),p=new Ao,m=new qo,v=new un(H,z,f,s),R=new pn(k,T,h),L=new vn(k,T,h),y=new Qo(H,k,z,u,F),h.programs=g.programs,H.context=k,H.capabilities=F,H.extensions=T,H.properties=j,H.renderLists=p,H.state=z,H.info=h}ne();var oe="xr"in navigator?new aa(H):new oa(H);this.vr=oe;var ae=new Zo(H,f,F.maxTextureSize);function se(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function ce(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1,ne()}function le(e){var t,i=e.target;i.removeEventListener("dispose",le),he(t=i),j.remove(t)}function he(e){var t=j.get(e).program;(e.program=void 0)!==t&&g.releaseProgram(t)}this.shadowMap=ae,this.getContext=function(){return k},this.getContextAttributes=function(){return k.getContextAttributes()},this.forceContextLoss=function(){var e=T.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=T.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(e){void 0!==e&&(Y=e,this.setSize(D,q,!1))},this.getSize=function(){return{width:D,height:q}},this.setSize=function(e,t,i){oe.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(D=e,q=t,r.width=e*Y,r.height=t*Y,!1!==i&&(r.style.width=e+"px",r.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(){return{width:D*Y,height:q*Y}},this.setDrawingBufferSize=function(e,t,i){D=e,q=t,Y=i,r.width=e*i,r.height=t*i,this.setViewport(0,0,e,t)},this.getCurrentViewport=function(){return C},this.setViewport=function(e,t,i,r){B.set(e,q-t-r,i,r),z.viewport(C.copy(B).multiplyScalar(Y))},this.setScissor=function(e,t,i,r){N.set(e,q-t-r,i,r),z.scissor(O.copy(N).multiplyScalar(Y))},this.setScissorTest=function(e){z.setScissorTest(J=e)},this.getClearColor=function(){return v.getClearColor()},this.setClearColor=function(){v.setClearColor.apply(v,arguments)},this.getClearAlpha=function(){return v.getClearAlpha()},this.setClearAlpha=function(){v.setClearAlpha.apply(v,arguments)},this.clear=function(e,t,i){var r=0;(void 0===e||e)&&(r|=k.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=k.DEPTH_BUFFER_BIT),(void 0===i||i)&&(r|=k.STENCIL_BUFFER_BIT),k.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,i,r){this.setRenderTarget(e),this.clear(t,i,r)},this.dispose=function(){r.removeEventListener("webglcontextlost",se,!1),r.removeEventListener("webglcontextrestored",ce,!1),p.dispose(),m.dispose(),j.dispose(),f.dispose(),oe.dispose(),me.stop()},this.renderBufferImmediate=function(e,t,i){z.initAttributes();var r=j.get(e);e.hasPositions&&!r.position&&(r.position=k.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=k.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=k.createBuffer()),e.hasColors&&!r.color&&(r.color=k.createBuffer());var n=t.getAttributes();if(e.hasPositions&&(k.bindBuffer(k.ARRAY_BUFFER,r.position),k.bufferData(k.ARRAY_BUFFER,e.positionArray,k.DYNAMIC_DRAW),z.enableAttribute(n.position),k.vertexAttribPointer(n.position,3,k.FLOAT,!1,0,0)),e.hasNormals){if(k.bindBuffer(k.ARRAY_BUFFER,r.normal),!i.isMeshPhongMaterial&&!i.isMeshStandardMaterial&&!i.isMeshNormalMaterial&&!0===i.flatShading)for(var o=0,a=3*e.count;o<a;o+=9){var s=e.normalArray,c=(s[o+0]+s[o+3]+s[o+6])/3,l=(s[o+1]+s[o+4]+s[o+7])/3,h=(s[o+2]+s[o+5]+s[o+8])/3;s[o+0]=c,s[o+1]=l,s[o+2]=h,s[o+3]=c,s[o+4]=l,s[o+5]=h,s[o+6]=c,s[o+7]=l,s[o+8]=h}k.bufferData(k.ARRAY_BUFFER,e.normalArray,k.DYNAMIC_DRAW),z.enableAttribute(n.normal),k.vertexAttribPointer(n.normal,3,k.FLOAT,!1,0,0)}e.hasUvs&&i.map&&(k.bindBuffer(k.ARRAY_BUFFER,r.uv),k.bufferData(k.ARRAY_BUFFER,e.uvArray,k.DYNAMIC_DRAW),z.enableAttribute(n.uv),k.vertexAttribPointer(n.uv,2,k.FLOAT,!1,0,0)),e.hasColors&&i.vertexColors!==Te&&(k.bindBuffer(k.ARRAY_BUFFER,r.color),k.bufferData(k.ARRAY_BUFFER,e.colorArray,k.DYNAMIC_DRAW),z.enableAttribute(n.color),k.vertexAttribPointer(n.color,3,k.FLOAT,!1,0,0)),z.disableUnusedAttributes(),k.drawArrays(k.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,i,r,n,o){var a=n.isMesh&&n.matrixWorld.determinant()<0;z.setMaterial(r,a);var s=_e(e,t,r,n),c=i.id+"_"+s.id+"_"+(!0===r.wireframe),l=!1;c!==P&&(P=c,l=!0),n.morphTargetInfluences&&(A.update(n,i,r,s),l=!0);var h,u=i.index,p=i.attributes.position,d=1;!0===r.wireframe&&(u=S.getWireframeAttribute(i),d=2);var f=R;null!==u&&(h=E.get(u),(f=L).setIndex(h)),l&&(!function(e,t,i){if(i&&i.isInstancedBufferGeometry&&null===T.get("ANGLE_instanced_arrays"))return console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");z.initAttributes();var r=i.attributes,n=t.getAttributes(),o=e.defaultAttributeValues;for(var a in n){var s=n[a];if(0<=s){var c=r[a];if(void 0!==c){var l=c.normalized,h=c.itemSize,u=E.get(c);if(void 0===u)continue;var p=u.buffer,d=u.type,f=u.bytesPerElement;if(c.isInterleavedBufferAttribute){var m=c.data,g=m.stride,v=c.offset;m&&m.isInstancedInterleavedBuffer?(z.enableAttributeAndDivisor(s,m.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=m.meshPerAttribute*m.count)):z.enableAttribute(s),k.bindBuffer(k.ARRAY_BUFFER,p),k.vertexAttribPointer(s,h,d,l,g*f,v*f)}else c.isInstancedBufferAttribute?(z.enableAttributeAndDivisor(s,c.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=c.meshPerAttribute*c.count)):z.enableAttribute(s),k.bindBuffer(k.ARRAY_BUFFER,p),k.vertexAttribPointer(s,h,d,l,0,0)}else if(void 0!==o){var y=o[a];if(void 0!==y)switch(y.length){case 2:k.vertexAttrib2fv(s,y);break;case 3:k.vertexAttrib3fv(s,y);break;case 4:k.vertexAttrib4fv(s,y);break;default:k.vertexAttrib1fv(s,y)}}}}z.disableUnusedAttributes()}(r,s,i),null!==u&&k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,h.buffer));var m=1/0;null!==u?m=u.count:void 0!==p&&(m=p.count);var g=i.drawRange.start*d,v=i.drawRange.count*d,y=null!==o?o.start*d:0,_=null!==o?o.count*d:1/0,x=Math.max(g,y),b=Math.min(m,g+v,y+_)-1,w=Math.max(0,b-x+1);if(0!==w){if(n.isMesh)if(!0===r.wireframe)z.setLineWidth(r.wireframeLinewidth*ie()),f.setMode(k.LINES);else switch(n.drawMode){case Mt:f.setMode(k.TRIANGLES);break;case 1:f.setMode(k.TRIANGLE_STRIP);break;case 2:f.setMode(k.TRIANGLE_FAN)}else if(n.isLine){var M=r.linewidth;void 0===M&&(M=1),z.setLineWidth(M*ie()),n.isLineSegments?f.setMode(k.LINES):n.isLineLoop?f.setMode(k.LINE_LOOP):f.setMode(k.LINE_STRIP)}else n.isPoints&&f.setMode(k.POINTS);i&&i.isInstancedBufferGeometry?0<i.maxInstancedCount&&f.renderInstances(i,x,w):f.render(x,w)}},this.compile=function(i,e){(U=m.get(i,e)).init(),i.traverse(function(e){e.isLight&&(U.pushLight(e),e.castShadow&&U.pushShadow(e))}),U.setupLights(e),i.traverse(function(e){if(e.material)if(Array.isArray(e.material))for(var t=0;t<e.material.length;t++)ye(e.material[t],i.fog,e);else ye(e.material,i.fog,e)})};var ue=null;var pe,de,fe,me=new wi;function ge(e,t,i,r){for(var n=0,o=e.length;n<o;n++){var a=e[n],s=a.object,c=a.geometry,l=void 0===r?a.material:r,h=a.group;if(i.isArrayCamera)for(var u=(W=i).cameras,p=0,d=u.length;p<d;p++){var f=u[p];if(s.layers.test(f.layers)){if("viewport"in f)z.viewport(C.copy(f.viewport));else{var m=f.bounds,g=m.x*D,v=m.y*q,y=m.z*D,_=m.w*q;z.viewport(C.set(g,v,y,_).multiplyScalar(Y))}ve(s,t,f,c,l,h)}}else W=null,ve(s,t,i,c,l,h)}}function ve(e,t,i,r,n,o){if(e.onBeforeRender(H,t,i,r,n,o),U=m.get(t,W||i),e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var a=e.isMesh&&e.matrixWorld.determinant()<0;z.setMaterial(n,a);var s=_e(i,t.fog,n,e);P="",c=s,l=n,e.render(function(e){H.renderBufferImmediate(e,c,l)})}else H.renderBufferDirect(i,t.fog,r,n,e,o);var c,l;e.onAfterRender(H,t,i,r,n,o),U=m.get(t,W||i)}function ye(e,t,i){var r=j.get(e),n=U.state.lights,o=U.state.shadowsArray,a=g.getParameters(e,n.state,o,t,K.numPlanes,K.numIntersection,i),s=g.getProgramCode(e,a),c=r.program,l=!0;if(void 0===c)e.addEventListener("dispose",le);else if(c.code!==s)he(e);else if(r.lightsHash!==n.state.hash)j.update(e,"lightsHash",n.state.hash),l=!1;else{if(void 0!==a.shaderID)return;l=!1}if(l){if(a.shaderID){var h=bi[a.shaderID];r.shader={name:e.type,uniforms:mi.clone(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}}else r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(r.shader,H),c=g.acquireProgram(e,r.shader,a,s),r.program=c,e.program=c}var u=c.getAttributes();if(e.morphTargets)for(var p=e.numSupportedMorphTargets=0;p<H.maxMorphTargets;p++)0<=u["morphTarget"+p]&&e.numSupportedMorphTargets++;if(e.morphNormals)for(p=e.numSupportedMorphNormals=0;p<H.maxMorphNormals;p++)0<=u["morphNormal"+p]&&e.numSupportedMorphNormals++;var d=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=K.numPlanes,r.numIntersection=K.numIntersection,d.clippingPlanes=K.uniform),r.fog=t,r.lightsHash=n.state.hash,e.lights&&(d.ambientLightColor.value=n.state.ambient,d.directionalLights.value=n.state.directional,d.spotLights.value=n.state.spot,d.rectAreaLights.value=n.state.rectArea,d.pointLights.value=n.state.point,d.hemisphereLights.value=n.state.hemi,d.directionalShadowMap.value=n.state.directionalShadowMap,d.directionalShadowMatrix.value=n.state.directionalShadowMatrix,d.spotShadowMap.value=n.state.spotShadowMap,d.spotShadowMatrix.value=n.state.spotShadowMatrix,d.pointShadowMap.value=n.state.pointShadowMap,d.pointShadowMatrix.value=n.state.pointShadowMatrix);var f=r.program.getUniforms(),m=ho.seqWithValue(f.seq,d);r.uniformsList=m}function _e(e,t,i,r){X=0;var n=j.get(i),o=U.state.lights;if(Q&&($||e!==V)){var a=e===V&&i.id===G;K.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,e,n,a)}!1===i.needsUpdate&&(void 0===n.program?i.needsUpdate=!0:i.fog&&n.fog!==t?i.needsUpdate=!0:i.lights&&n.lightsHash!==o.state.hash?i.needsUpdate=!0:void 0===n.numClippingPlanes||n.numClippingPlanes===K.numPlanes&&n.numIntersection===K.numIntersection||(i.needsUpdate=!0)),i.needsUpdate&&(ye(i,t,r),i.needsUpdate=!1);var s,c,l,h,u,p,d,f,m,g,v,y,_,x,b,w,M,T,E=!1,S=!1,A=!1,R=n.program,L=R.getUniforms(),P=n.shader.uniforms;if(z.useProgram(R.program)&&(A=S=E=!0),i.id!==G&&(G=i.id,S=!0),E||e!==V){if(L.setValue(k,"projectionMatrix",e.projectionMatrix),F.logarithmicDepthBuffer&&L.setValue(k,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),V!==(W||e)&&(V=W||e,A=S=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap){var C=L.map.cameraPosition;void 0!==C&&C.setValue(k,te.setFromMatrixPosition(e.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning)&&L.setValue(k,"viewMatrix",e.matrixWorldInverse)}if(i.skinning){L.setOptional(k,r,"bindMatrix"),L.setOptional(k,r,"bindMatrixInverse");var O=r.skeleton;if(O){var I=O.bones;if(F.floatVertexTextures){if(void 0===O.boneTexture){var D=Math.sqrt(4*I.length);D=Bt.ceilPowerOfTwo(D),D=Math.max(D,4);var B=new Float32Array(D*D*4);B.set(O.boneMatrices);var N=new ci(B,D,D,Ye,ze);N.needsUpdate=!0,O.boneMatrices=B,O.boneTexture=N,O.boneTextureSize=D}L.setValue(k,"boneTexture",O.boneTexture),L.setValue(k,"boneTextureSize",O.boneTextureSize)}else L.setOptional(k,O,"boneMatrices")}}return S&&(L.setValue(k,"toneMappingExposure",H.toneMappingExposure),L.setValue(k,"toneMappingWhitePoint",H.toneMappingWhitePoint),i.lights&&(T=A,(M=P).ambientLightColor.needsUpdate=T,M.directionalLights.needsUpdate=T,M.pointLights.needsUpdate=T,M.spotLights.needsUpdate=T,M.rectAreaLights.needsUpdate=T,M.hemisphereLights.needsUpdate=T),t&&i.fog&&(w=t,(b=P).fogColor.value=w.color,w.isFog?(b.fogNear.value=w.near,b.fogFar.value=w.far):w.isFogExp2&&(b.fogDensity.value=w.density)),i.isMeshBasicMaterial?xe(P,i):i.isMeshLambertMaterial?(xe(P,i),_=P,(x=i).emissiveMap&&(_.emissiveMap.value=x.emissiveMap)):i.isMeshPhongMaterial?(xe(P,i),i.isMeshToonMaterial?(be(v=P,y=i),y.gradientMap&&(v.gradientMap.value=y.gradientMap)):be(P,i)):i.isMeshStandardMaterial?(xe(P,i),i.isMeshPhysicalMaterial?(we(m=P,g=i),m.reflectivity.value=g.reflectivity,m.clearCoat.value=g.clearCoat,m.clearCoatRoughness.value=g.clearCoatRoughness):we(P,i)):i.isMeshDepthMaterial?(xe(P,i),d=P,(f=i).displacementMap&&(d.displacementMap.value=f.displacementMap,d.displacementScale.value=f.displacementScale,d.displacementBias.value=f.displacementBias)):i.isMeshDistanceMaterial?(xe(P,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(P,i)):i.isMeshNormalMaterial?(xe(P,i),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Me&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Me&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(P,i)):i.isLineBasicMaterial?(p=i,(u=P).diffuse.value=p.color,u.opacity.value=p.opacity,i.isLineDashedMaterial&&(h=i,(l=P).dashSize.value=h.dashSize,l.totalSize.value=h.dashSize+h.gapSize,l.scale.value=h.scale)):i.isPointsMaterial?(c=i,(s=P).diffuse.value=c.color,s.opacity.value=c.opacity,s.size.value=c.size*Y,s.scale.value=.5*q,s.map.value=c.map,null!==c.map&&(!0===c.map.matrixAutoUpdate&&c.map.updateMatrix(),s.uvTransform.value.copy(c.map.matrix))):i.isShadowMaterial&&(P.color.value=i.color,P.opacity.value=i.opacity),void 0!==P.ltc_1&&(P.ltc_1.value=xi.LTC_1),void 0!==P.ltc_2&&(P.ltc_2.value=xi.LTC_2),ho.upload(k,n.uniformsList,P,H)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(ho.upload(k,n.uniformsList,P,H),i.uniformsNeedUpdate=!1),L.setValue(k,"modelViewMatrix",r.modelViewMatrix),L.setValue(k,"normalMatrix",r.normalMatrix),L.setValue(k,"modelMatrix",r.matrixWorld),R}function xe(e,t){var i;e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=j.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?i=t.map:t.specularMap?i=t.specularMap:t.displacementMap?i=t.displacementMap:t.normalMap?i=t.normalMap:t.bumpMap?i=t.bumpMap:t.roughnessMap?i=t.roughnessMap:t.metalnessMap?i=t.metalnessMap:t.alphaMap?i=t.alphaMap:t.emissiveMap&&(i=t.emissiveMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}function be(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Me&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Me&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function we(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===Me&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===Me&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}me.setAnimationLoop(function(e){oe.isPresenting()||ue&&ue(e)}),"undefined"!=typeof window&&me.setContext(window),this.setAnimationLoop=function(e){ue=e,oe.setAnimationLoop(e),me.start()},this.render=function(e,t,i,r){if(t&&t.isCamera){if(!x){P="",G=-1,!(V=null)===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),oe.enabled&&(t=oe.getCamera(t)),(U=m.get(e,t)).init(),e.onBeforeRender(H,e,t,i),ee.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Z.setFromMatrix(ee),$=this.localClippingEnabled,Q=K.init(this.clippingPlanes,$,t),(d=p.get(e,t)).init(),function e(t,i,r){if(!1===t.visible)return;var n=t.layers.test(i.layers);if(n)if(t.isLight)U.pushLight(t),t.castShadow&&U.pushShadow(t);else if(t.isSprite)t.frustumCulled&&!Z.intersectsSprite(t)||U.pushSprite(t);else if(t.isImmediateRenderObject)r&&te.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ee),d.push(t,null,t.material,te.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||Z.intersectsObject(t))){r&&te.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ee);var o=f.update(t),a=t.material;if(Array.isArray(a))for(var s=o.groups,c=0,l=s.length;c<l;c++){var h=s[c],u=a[h.materialIndex];u&&u.visible&&d.push(t,o,u,te.z,h)}else a.visible&&d.push(t,o,a,te.z,null)}var p=t.children;for(var c=0,l=p.length;c<l;c++)e(p[c],i,r)}(e,t,H.sortObjects),!0===H.sortObjects&&d.sort(),Q&&K.beginShadows();var n=U.state.shadowsArray;ae.render(n,e,t),U.setupLights(t),Q&&K.endShadows(),this.info.autoReset&&this.info.reset(),void 0===i&&(i=null),this.setRenderTarget(i),v.render(d,e,t,r);var o=d.opaque,a=d.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;o.length&&ge(o,e,t,s),a.length&&ge(a,e,t,s)}else o.length&&ge(o,e,t),a.length&&ge(a,e,t);var c=U.state.spritesArray;y.render(c,e,t),i&&u.updateRenderTargetMipmap(i),z.buffers.depth.setTest(!0),z.buffers.depth.setMask(!0),z.buffers.color.setMask(!0),z.setPolygonOffset(!1),e.onAfterRender(H,e,t),oe.enabled&&oe.submitFrame(),U=d=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var e=X;return e>=F.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+F.maxTextures),X+=1,e},this.setTexture2D=(pe=!1,function(e,t){e&&e.isWebGLRenderTarget&&(pe||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),pe=!0),e=e.texture),u.setTexture2D(e,t)}),this.setTexture=(de=!1,function(e,t){de||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),de=!0),u.setTexture2D(e,t)}),this.setTextureCube=(fe=!1,function(e,t){e&&e.isWebGLRenderTargetCube&&(fe||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),fe=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?u.setTextureCube(e,t):u.setTextureCubeDynamic(e,t)}),this.setFramebuffer=function(e){b=e},this.getRenderTarget=function(){return w},this.setRenderTarget=function(e){(w=e)&&void 0===j.get(e).__webglFramebuffer&&u.setupRenderTarget(e);var t=b,i=!1;if(e){var r=j.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=r[e.activeCubeFace],i=!0):t=r,C.copy(e.viewport),O.copy(e.scissor),I=e.scissorTest}else C.copy(B).multiplyScalar(Y),O.copy(N).multiplyScalar(Y),I=J;if(M!==t&&(k.bindFramebuffer(k.FRAMEBUFFER,t),M=t),z.viewport(C),z.scissor(O),z.setScissorTest(I),i){var n=j.get(e.texture);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,n.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,i,r,n,o){if(e&&e.isWebGLRenderTarget){var a=j.get(e).__webglFramebuffer;if(a){var s=!1;a!==M&&(k.bindFramebuffer(k.FRAMEBUFFER,a),s=!0);try{var c=e.texture,l=c.format,h=c.type;if(l!==Ye&&_.convert(l)!==k.getParameter(k.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(h===De||_.convert(h)===k.getParameter(k.IMPLEMENTATION_COLOR_READ_TYPE)||h===ze&&(T.get("OES_texture_float")||T.get("WEBGL_color_buffer_float"))||h===je&&T.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");k.checkFramebufferStatus(k.FRAMEBUFFER)===k.FRAMEBUFFER_COMPLETE?0<=t&&t<=e.width-r&&0<=i&&i<=e.height-n&&k.readPixels(t,i,r,n,_.convert(l),_.convert(h),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&k.bindFramebuffer(k.FRAMEBUFFER,M)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,i){var r=t.image.width,n=t.image.height,o=_.convert(t.format);this.setTexture2D(t,0),k.copyTexImage2D(k.TEXTURE_2D,i||0,o,e.x,e.y,r,n,0)},this.copyTextureToTexture=function(e,t,i,r){var n=t.image.width,o=t.image.height,a=_.convert(i.format),s=_.convert(i.type);this.setTexture2D(i,0),t.isDataTexture?k.texSubImage2D(k.TEXTURE_2D,r||0,e.x,e.y,n,o,a,s,t.image.data):k.texSubImage2D(k.TEXTURE_2D,r||0,e.x,e.y,a,s,t.image)}}function ca(e,t){this.name="",this.color=new vi(e),this.density=void 0!==t?t:25e-5}function la(e,t,i){this.name="",this.color=new vi(e),this.near=void 0!==t?t:1,this.far=void 0!==i?i:1e3}function ha(){Wi.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function ua(e){nn.call(this),this.type="SpriteMaterial",this.color=new vi(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function pa(e){Wi.call(this),this.type="Sprite",this.material=void 0!==e?e:new ua,this.center=new Nt(.5,.5)}function da(){Wi.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function fa(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Ut)}}function ma(){Wi.call(this),this.type="Bone"}function ga(e,t){hn.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ut,this.bindMatrixInverse=new Ut;var i=new fa(this.initBones());this.bind(i,this.matrixWorld),this.normalizeSkinWeights()}function va(e){nn.call(this),this.type="LineBasicMaterial",this.color=new vi(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function ya(e,t,i){if(1===i)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new _a(e,t);Wi.call(this),this.type="Line",this.geometry=void 0!==e?e:new Ar,this.material=void 0!==t?t:new va({color:16777215*Math.random()})}function _a(e,t){ya.call(this,e,t),this.type="LineSegments"}function xa(e,t){ya.call(this,e,t),this.type="LineLoop"}function ba(e){nn.call(this),this.type="PointsMaterial",this.color=new vi(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function wa(e,t){Wi.call(this),this.type="Points",this.geometry=void 0!==e?e:new Ar,this.material=void 0!==t?t:new ba({color:16777215*Math.random()})}function Ma(e,t,i,r,n,o,a,s,c){ni.call(this,e,t,i,r,n,o,a,s,c),this.generateMipmaps=!1}function Ta(e,t,i,r,n,o,a,s,c,l,h,u){ni.call(this,null,o,a,s,c,l,r,n,h,u),this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Ea(e,t,i,r,n,o,a,s,c,l){if((l=void 0!==l?l:Qe)!==Qe&&l!==$e)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&l===Qe&&(i=Ue),void 0===i&&l===$e&&(i=We),ni.call(this,null,r,n,o,a,s,l,i,c),this.image={width:e,height:t},this.magFilter=void 0!==a?a:Re,this.minFilter=void 0!==s?s:Re,this.flipY=!1,this.generateMipmaps=!1}function Sa(e){Ar.call(this),this.type="WireframeGeometry";var t,i,r,n,o,a,s,c,l,h,u=[],p=[0,0],d={},f=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,r=m.length;t<r;t++){var g=m[t];for(i=0;i<3;i++)s=g[f[i]],c=g[f[(i+1)%3]],p[0]=Math.min(s,c),p[1]=Math.max(s,c),void 0===d[l=p[0]+","+p[1]]&&(d[l]={index1:p[0],index2:p[1]})}for(l in d)a=d[l],h=e.vertices[a.index1],u.push(h.x,h.y,h.z),h=e.vertices[a.index2],u.push(h.x,h.y,h.z)}else if(e&&e.isBufferGeometry){var v,y,_,x,b,w;if(h=new Ft,null!==e.index){for(v=e.attributes.position,y=e.index,0===(_=e.groups).length&&(_=[{start:0,count:y.count,materialIndex:0}]),n=0,o=_.length;n<o;++n)for(r=(t=(x=_[n]).start)+x.count;t<r;t+=3)for(i=0;i<3;i++)s=y.getX(t+i),c=y.getX(t+(i+1)%3),p[0]=Math.min(s,c),p[1]=Math.max(s,c),void 0===d[l=p[0]+","+p[1]]&&(d[l]={index1:p[0],index2:p[1]});for(l in d)a=d[l],h.fromBufferAttribute(v,a.index1),u.push(h.x,h.y,h.z),h.fromBufferAttribute(v,a.index2),u.push(h.x,h.y,h.z)}else for(t=0,r=(v=e.attributes.position).count/3;t<r;t++)for(i=0;i<3;i++)b=3*t+i,h.fromBufferAttribute(v,b),u.push(h.x,h.y,h.z),w=3*t+(i+1)%3,h.fromBufferAttribute(v,w),u.push(h.x,h.y,h.z)}this.addAttribute("position",new pr(u,3))}function Aa(e,t,i){rr.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:i},this.fromBufferGeometry(new Ra(e,t,i)),this.mergeVertices()}function Ra(e,t,i){Ar.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:i};var r,n,o=[],a=[],s=[],c=[],l=new Ft,h=new Ft,u=new Ft,p=new Ft,d=new Ft;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var f=t+1;for(r=0;r<=i;r++){var m=r/i;for(n=0;n<=t;n++){var g=n/t;e(g,m,h),a.push(h.x,h.y,h.z),0<=g-1e-5?(e(g-1e-5,m,u),p.subVectors(h,u)):(e(g+1e-5,m,u),p.subVectors(u,h)),0<=m-1e-5?(e(g,m-1e-5,u),d.subVectors(h,u)):(e(g,m+1e-5,u),d.subVectors(u,h)),l.crossVectors(p,d).normalize(),s.push(l.x,l.y,l.z),c.push(g,m)}}for(r=0;r<i;r++)for(n=0;n<t;n++){var v=r*f+n,y=r*f+n+1,_=(r+1)*f+n+1,x=(r+1)*f+n;o.push(v,y,x),o.push(y,_,x)}this.setIndex(o),this.addAttribute("position",new pr(a,3)),this.addAttribute("normal",new pr(s,3)),this.addAttribute("uv",new pr(c,2))}function La(e,t,i,r){rr.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r},this.fromBufferGeometry(new Pa(e,t,i,r)),this.mergeVertices()}function Pa(r,o,e,t){Ar.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:r,indices:o,radius:e,detail:t},e=e||1;var h=[],u=[];function a(e,t,i,r){var n,o,a=Math.pow(2,r),s=[];for(n=0;n<=a;n++){s[n]=[];var c=e.clone().lerp(i,n/a),l=t.clone().lerp(i,n/a),h=a-n;for(o=0;o<=h;o++)s[n][o]=0===o&&n===a?c:c.clone().lerp(l,o/h)}for(n=0;n<a;n++)for(o=0;o<2*(a-n)-1;o++){var u=Math.floor(o/2);o%2==0?(p(s[n][u+1]),p(s[n+1][u]),p(s[n][u])):(p(s[n][u+1]),p(s[n+1][u+1]),p(s[n+1][u]))}}function p(e){h.push(e.x,e.y,e.z)}function s(e,t){var i=3*e;t.x=r[i+0],t.y=r[i+1],t.z=r[i+2]}function d(e,t,i,r){r<0&&1===e.x&&(u[t]=e.x-1),0===i.x&&0===i.z&&(u[t]=r/2/Math.PI+.5)}function f(e){return Math.atan2(e.z,-e.x)}!function(e){for(var t=new Ft,i=new Ft,r=new Ft,n=0;n<o.length;n+=3)s(o[n+0],t),s(o[n+1],i),s(o[n+2],r),a(t,i,r,e)}(t=t||0),function(e){for(var t=new Ft,i=0;i<h.length;i+=3)t.x=h[i+0],t.y=h[i+1],t.z=h[i+2],t.normalize().multiplyScalar(e),h[i+0]=t.x,h[i+1]=t.y,h[i+2]=t.z}(e),function(){for(var e=new Ft,t=0;t<h.length;t+=3){e.x=h[t+0],e.y=h[t+1],e.z=h[t+2];var i=f(e)/2/Math.PI+.5,r=(n=e,Math.atan2(-n.y,Math.sqrt(n.x*n.x+n.z*n.z))/Math.PI+.5);u.push(i,1-r)}var n;(function(){for(var e=new Ft,t=new Ft,i=new Ft,r=new Ft,n=new Nt,o=new Nt,a=new Nt,s=0,c=0;s<h.length;s+=9,c+=6){e.set(h[s+0],h[s+1],h[s+2]),t.set(h[s+3],h[s+4],h[s+5]),i.set(h[s+6],h[s+7],h[s+8]),n.set(u[c+0],u[c+1]),o.set(u[c+2],u[c+3]),a.set(u[c+4],u[c+5]),r.copy(e).add(t).add(i).divideScalar(3);var l=f(r);d(n,c+0,e,l),d(o,c+2,t,l),d(a,c+4,i,l)}})(),function(){for(var e=0;e<u.length;e+=6){var t=u[e+0],i=u[e+2],r=u[e+4],n=Math.max(t,i,r),o=Math.min(t,i,r);.9<n&&o<.1&&(t<.2&&(u[e+0]+=1),i<.2&&(u[e+2]+=1),r<.2&&(u[e+4]+=1))}}()}(),this.addAttribute("position",new pr(h,3)),this.addAttribute("normal",new pr(h.slice(),3)),this.addAttribute("uv",new pr(u,2)),0===t?this.computeVertexNormals():this.normalizeNormals()}function Ca(e,t){rr.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Oa(e,t)),this.mergeVertices()}function Oa(e,t){Pa.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Ia(e,t){rr.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Da(e,t)),this.mergeVertices()}function Da(e,t){Pa.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Ba(e,t){rr.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Na(e,t)),this.mergeVertices()}function Na(e,t){var i=(1+Math.sqrt(5))/2;Pa.call(this,[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Ua(e,t){rr.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ka(e,t)),this.mergeVertices()}function ka(e,t){var i=(1+Math.sqrt(5))/2,r=1/i;Pa.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Fa(e,t,i,r,n,o){rr.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:n},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new za(e,t,i,r,n);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function za(a,s,c,l,e){Ar.call(this),this.type="TubeBufferGeometry",this.parameters={path:a,tubularSegments:s,radius:c,radialSegments:l,closed:e},s=s||64,c=c||1,l=l||8,e=e||!1;var h=a.computeFrenetFrames(s,e);this.tangents=h.tangents,this.normals=h.normals,this.binormals=h.binormals;var n,u,p=new Ft,d=new Ft,t=new Nt,f=new Ft,m=[],g=[],i=[],o=[];function r(e){f=a.getPointAt(e/s,f);var t=h.normals[e],i=h.binormals[e];for(u=0;u<=l;u++){var r=u/l*Math.PI*2,n=Math.sin(r),o=-Math.cos(r);d.x=o*t.x+n*i.x,d.y=o*t.y+n*i.y,d.z=o*t.z+n*i.z,d.normalize(),g.push(d.x,d.y,d.z),p.x=f.x+c*d.x,p.y=f.y+c*d.y,p.z=f.z+c*d.z,m.push(p.x,p.y,p.z)}}!function(){for(n=0;n<s;n++)r(n);r(!1===e?s:0),function(){for(n=0;n<=s;n++)for(u=0;u<=l;u++)t.x=n/s,t.y=u/l,i.push(t.x,t.y)}(),function(){for(u=1;u<=s;u++)for(n=1;n<=l;n++){var e=(l+1)*(u-1)+(n-1),t=(l+1)*u+(n-1),i=(l+1)*u+n,r=(l+1)*(u-1)+n;o.push(e,t,r),o.push(t,i,r)}}()}(),this.setIndex(o),this.addAttribute("position",new pr(m,3)),this.addAttribute("normal",new pr(g,3)),this.addAttribute("uv",new pr(i,2))}function ja(e,t,i,r,n,o,a){rr.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:n,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Ha(e,t,i,r,n,o)),this.mergeVertices()}function Ha(e,t,i,r,n,o){Ar.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:n,q:o},e=e||1,t=t||.4,i=Math.floor(i)||64,r=Math.floor(r)||8,n=n||2,o=o||3;var a,s,c=[],l=[],h=[],u=[],p=new Ft,d=new Ft,f=new Ft,m=new Ft,g=new Ft,v=new Ft,y=new Ft;for(a=0;a<=i;++a){var _=a/i*n*Math.PI*2;for(A(_,n,o,e,f),A(_+.01,n,o,e,m),v.subVectors(m,f),y.addVectors(m,f),g.crossVectors(v,y),y.crossVectors(g,v),g.normalize(),y.normalize(),s=0;s<=r;++s){var x=s/r*Math.PI*2,b=-t*Math.cos(x),w=t*Math.sin(x);p.x=f.x+(b*y.x+w*g.x),p.y=f.y+(b*y.y+w*g.y),p.z=f.z+(b*y.z+w*g.z),l.push(p.x,p.y,p.z),d.subVectors(p,f).normalize(),h.push(d.x,d.y,d.z),u.push(a/i),u.push(s/r)}}for(s=1;s<=i;s++)for(a=1;a<=r;a++){var M=(r+1)*(s-1)+(a-1),T=(r+1)*s+(a-1),E=(r+1)*s+a,S=(r+1)*(s-1)+a;c.push(M,T,S),c.push(T,E,S)}function A(e,t,i,r,n){var o=Math.cos(e),a=Math.sin(e),s=i/t*e,c=Math.cos(s);n.x=r*(2+c)*.5*o,n.y=r*(2+c)*a*.5,n.z=r*Math.sin(s)*.5}this.setIndex(c),this.addAttribute("position",new pr(l,3)),this.addAttribute("normal",new pr(h,3)),this.addAttribute("uv",new pr(u,2))}function Ga(e,t,i,r,n){rr.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:n},this.fromBufferGeometry(new Va(e,t,i,r,n)),this.mergeVertices()}function Va(e,t,i,r,n){Ar.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:n},e=e||1,t=t||.4,i=Math.floor(i)||8,r=Math.floor(r)||6,n=n||2*Math.PI;var o,a,s=[],c=[],l=[],h=[],u=new Ft,p=new Ft,d=new Ft;for(o=0;o<=i;o++)for(a=0;a<=r;a++){var f=a/r*n,m=o/i*Math.PI*2;p.x=(e+t*Math.cos(m))*Math.cos(f),p.y=(e+t*Math.cos(m))*Math.sin(f),p.z=t*Math.sin(m),c.push(p.x,p.y,p.z),u.x=e*Math.cos(f),u.y=e*Math.sin(f),d.subVectors(p,u).normalize(),l.push(d.x,d.y,d.z),h.push(a/r),h.push(o/i)}for(o=1;o<=i;o++)for(a=1;a<=r;a++){var g=(r+1)*o+a-1,v=(r+1)*(o-1)+a-1,y=(r+1)*(o-1)+a,_=(r+1)*o+a;s.push(g,v,_),s.push(v,y,_)}this.setIndex(s),this.addAttribute("position",new pr(c,3)),this.addAttribute("normal",new pr(l,3)),this.addAttribute("uv",new pr(h,2))}((Yo.prototype=Object.create(nn.prototype)).constructor=Yo).prototype.isMeshDepthMaterial=!0,Yo.prototype.copy=function(e){return nn.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},((Jo.prototype=Object.create(nn.prototype)).constructor=Jo).prototype.isMeshDistanceMaterial=!0,Jo.prototype.copy=function(e){return nn.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},((Ko.prototype=Object.create(ni.prototype)).constructor=Ko).prototype.isCanvasTexture=!0,ia.prototype=Object.assign(Object.create(Wi.prototype),{constructor:ia,isGroup:!0}),ra.prototype=Object.assign(Object.create(Xi.prototype),{constructor:ra,isPerspectiveCamera:!0,copy:function(e,t){return Xi.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Bt.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Bt.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Bt.RAD2DEG*Math.atan(Math.tan(.5*Bt.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,i,r,n,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=n,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Bt.DEG2RAD*this.fov)/this.zoom,i=2*t,r=this.aspect*i,n=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;n+=o.offsetX*r/a,t-=o.offsetY*i/s,r*=o.width/a,i*=o.height/s}var c=this.filmOffset;0!==c&&(n+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+r,t,t-i,e,this.far)},toJSON:function(e){var t=Wi.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),na.prototype=Object.assign(Object.create(ra.prototype),{constructor:na,isArrayCamera:!0}),ca.prototype.isFogExp2=!0,ca.prototype.clone=function(){return new ca(this.color,this.density)},ca.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},la.prototype.isFog=!0,la.prototype.clone=function(){return new la(this.color,this.near,this.far)},la.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},ha.prototype=Object.assign(Object.create(Wi.prototype),{constructor:ha,copy:function(e,t){return Wi.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=Wi.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),((ua.prototype=Object.create(nn.prototype)).constructor=ua).prototype.isSpriteMaterial=!0,ua.prototype.copy=function(e){return nn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},pa.prototype=Object.assign(Object.create(Wi.prototype),{constructor:pa,isSprite:!0,raycast:function(){var c=new Ft,l=new Ft,h=new Ft,a=new Nt,s=new Nt,u=new Ut,p=new Ft,d=new Ft,f=new Ft;function m(e,t,i,r,n,o){a.subVectors(e,i).addScalar(.5).multiply(r),void 0!==n?(s.x=o*a.x-n*a.y,s.y=n*a.x+o*a.y):s.copy(a),e.copy(t),e.x+=s.x,e.y+=s.y,e.applyMatrix4(u)}return function(e,t){l.setFromMatrixScale(this.matrixWorld),u.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),h.setFromMatrixPosition(this.modelViewMatrix);var i,r,n=this.material.rotation;0!==n&&(r=Math.cos(n),i=Math.sin(n));var o=this.center;m(p.set(-.5,-.5,0),h,o,l,i,r),m(d.set(.5,-.5,0),h,o,l,i,r),m(f.set(.5,.5,0),h,o,l,i,r);var a=e.ray.intersectTriangle(p,d,f,!1,c);if(null!==a||(m(d.set(-.5,.5,0),h,o,l,i,r),null!==(a=e.ray.intersectTriangle(p,f,d,!1,c)))){var s=e.ray.origin.distanceTo(c);s<e.near||s>e.far||t.push({distance:s,point:c.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return Wi.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),da.prototype=Object.assign(Object.create(Wi.prototype),{constructor:da,copy:function(e){Wi.prototype.copy.call(this,e,!1);for(var t=e.levels,i=0,r=t.length;i<r;i++){var n=t[i];this.addLevel(n.object.clone(),n.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var i=this.levels,r=0;r<i.length&&!(t<i[r].distance);r++);i.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,i=1,r=t.length;i<r&&!(e<t[i].distance);i++);return t[i-1].object},raycast:(Co=new Ft,function(e,t){Co.setFromMatrixPosition(this.matrixWorld);var i=e.ray.origin.distanceTo(Co);this.getObjectForDistance(i).raycast(e,t)}),update:(Lo=new Ft,Po=new Ft,function(e){var t=this.levels;if(1<t.length){Lo.setFromMatrixPosition(e.matrixWorld),Po.setFromMatrixPosition(this.matrixWorld);var i=Lo.distanceTo(Po);t[0].object.visible=!0;for(var r=1,n=t.length;r<n&&i>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(;r<n;r++)t[r].object.visible=!1}}),toJSON:function(e){var t=Wi.prototype.toJSON.call(this,e);t.object.levels=[];for(var i=this.levels,r=0,n=i.length;r<n;r++){var o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Object.assign(fa.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var i=new Ut;this.bones[e]&&i.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(i)}},pose:function(){var e,t,i;for(t=0,i=this.bones.length;t<i;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,i=this.bones.length;t<i;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:(Oo=new Ut,Io=new Ut,function(){for(var e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture,n=0,o=e.length;n<o;n++){var a=e[n]?e[n].matrixWorld:Io;Oo.multiplyMatrices(a,t[n]),Oo.toArray(i,16*n)}void 0!==r&&(r.needsUpdate=!0)}),clone:function(){return new fa(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,i=this.bones.length;t<i;t++){var r=this.bones[t];if(r.name===e)return r}}}),ma.prototype=Object.assign(Object.create(Wi.prototype),{constructor:ma,isBone:!0}),ga.prototype=Object.assign(Object.create(hn.prototype),{constructor:ga,isSkinnedMesh:!0,initBones:function(){var e,t,i,r,n=[];if(this.geometry&&void 0!==this.geometry.bones){for(i=0,r=this.geometry.bones.length;i<r;i++)t=this.geometry.bones[i],e=new ma,n.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(i=0,r=this.geometry.bones.length;i<r;i++)-1!==(t=this.geometry.bones[i]).parent&&null!==t.parent&&void 0!==n[t.parent]?n[t.parent].add(n[i]):this.add(n[i])}return this.updateMatrixWorld(!0),n},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var i=this.geometry.skinWeights[t];(e=1/i.manhattanLength())!==1/0?i.multiplyScalar(e):i.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new oi,n=this.geometry.attributes.skinWeight;for(t=0;t<n.count;t++)r.x=n.getX(t),r.y=n.getY(t),r.z=n.getZ(t),r.w=n.getW(t),(e=1/r.manhattanLength())!==1/0?r.multiplyScalar(e):r.set(1,0,0,0),n.setXYZW(t,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(e){hn.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),((va.prototype=Object.create(nn.prototype)).constructor=va).prototype.isLineBasicMaterial=!0,va.prototype.copy=function(e){return nn.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},ya.prototype=Object.assign(Object.create(Wi.prototype),{constructor:ya,isLine:!0,computeLineDistances:(Uo=new Ft,ko=new Ft,function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,i=[0],r=1,n=t.count;r<n;r++)Uo.fromBufferAttribute(t,r-1),ko.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=Uo.distanceTo(ko);e.addAttribute("lineDistance",new pr(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var o=e.vertices;for((i=e.lineDistances)[0]=0,r=1,n=o.length;r<n;r++)i[r]=i[r-1],i[r]+=o[r-1].distanceTo(o[r])}return this}),raycast:(Do=new Ut,Bo=new sn,No=new hi,function(e,t){var i=e.linePrecision,r=i*i,n=this.geometry,o=this.matrixWorld;if(null===n.boundingSphere&&n.computeBoundingSphere(),No.copy(n.boundingSphere),No.applyMatrix4(o),!1!==e.ray.intersectsSphere(No)){Do.getInverse(o),Bo.copy(e.ray).applyMatrix4(Do);var a=new Ft,s=new Ft,c=new Ft,l=new Ft,h=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){var u=n.index,p=n.attributes.position.array;if(null!==u)for(var d=u.array,f=0,m=d.length-1;f<m;f+=h){var g=d[f],v=d[f+1];a.fromArray(p,3*g),s.fromArray(p,3*v),r<Bo.distanceSqToSegment(a,s,l,c)||(l.applyMatrix4(this.matrixWorld),(x=e.ray.origin.distanceTo(l))<e.near||x>e.far||t.push({distance:x,point:c.clone().applyMatrix4(this.matrixWorld),index:f,face:null,faceIndex:null,object:this}))}else for(f=0,m=p.length/3-1;f<m;f+=h)a.fromArray(p,3*f),s.fromArray(p,3*f+3),r<Bo.distanceSqToSegment(a,s,l,c)||(l.applyMatrix4(this.matrixWorld),(x=e.ray.origin.distanceTo(l))<e.near||x>e.far||t.push({distance:x,point:c.clone().applyMatrix4(this.matrixWorld),index:f,face:null,faceIndex:null,object:this}))}else if(n.isGeometry){var y=n.vertices,_=y.length;for(f=0;f<_-1;f+=h){var x;r<Bo.distanceSqToSegment(y[f],y[f+1],l,c)||(l.applyMatrix4(this.matrixWorld),(x=e.ray.origin.distanceTo(l))<e.near||x>e.far||t.push({distance:x,point:c.clone().applyMatrix4(this.matrixWorld),index:f,face:null,faceIndex:null,object:this}))}}}}),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),_a.prototype=Object.assign(Object.create(ya.prototype),{constructor:_a,isLineSegments:!0,computeLineDistances:(Fo=new Ft,zo=new Ft,function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,i=[],r=0,n=t.count;r<n;r+=2)Fo.fromBufferAttribute(t,r),zo.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+Fo.distanceTo(zo);e.addAttribute("lineDistance",new pr(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var o=e.vertices;for(i=e.lineDistances,r=0,n=o.length;r<n;r+=2)Fo.copy(o[r]),zo.copy(o[r+1]),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+Fo.distanceTo(zo)}return this})}),xa.prototype=Object.assign(Object.create(ya.prototype),{constructor:xa,isLineLoop:!0}),((ba.prototype=Object.create(nn.prototype)).constructor=ba).prototype.isPointsMaterial=!0,ba.prototype.copy=function(e){return nn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},wa.prototype=Object.assign(Object.create(Wi.prototype),{constructor:wa,isPoints:!0,raycast:(jo=new Ut,Ho=new sn,Go=new hi,function(n,o){var a=this,e=this.geometry,s=this.matrixWorld,t=n.params.Points.threshold;if(null===e.boundingSphere&&e.computeBoundingSphere(),Go.copy(e.boundingSphere),Go.applyMatrix4(s),Go.radius+=t,!1!==n.ray.intersectsSphere(Go)){jo.getInverse(s),Ho.copy(n.ray).applyMatrix4(jo);var i=t/((this.scale.x+this.scale.y+this.scale.z)/3),c=i*i,r=new Ft,l=new Ft;if(e.isBufferGeometry){var h=e.index,u=e.attributes.position.array;if(null!==h)for(var p=h.array,d=0,f=p.length;d<f;d++){var m=p[d];r.fromArray(u,3*m),y(r,m)}else{d=0;for(var g=u.length/3;d<g;d++)r.fromArray(u,3*d),y(r,d)}}else{var v=e.vertices;for(d=0,g=v.length;d<g;d++)y(v[d],d)}}function y(e,t){var i=Ho.distanceSqToPoint(e);if(i<c){Ho.closestPointToPoint(e,l),l.applyMatrix4(s);var r=n.ray.origin.distanceTo(l);if(r<n.near||r>n.far)return;o.push({distance:r,distanceToRay:Math.sqrt(i),point:l.clone(),index:t,face:null,object:a})}}}),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ma.prototype=Object.assign(Object.create(ni.prototype),{constructor:Ma,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),((Ta.prototype=Object.create(ni.prototype)).constructor=Ta).prototype.isCompressedTexture=!0,((Ea.prototype=Object.create(ni.prototype)).constructor=Ea).prototype.isDepthTexture=!0,(Sa.prototype=Object.create(Ar.prototype)).constructor=Sa,(Aa.prototype=Object.create(rr.prototype)).constructor=Aa,(Ra.prototype=Object.create(Ar.prototype)).constructor=Ra,(La.prototype=Object.create(rr.prototype)).constructor=La,(Pa.prototype=Object.create(Ar.prototype)).constructor=Pa,(Ca.prototype=Object.create(rr.prototype)).constructor=Ca,(Oa.prototype=Object.create(Pa.prototype)).constructor=Oa,(Ia.prototype=Object.create(rr.prototype)).constructor=Ia,(Da.prototype=Object.create(Pa.prototype)).constructor=Da,(Ba.prototype=Object.create(rr.prototype)).constructor=Ba,(Na.prototype=Object.create(Pa.prototype)).constructor=Na,(Ua.prototype=Object.create(rr.prototype)).constructor=Ua,(ka.prototype=Object.create(Pa.prototype)).constructor=ka,(Fa.prototype=Object.create(rr.prototype)).constructor=Fa,(za.prototype=Object.create(Ar.prototype)).constructor=za,(ja.prototype=Object.create(rr.prototype)).constructor=ja,(Ha.prototype=Object.create(Ar.prototype)).constructor=Ha,(Ga.prototype=Object.create(rr.prototype)).constructor=Ga,(Va.prototype=Object.create(Ar.prototype)).constructor=Va;var Wa=function(e,t,i){i=i||2;var r,n,o,a,s,c,l,h=t&&t.length,u=h?t[0]*i:e.length,p=Xa(e,0,u,i,!0),d=[];if(!p)return d;if(h&&(p=function(e,t,i,r){var n,o,a,s,c,l=[];for(n=0,o=t.length;n<o;n++)a=t[n]*r,s=n<o-1?t[n+1]*r:e.length,(c=Xa(e,a,s,r,!1))===c.next&&(c.steiner=!0),l.push(is(c));for(l.sort($a),n=0;n<l.length;n++)es(l[n],i),i=qa(i,i.next);return i}(e,t,p,i)),e.length>80*i){r=o=e[0],n=a=e[1];for(var f=i;f<u;f+=i)(s=e[f])<r&&(r=s),(c=e[f+1])<n&&(n=c),o<s&&(o=s),a<c&&(a=c);l=0!==(l=Math.max(o-r,a-n))?1/l:0}return Ya(p,d,i,r,n,l),d};function Xa(e,t,i,r,n){var o,a;if(n===0<function(e,t,i,r){for(var n=0,o=t,a=i-r;o<i;o+=r)n+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return n}(e,t,i,r))for(o=t;o<i;o+=r)a=ls(o,e[o],e[o+1],a);else for(o=i-r;t<=o;o-=r)a=ls(o,e[o],e[o+1],a);return a&&os(a,a.next)&&(hs(a),a=a.next),a}function qa(e,t){if(!e)return e;t||(t=e);var i,r=e;do{if(i=!1,r.steiner||!os(r,r.next)&&0!==ns(r.prev,r,r.next))r=r.next;else{if(hs(r),(r=t=r.prev)===r.next)break;i=!0}}while(i||r!==t);return t}function Ya(e,t,i,r,n,o,a){if(e){!a&&o&&function(e,t,i,r){var n=e;for(;null===n.z&&(n.z=ts(n.x,n.y,t,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==e;);n.prevZ.nextZ=null,n.prevZ=null,function(e){var t,i,r,n,o,a,s,c,l=1;do{for(i=e,o=e=null,a=0;i;){for(a++,r=i,t=s=0;t<l&&(s++,r=r.nextZ);t++);for(c=l;0<s||0<c&&r;)0!==s&&(0===c||!r||i.z<=r.z)?(i=(n=i).nextZ,s--):(r=(n=r).nextZ,c--),o?o.nextZ=n:e=n,n.prevZ=o,o=n;i=r}o.nextZ=null,l*=2}while(1<a)}(n)}(e,r,n,o);for(var s,c,l=e;e.prev!==e.next;)if(s=e.prev,c=e.next,o?Za(e,r,n,o):Ja(e))t.push(s.i/i),t.push(e.i/i),t.push(c.i/i),hs(e),e=c.next,l=c.next;else if((e=c)===l){a?1===a?Ya(e=Ka(e,t,i),t,i,r,n,o,2):2===a&&Qa(e,t,i,r,n,o):Ya(qa(e),t,i,r,n,o,1);break}}}function Ja(e){var t=e.prev,i=e,r=e.next;if(0<=ns(t,i,r))return!1;for(var n=e.next.next;n!==e.prev;){if(rs(t.x,t.y,i.x,i.y,r.x,r.y,n.x,n.y)&&0<=ns(n.prev,n,n.next))return!1;n=n.next}return!0}function Za(e,t,i,r){var n=e.prev,o=e,a=e.next;if(0<=ns(n,o,a))return!1;for(var s=n.x<o.x?n.x<a.x?n.x:a.x:o.x<a.x?o.x:a.x,c=n.y<o.y?n.y<a.y?n.y:a.y:o.y<a.y?o.y:a.y,l=n.x>o.x?n.x>a.x?n.x:a.x:o.x>a.x?o.x:a.x,h=n.y>o.y?n.y>a.y?n.y:a.y:o.y>a.y?o.y:a.y,u=ts(s,c,t,i,r),p=ts(l,h,t,i,r),d=e.nextZ;d&&d.z<=p;){if(d!==e.prev&&d!==e.next&&rs(n.x,n.y,o.x,o.y,a.x,a.y,d.x,d.y)&&0<=ns(d.prev,d,d.next))return!1;d=d.nextZ}for(d=e.prevZ;d&&d.z>=u;){if(d!==e.prev&&d!==e.next&&rs(n.x,n.y,o.x,o.y,a.x,a.y,d.x,d.y)&&0<=ns(d.prev,d,d.next))return!1;d=d.prevZ}return!0}function Ka(e,t,i){var r=e;do{var n=r.prev,o=r.next.next;!os(n,o)&&as(n,r,r.next,o)&&ss(n,o)&&ss(o,n)&&(t.push(n.i/i),t.push(r.i/i),t.push(o.i/i),hs(r),hs(r.next),r=e=o),r=r.next}while(r!==e);return r}function Qa(e,t,i,r,n,o){var a,s,c=e;do{for(var l=c.next.next;l!==c.prev;){if(c.i!==l.i&&(s=l,(a=c).next.i!==s.i&&a.prev.i!==s.i&&!function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&as(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(a,s)&&ss(a,s)&&ss(s,a)&&function(e,t){var i=e,r=!1,n=(e.x+t.x)/2,o=(e.y+t.y)/2;for(;i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next,i!==e;);return r}(a,s))){var h=cs(c,l);return c=qa(c,c.next),h=qa(h,h.next),Ya(c,t,i,r,n,o),void Ya(h,t,i,r,n,o)}l=l.next}c=c.next}while(c!==e)}function $a(e,t){return e.x-t.x}function es(e,t){if(t=function(e,t){var i,r=t,n=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&a<s){if((a=s)===n){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!i)return null;if(n===a)return i.prev;var c,l=i,h=i.x,u=i.y,p=1/0;r=i.next;for(;r!==l;)n>=r.x&&r.x>=h&&n!==r.x&&rs(o<u?n:a,o,h,u,o<u?a:n,o,r.x,r.y)&&((c=Math.abs(o-r.y)/(n-r.x))<p||c===p&&r.x>i.x)&&ss(r,e)&&(i=r,p=c),r=r.next;return i}(e,t)){var i=cs(t,e);qa(i,i.next)}}function ts(e,t,i,r,n){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function is(e){for(var t=e,i=e;t.x<i.x&&(i=t),(t=t.next)!==e;);return i}function rs(e,t,i,r,n,o,a,s){return 0<=(n-a)*(t-s)-(e-a)*(o-s)&&0<=(e-a)*(r-s)-(i-a)*(t-s)&&0<=(i-a)*(o-s)-(n-a)*(r-s)}function ns(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function os(e,t){return e.x===t.x&&e.y===t.y}function as(e,t,i,r){return!!(os(e,t)&&os(i,r)||os(e,r)&&os(i,t))||0<ns(e,t,i)!=0<ns(e,t,r)&&0<ns(i,r,e)!=0<ns(i,r,t)}function ss(e,t){return ns(e.prev,e,e.next)<0?0<=ns(e,t,e.next)&&0<=ns(e,e.prev,t):ns(e,t,e.prev)<0||ns(e,e.next,t)<0}function cs(e,t){var i=new us(e.i,e.x,e.y),r=new us(t.i,t.x,t.y),n=e.next,o=t.prev;return(e.next=t).prev=e,(i.next=n).prev=i,(r.next=i).prev=r,(o.next=r).prev=o,r}function ls(e,t,i,r){var n=new us(e,t,i);return r?(n.next=r.next,(n.prev=r).next.prev=n,r.next=n):(n.prev=n).next=n,n}function hs(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function us(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var ps={area:function(e){for(var t=e.length,i=0,r=t-1,n=0;n<t;r=n++)i+=e[r].x*e[n].y-e[n].x*e[r].y;return.5*i},isClockWise:function(e){return ps.area(e)<0},triangulateShape:function(e,t){var i=[],r=[],n=[];ds(e),fs(i,e);var o=e.length;t.forEach(ds);for(var a=0;a<t.length;a++)r.push(o),o+=t[a].length,fs(i,t[a]);var s=Wa(i,r);for(a=0;a<s.length;a+=3)n.push(s.slice(a,a+3));return n}};function ds(e){var t=e.length;2<t&&e[t-1].equals(e[0])&&e.pop()}function fs(e,t){for(var i=0;i<t.length;i++)e.push(t[i].x),e.push(t[i].y)}function ms(e,t){rr.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new gs(e,t)),this.mergeVertices()}function gs(e,Z){Ar.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:Z},e=Array.isArray(e)?e:[e];for(var K=this,Q=[],$=[],t=0,i=e.length;t<i;t++){r(e[t])}function r(e){var r=[],t=void 0!==Z.curveSegments?Z.curveSegments:12,c=void 0!==Z.steps?Z.steps:1,i=void 0!==Z.depth?Z.depth:100,n=void 0===Z.bevelEnabled||Z.bevelEnabled,o=void 0!==Z.bevelThickness?Z.bevelThickness:6,a=void 0!==Z.bevelSize?Z.bevelSize:o-2,l=void 0!==Z.bevelSegments?Z.bevelSegments:3,s=Z.extrudePath,h=void 0!==Z.UVGenerator?Z.UVGenerator:vs;void 0!==Z.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),i=Z.amount);var u,p,d,f,m,g,v,y,_=!1;s&&(u=s.getSpacedPoints(c),n=!(_=!0),p=s.computeFrenetFrames(c,!1),d=new Ft,f=new Ft,m=new Ft),n||(a=o=l=0);var x=e.extractPoints(t),b=x.shape,w=x.holes;if(!ps.isClockWise(b))for(b=b.reverse(),v=0,y=w.length;v<y;v++)g=w[v],ps.isClockWise(g)&&(w[v]=g.reverse());var M=ps.triangulateShape(b,w),T=b;for(v=0,y=w.length;v<y;v++)g=w[v],b=b.concat(g);function E(e,t,i){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(i).add(e)}var S,A,R,L,P,C,O=b.length,I=M.length;function D(e,t,i){var r,n,o,a=e.x-t.x,s=e.y-t.y,c=i.x-e.x,l=i.y-e.y,h=a*a+s*s,u=a*l-s*c;if(Math.abs(u)>Number.EPSILON){var p=Math.sqrt(h),d=Math.sqrt(c*c+l*l),f=t.x-s/p,m=t.y+a/p,g=((i.x-l/d-f)*l-(i.y+c/d-m)*c)/(a*l-s*c),v=(r=f+a*g-e.x)*r+(n=m+s*g-e.y)*n;if(v<=2)return new Nt(r,n);o=Math.sqrt(v/2)}else{var y=!1;a>Number.EPSILON?c>Number.EPSILON&&(y=!0):a<-Number.EPSILON?c<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(l)&&(y=!0),y?(r=-s,n=a,o=Math.sqrt(h)):(r=a,n=s,o=Math.sqrt(h/2))}return new Nt(r/o,n/o)}for(var B=[],N=0,U=T.length,k=U-1,F=N+1;N<U;N++,k++,F++)k===U&&(k=0),F===U&&(F=0),B[N]=D(T[N],T[k],T[F]);var z,j,H=[],G=B.concat();for(v=0,y=w.length;v<y;v++){for(g=w[v],z=[],N=0,k=(U=g.length)-1,F=N+1;N<U;N++,k++,F++)k===U&&(k=0),F===U&&(F=0),z[N]=D(g[N],g[k],g[F]);H.push(z),G=G.concat(z)}for(S=0;S<l;S++){for(R=S/l,L=o*Math.cos(R*Math.PI/2),A=a*Math.sin(R*Math.PI/2),N=0,U=T.length;N<U;N++)W((P=E(T[N],B[N],A)).x,P.y,-L);for(v=0,y=w.length;v<y;v++)for(g=w[v],z=H[v],N=0,U=g.length;N<U;N++)W((P=E(g[N],z[N],A)).x,P.y,-L)}for(A=a,N=0;N<O;N++)P=n?E(b[N],G[N],A):b[N],_?(f.copy(p.normals[0]).multiplyScalar(P.x),d.copy(p.binormals[0]).multiplyScalar(P.y),m.copy(u[0]).add(f).add(d),W(m.x,m.y,m.z)):W(P.x,P.y,0);for(j=1;j<=c;j++)for(N=0;N<O;N++)P=n?E(b[N],G[N],A):b[N],_?(f.copy(p.normals[j]).multiplyScalar(P.x),d.copy(p.binormals[j]).multiplyScalar(P.y),m.copy(u[j]).add(f).add(d),W(m.x,m.y,m.z)):W(P.x,P.y,i/c*j);for(S=l-1;0<=S;S--){for(R=S/l,L=o*Math.cos(R*Math.PI/2),A=a*Math.sin(R*Math.PI/2),N=0,U=T.length;N<U;N++)W((P=E(T[N],B[N],A)).x,P.y,i+L);for(v=0,y=w.length;v<y;v++)for(g=w[v],z=H[v],N=0,U=g.length;N<U;N++)P=E(g[N],z[N],A),_?W(P.x,P.y+u[c-1].y,u[c-1].x+L):W(P.x,P.y,i+L)}function V(e,t){var i,r;for(N=e.length;0<=--N;){(r=(i=N)-1)<0&&(r=e.length-1);var n=0,o=c+2*l;for(n=0;n<o;n++){var a=O*n,s=O*(n+1);q(t+i+a,t+r+a,t+r+s,t+i+s)}}}function W(e,t,i){r.push(e),r.push(t),r.push(i)}function X(e,t,i){Y(e),Y(t),Y(i);var r=Q.length/3,n=h.generateTopUV(K,Q,r-3,r-2,r-1);J(n[0]),J(n[1]),J(n[2])}function q(e,t,i,r){Y(e),Y(t),Y(r),Y(t),Y(i),Y(r);var n=Q.length/3,o=h.generateSideWallUV(K,Q,n-6,n-3,n-2,n-1);J(o[0]),J(o[1]),J(o[3]),J(o[1]),J(o[2]),J(o[3])}function Y(e){Q.push(r[3*e+0]),Q.push(r[3*e+1]),Q.push(r[3*e+2])}function J(e){$.push(e.x),$.push(e.y)}!function(){var e=Q.length/3;if(n){var t=0,i=O*t;for(N=0;N<I;N++)X((C=M[N])[2]+i,C[1]+i,C[0]+i);for(i=O*(t=c+2*l),N=0;N<I;N++)X((C=M[N])[0]+i,C[1]+i,C[2]+i)}else{for(N=0;N<I;N++)X((C=M[N])[2],C[1],C[0]);for(N=0;N<I;N++)X((C=M[N])[0]+O*c,C[1]+O*c,C[2]+O*c)}K.addGroup(e,Q.length/3-e,0)}(),function(){var e=Q.length/3,t=0;for(V(T,t),t+=T.length,v=0,y=w.length;v<y;v++)V(g=w[v],t),t+=g.length;K.addGroup(e,Q.length/3-e,1)}()}this.addAttribute("position",new pr(Q,3)),this.addAttribute("uv",new pr($,2)),this.computeVertexNormals()}((ms.prototype=Object.create(rr.prototype)).constructor=ms).prototype.toJSON=function(){var e=rr.prototype.toJSON.call(this);return ys(this.parameters.shapes,this.parameters.options,e)},((gs.prototype=Object.create(Ar.prototype)).constructor=gs).prototype.toJSON=function(){var e=Ar.prototype.toJSON.call(this);return ys(this.parameters.shapes,this.parameters.options,e)};var vs={generateTopUV:function(e,t,i,r,n){var o=t[3*i],a=t[3*i+1],s=t[3*r],c=t[3*r+1],l=t[3*n],h=t[3*n+1];return[new Nt(o,a),new Nt(s,c),new Nt(l,h)]},generateSideWallUV:function(e,t,i,r,n,o){var a=t[3*i],s=t[3*i+1],c=t[3*i+2],l=t[3*r],h=t[3*r+1],u=t[3*r+2],p=t[3*n],d=t[3*n+1],f=t[3*n+2],m=t[3*o],g=t[3*o+1],v=t[3*o+2];return Math.abs(s-h)<.01?[new Nt(a,1-c),new Nt(l,1-u),new Nt(p,1-f),new Nt(m,1-v)]:[new Nt(s,1-c),new Nt(h,1-u),new Nt(d,1-f),new Nt(g,1-v)]}};function ys(e,t,i){if(i.shapes=[],Array.isArray(e))for(var r=0,n=e.length;r<n;r++){var o=e[r];i.shapes.push(o.uuid)}else i.shapes.push(e.uuid);return void 0!==t.extrudePath&&(i.options.extrudePath=t.extrudePath.toJSON()),i}function _s(e,t){rr.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new xs(e,t)),this.mergeVertices()}function xs(e,t){var i=(t=t||{}).font;if(!i||!i.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new rr;var r=i.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),gs.call(this,r,t),this.type="TextBufferGeometry"}function bs(e,t,i,r,n,o,a){rr.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:n,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new ws(e,t,i,r,n,o,a)),this.mergeVertices()}function ws(e,t,i,r,n,o,a){Ar.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:n,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),i=Math.max(2,Math.floor(i)||6),r=void 0!==r?r:0,n=void 0!==n?n:2*Math.PI;var s,c,l=(o=void 0!==o?o:0)+(a=void 0!==a?a:Math.PI),h=0,u=[],p=new Ft,d=new Ft,f=[],m=[],g=[],v=[];for(c=0;c<=i;c++){var y=[],_=c/i;for(s=0;s<=t;s++){var x=s/t;p.x=-e*Math.cos(r+x*n)*Math.sin(o+_*a),p.y=e*Math.cos(o+_*a),p.z=e*Math.sin(r+x*n)*Math.sin(o+_*a),m.push(p.x,p.y,p.z),d.set(p.x,p.y,p.z).normalize(),g.push(d.x,d.y,d.z),v.push(x,1-_),y.push(h++)}u.push(y)}for(c=0;c<i;c++)for(s=0;s<t;s++){var b=u[c][s+1],w=u[c][s],M=u[c+1][s],T=u[c+1][s+1];(0!==c||0<o)&&f.push(b,w,T),(c!==i-1||l<Math.PI)&&f.push(w,M,T)}this.setIndex(f),this.addAttribute("position",new pr(m,3)),this.addAttribute("normal",new pr(g,3)),this.addAttribute("uv",new pr(v,2))}function Ms(e,t,i,r,n,o){rr.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:n,thetaLength:o},this.fromBufferGeometry(new Ts(e,t,i,r,n,o)),this.mergeVertices()}function Ts(e,t,i,r,n,o){Ar.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:n,thetaLength:o},e=e||.5,t=t||1,n=void 0!==n?n:0,o=void 0!==o?o:2*Math.PI,i=void 0!==i?Math.max(3,i):8;var a,s,c,l=[],h=[],u=[],p=[],d=e,f=(t-e)/(r=void 0!==r?Math.max(1,r):1),m=new Ft,g=new Nt;for(s=0;s<=r;s++){for(c=0;c<=i;c++)a=n+c/i*o,m.x=d*Math.cos(a),m.y=d*Math.sin(a),h.push(m.x,m.y,m.z),u.push(0,0,1),g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,p.push(g.x,g.y);d+=f}for(s=0;s<r;s++){var v=s*(i+1);for(c=0;c<i;c++){var y=a=c+v,_=a+i+1,x=a+i+2,b=a+1;l.push(y,_,b),l.push(_,x,b)}}this.setIndex(l),this.addAttribute("position",new pr(h,3)),this.addAttribute("normal",new pr(u,3)),this.addAttribute("uv",new pr(p,2))}function Es(e,t,i,r){rr.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},this.fromBufferGeometry(new Ss(e,t,i,r)),this.mergeVertices()}function Ss(e,t,i,r){Ar.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t)||12,i=i||0,r=r||2*Math.PI,r=Bt.clamp(r,0,2*Math.PI);var n,o,a,s=[],c=[],l=[],h=1/t,u=new Ft,p=new Nt;for(o=0;o<=t;o++){var d=i+o*h*r,f=Math.sin(d),m=Math.cos(d);for(a=0;a<=e.length-1;a++)u.x=e[a].x*f,u.y=e[a].y,u.z=e[a].x*m,c.push(u.x,u.y,u.z),p.x=o/t,p.y=a/(e.length-1),l.push(p.x,p.y)}for(o=0;o<t;o++)for(a=0;a<e.length-1;a++){var g=n=a+o*e.length,v=n+e.length,y=n+e.length+1,_=n+1;s.push(g,v,_),s.push(v,y,_)}if(this.setIndex(s),this.addAttribute("position",new pr(c,3)),this.addAttribute("uv",new pr(l,2)),this.computeVertexNormals(),r===2*Math.PI){var x=this.attributes.normal.array,b=new Ft,w=new Ft,M=new Ft;for(n=t*e.length*3,a=o=0;o<e.length;o++,a+=3)b.x=x[a+0],b.y=x[a+1],b.z=x[a+2],w.x=x[n+a+0],w.y=x[n+a+1],w.z=x[n+a+2],M.addVectors(b,w).normalize(),x[a+0]=x[n+a+0]=M.x,x[a+1]=x[n+a+1]=M.y,x[a+2]=x[n+a+2]=M.z}}function As(e,t){rr.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Rs(e,t)),this.mergeVertices()}function Rs(e,f){Ar.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:f},f=f||12;var m=[],g=[],v=[],y=[],t=0,_=0;if(!1===Array.isArray(e))r(e);else for(var i=0;i<e.length;i++)r(e[i]),this.addGroup(t,_,i),t+=_,_=0;function r(e){var t,i,r,n=g.length/3,o=e.extractPoints(f),a=o.shape,s=o.holes;if(!1===ps.isClockWise(a))for(a=a.reverse(),t=0,i=s.length;t<i;t++)r=s[t],!0===ps.isClockWise(r)&&(s[t]=r.reverse());var c=ps.triangulateShape(a,s);for(t=0,i=s.length;t<i;t++)r=s[t],a=a.concat(r);for(t=0,i=a.length;t<i;t++){var l=a[t];g.push(l.x,l.y,0),v.push(0,0,1),y.push(l.x,l.y)}for(t=0,i=c.length;t<i;t++){var h=c[t],u=h[0]+n,p=h[1]+n,d=h[2]+n;m.push(u,p,d),_+=3}}this.setIndex(m),this.addAttribute("position",new pr(g,3)),this.addAttribute("normal",new pr(v,3)),this.addAttribute("uv",new pr(y,2))}function Ls(e,t){if(t.shapes=[],Array.isArray(e))for(var i=0,r=e.length;i<r;i++){var n=e[i];t.shapes.push(n.uuid)}else t.shapes.push(e.uuid);return t}function Ps(e,t){Ar.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var i,r,n,o,a=[],s=Math.cos(Bt.DEG2RAD*t),c=[0,0],l={},h=["a","b","c"];e.isBufferGeometry?(o=new rr).fromBufferGeometry(e):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var u=o.vertices,p=o.faces,d=0,f=p.length;d<f;d++)for(var m=p[d],g=0;g<3;g++)i=m[h[g]],r=m[h[(g+1)%3]],c[0]=Math.min(i,r),c[1]=Math.max(i,r),void 0===l[n=c[0]+","+c[1]]?l[n]={index1:c[0],index2:c[1],face1:d,face2:void 0}:l[n].face2=d;for(n in l){var v=l[n];if(void 0===v.face2||p[v.face1].normal.dot(p[v.face2].normal)<=s){var y=u[v.index1];a.push(y.x,y.y,y.z),y=u[v.index2],a.push(y.x,y.y,y.z)}}this.addAttribute("position",new pr(a,3))}function Cs(e,t,i,r,n,o,a,s){rr.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:n,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Os(e,t,i,r,n,o,a,s)),this.mergeVertices()}function Os(v,y,_,x,b,e,w,M){Ar.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:v,radiusBottom:y,height:_,radialSegments:x,heightSegments:b,openEnded:e,thetaStart:w,thetaLength:M};var T=this;v=void 0!==v?v:1,y=void 0!==y?y:1,_=_||1,x=Math.floor(x)||8,b=Math.floor(b)||1,e=void 0!==e&&e,w=void 0!==w?w:0,M=void 0!==M?M:2*Math.PI;var E=[],S=[],A=[],R=[],L=0,P=[],C=_/2,O=0;function t(e){var t,i,r,n=new Nt,o=new Ft,a=0,s=!0===e?v:y,c=!0===e?1:-1;for(i=L,t=1;t<=x;t++)S.push(0,C*c,0),A.push(0,c,0),R.push(.5,.5),L++;for(r=L,t=0;t<=x;t++){var l=t/x*M+w,h=Math.cos(l),u=Math.sin(l);o.x=s*u,o.y=C*c,o.z=s*h,S.push(o.x,o.y,o.z),A.push(0,c,0),n.x=.5*h+.5,n.y=.5*u*c+.5,R.push(n.x,n.y),L++}for(t=0;t<x;t++){var p=i+t,d=r+t;!0===e?E.push(d,d+1,p):E.push(d+1,d,p),a+=3}T.addGroup(O,a,!0===e?1:2),O+=a}!function(){var e,t,i=new Ft,r=new Ft,n=0,o=(y-v)/_;for(t=0;t<=b;t++){var a=[],s=t/b,c=s*(y-v)+v;for(e=0;e<=x;e++){var l=e/x,h=l*M+w,u=Math.sin(h),p=Math.cos(h);r.x=c*u,r.y=-s*_+C,r.z=c*p,S.push(r.x,r.y,r.z),i.set(u,o,p).normalize(),A.push(i.x,i.y,i.z),R.push(l,1-s),a.push(L++)}P.push(a)}for(e=0;e<x;e++)for(t=0;t<b;t++){var d=P[t][e],f=P[t+1][e],m=P[t+1][e+1],g=P[t][e+1];E.push(d,f,g),E.push(f,m,g),n+=6}T.addGroup(O,n,0),O+=n}(),!1===e&&(0<v&&t(!0),0<y&&t(!1)),this.setIndex(E),this.addAttribute("position",new pr(S,3)),this.addAttribute("normal",new pr(A,3)),this.addAttribute("uv",new pr(R,2))}function Is(e,t,i,r,n,o,a){Cs.call(this,0,e,t,i,r,n,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:n,thetaStart:o,thetaLength:a}}function Ds(e,t,i,r,n,o,a){Os.call(this,0,e,t,i,r,n,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:n,thetaStart:o,thetaLength:a}}function Bs(e,t,i,r){rr.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},this.fromBufferGeometry(new Ns(e,t,i,r)),this.mergeVertices()}function Ns(e,t,i,r){Ar.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI;var n,o,a=[],s=[],c=[],l=[],h=new Ft,u=new Nt;for(s.push(0,0,0),c.push(0,0,1),l.push(.5,.5),o=0,n=3;o<=t;o++,n+=3){var p=i+o/t*r;h.x=e*Math.cos(p),h.y=e*Math.sin(p),s.push(h.x,h.y,h.z),c.push(0,0,1),u.x=(s[n]/e+1)/2,u.y=(s[n+1]/e+1)/2,l.push(u.x,u.y)}for(n=1;n<=t;n++)a.push(n,n+1,0);this.setIndex(a),this.addAttribute("position",new pr(s,3)),this.addAttribute("normal",new pr(c,3)),this.addAttribute("uv",new pr(l,2))}(_s.prototype=Object.create(rr.prototype)).constructor=_s,(xs.prototype=Object.create(gs.prototype)).constructor=xs,(bs.prototype=Object.create(rr.prototype)).constructor=bs,(ws.prototype=Object.create(Ar.prototype)).constructor=ws,(Ms.prototype=Object.create(rr.prototype)).constructor=Ms,(Ts.prototype=Object.create(Ar.prototype)).constructor=Ts,(Es.prototype=Object.create(rr.prototype)).constructor=Es,(Ss.prototype=Object.create(Ar.prototype)).constructor=Ss,((As.prototype=Object.create(rr.prototype)).constructor=As).prototype.toJSON=function(){var e=rr.prototype.toJSON.call(this);return Ls(this.parameters.shapes,e)},((Rs.prototype=Object.create(Ar.prototype)).constructor=Rs).prototype.toJSON=function(){var e=Ar.prototype.toJSON.call(this);return Ls(this.parameters.shapes,e)},(Ps.prototype=Object.create(Ar.prototype)).constructor=Ps,(Cs.prototype=Object.create(rr.prototype)).constructor=Cs,(Os.prototype=Object.create(Ar.prototype)).constructor=Os,(Is.prototype=Object.create(Cs.prototype)).constructor=Is,(Ds.prototype=Object.create(Os.prototype)).constructor=Ds,(Bs.prototype=Object.create(rr.prototype)).constructor=Bs,(Ns.prototype=Object.create(Ar.prototype)).constructor=Ns;var Us=Object.freeze({WireframeGeometry:Sa,ParametricGeometry:Aa,ParametricBufferGeometry:Ra,TetrahedronGeometry:Ca,TetrahedronBufferGeometry:Oa,OctahedronGeometry:Ia,OctahedronBufferGeometry:Da,IcosahedronGeometry:Ba,IcosahedronBufferGeometry:Na,DodecahedronGeometry:Ua,DodecahedronBufferGeometry:ka,PolyhedronGeometry:La,PolyhedronBufferGeometry:Pa,TubeGeometry:Fa,TubeBufferGeometry:za,TorusKnotGeometry:ja,TorusKnotBufferGeometry:Ha,TorusGeometry:Ga,TorusBufferGeometry:Va,TextGeometry:_s,TextBufferGeometry:xs,SphereGeometry:bs,SphereBufferGeometry:ws,RingGeometry:Ms,RingBufferGeometry:Ts,PlaneGeometry:Pr,PlaneBufferGeometry:Cr,LatheGeometry:Es,LatheBufferGeometry:Ss,ShapeGeometry:As,ShapeBufferGeometry:Rs,ExtrudeGeometry:ms,ExtrudeBufferGeometry:gs,EdgesGeometry:Ps,ConeGeometry:Is,ConeBufferGeometry:Ds,CylinderGeometry:Cs,CylinderBufferGeometry:Os,CircleGeometry:Bs,CircleBufferGeometry:Ns,BoxGeometry:Rr,BoxBufferGeometry:Lr});function ks(e){nn.call(this),this.type="ShadowMaterial",this.color=new vi(0),this.transparent=!0,this.setValues(e)}function Fs(e){an.call(this,e),this.type="RawShaderMaterial"}function zs(e){nn.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new vi(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=It,this.normalScale=new Nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function js(e){zs.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function Hs(e){nn.call(this),this.type="MeshPhongMaterial",this.color=new vi(16777215),this.specular=new vi(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=It,this.normalScale=new Nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ce,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Gs(e){Hs.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function Vs(e){nn.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=It,this.normalScale=new Nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Ws(e){nn.call(this),this.type="MeshLambertMaterial",this.color=new vi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ce,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Xs(e){va.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}((ks.prototype=Object.create(nn.prototype)).constructor=ks).prototype.isShadowMaterial=!0,ks.prototype.copy=function(e){return nn.prototype.copy.call(this,e),this.color.copy(e.color),this},((Fs.prototype=Object.create(an.prototype)).constructor=Fs).prototype.isRawShaderMaterial=!0,((zs.prototype=Object.create(nn.prototype)).constructor=zs).prototype.isMeshStandardMaterial=!0,zs.prototype.copy=function(e){return nn.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((js.prototype=Object.create(zs.prototype)).constructor=js).prototype.isMeshPhysicalMaterial=!0,js.prototype.copy=function(e){return zs.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},((Hs.prototype=Object.create(nn.prototype)).constructor=Hs).prototype.isMeshPhongMaterial=!0,Hs.prototype.copy=function(e){return nn.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((Gs.prototype=Object.create(Hs.prototype)).constructor=Gs).prototype.isMeshToonMaterial=!0,Gs.prototype.copy=function(e){return Hs.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},((Vs.prototype=Object.create(nn.prototype)).constructor=Vs).prototype.isMeshNormalMaterial=!0,Vs.prototype.copy=function(e){return nn.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((Ws.prototype=Object.create(nn.prototype)).constructor=Ws).prototype.isMeshLambertMaterial=!0,Ws.prototype.copy=function(e){return nn.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},((Xs.prototype=Object.create(va.prototype)).constructor=Xs).prototype.isLineDashedMaterial=!0,Xs.prototype.copy=function(e){return va.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var qs=Object.freeze({ShadowMaterial:ks,SpriteMaterial:ua,RawShaderMaterial:Fs,ShaderMaterial:an,PointsMaterial:ba,MeshPhysicalMaterial:js,MeshStandardMaterial:zs,MeshPhongMaterial:Hs,MeshToonMaterial:Gs,MeshNormalMaterial:Vs,MeshLambertMaterial:Ws,MeshDepthMaterial:Yo,MeshDistanceMaterial:Jo,MeshBasicMaterial:on,LineDashedMaterial:Xs,LineBasicMaterial:va,Material:nn}),Ys={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Js(e,t,i){var r=this,n=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(e){a++,!1===n&&void 0!==r.onStart&&r.onStart(e,o,a),n=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(n=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}var Zs=new Js,Ks={};function Qs(e){this.manager=void 0!==e?e:Zs}function $s(e){this.manager=void 0!==e?e:Zs,this._parser=null}function ec(e){this.manager=void 0!==e?e:Zs,this._parser=null}function tc(e){this.manager=void 0!==e?e:Zs}function ic(e){this.manager=void 0!==e?e:Zs}function rc(e){this.manager=void 0!==e?e:Zs}function nc(){this.type="Curve",this.arcLengthDivisions=200}function oc(e,t,i,r,n,o,a,s){nc.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=i||1,this.yRadius=r||1,this.aStartAngle=n||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function ac(e,t,i,r,n,o){oc.call(this,e,t,i,i,r,n,o),this.type="ArcCurve"}function sc(){var n=0,o=0,a=0,s=0;function l(e,t,i,r){a=-3*(n=e)+3*t-2*(o=i)-r,s=2*e-2*t+i+r}return{initCatmullRom:function(e,t,i,r,n){l(t,i,n*(i-e),n*(r-t))},initNonuniformCatmullRom:function(e,t,i,r,n,o,a){var s=(t-e)/n-(i-e)/(n+o)+(i-t)/o,c=(i-t)/o-(r-t)/(o+a)+(r-i)/a;l(t,i,s*=o,c*=o)},calc:function(e){var t=e*e;return n+o*e+a*t+s*(t*e)}}}Object.assign(Qs.prototype,{load:function(a,e,t,i){void 0===a&&(a=""),void 0!==this.path&&(a=this.path+a),a=this.manager.resolveURL(a);var s=this,r=Ys.get(a);if(void 0!==r)return s.manager.itemStart(a),setTimeout(function(){e&&e(r),s.manager.itemEnd(a)},0),r;if(void 0===Ks[a]){var n=a.match(/^data:(.*?)(;base64)?,(.*)$/);if(n){var o=n[1],c=!!n[2],l=n[3];l=window.decodeURIComponent(l),c&&(l=window.atob(l));try{var h,u=(this.responseType||"").toLowerCase();switch(u){case"arraybuffer":case"blob":for(var p=new Uint8Array(l.length),d=0;d<l.length;d++)p[d]=l.charCodeAt(d);h="blob"===u?new Blob([p.buffer],{type:o}):p.buffer;break;case"document":var f=new DOMParser;h=f.parseFromString(l,o);break;case"json":h=JSON.parse(l);break;default:h=l}window.setTimeout(function(){e&&e(h),s.manager.itemEnd(a)},0)}catch(e){window.setTimeout(function(){i&&i(e),s.manager.itemEnd(a),s.manager.itemError(a)},0)}}else{Ks[a]=[],Ks[a].push({onLoad:e,onProgress:t,onError:i});var m=new XMLHttpRequest;for(var g in m.open("GET",a,!0),m.addEventListener("load",function(e){var t=this.response;Ys.add(a,t);var i=Ks[a];if(delete Ks[a],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var r=0,n=i.length;r<n;r++){(o=i[r]).onLoad&&o.onLoad(t)}s.manager.itemEnd(a)}else{for(r=0,n=i.length;r<n;r++){var o;(o=i[r]).onError&&o.onError(e)}s.manager.itemEnd(a),s.manager.itemError(a)}},!1),m.addEventListener("progress",function(e){for(var t=Ks[a],i=0,r=t.length;i<r;i++){var n=t[i];n.onProgress&&n.onProgress(e)}},!1),m.addEventListener("error",function(e){var t=Ks[a];delete Ks[a];for(var i=0,r=t.length;i<r;i++){var n=t[i];n.onError&&n.onError(e)}s.manager.itemEnd(a),s.manager.itemError(a)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(g,this.requestHeader[g]);m.send(null)}return s.manager.itemStart(a),m}Ks[a].push({onLoad:e,onProgress:t,onError:i})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign($s.prototype,{load:function(e,o,t,r){var a=this,s=[],c=new Ta;c.image=s;var n=new Qs(this.manager);function i(i){n.load(e[i],function(e){var t=a._parser(e,!0);s[i]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps},6===(l+=1)&&(1===t.mipmapCount&&(c.minFilter=Ce),c.format=t.format,c.needsUpdate=!0,o&&o(c))},t,r)}if(n.setPath(this.path),n.setResponseType("arraybuffer"),Array.isArray(e))for(var l=0,h=0,u=e.length;h<u;++h)i(h);else n.load(e,function(e){var t=a._parser(e,!0);if(t.isCubemap)for(var i=t.mipmaps.length/t.mipmapCount,r=0;r<i;r++){s[r]={mipmaps:[]};for(var n=0;n<t.mipmapCount;n++)s[r].mipmaps.push(t.mipmaps[r*t.mipmapCount+n]),s[r].format=t.format,s[r].width=t.width,s[r].height=t.height}else c.image.width=t.width,c.image.height=t.height,c.mipmaps=t.mipmaps;1===t.mipmapCount&&(c.minFilter=Ce),c.format=t.format,c.needsUpdate=!0,o&&o(c)},t,r);return c},setPath:function(e){return this.path=e,this}}),Object.assign(ec.prototype,{load:function(e,i,t,r){var n=this,o=new ci,a=new Qs(this.manager);return a.setResponseType("arraybuffer"),a.load(e,function(e){var t=n._parser(e);t&&(void 0!==t.image?o.image=t.image:void 0!==t.data&&(o.image.width=t.width,o.image.height=t.height,o.image.data=t.data),o.wrapS=void 0!==t.wrapS?t.wrapS:Se,o.wrapT=void 0!==t.wrapT?t.wrapT:Se,o.magFilter=void 0!==t.magFilter?t.magFilter:Ce,o.minFilter=void 0!==t.minFilter?t.minFilter:Ie,o.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.format&&(o.format=t.format),void 0!==t.type&&(o.type=t.type),void 0!==t.mipmaps&&(o.mipmaps=t.mipmaps),1===t.mipmapCount&&(o.minFilter=Ce),o.needsUpdate=!0,i&&i(o,t))},t,r),o}}),Object.assign(tc.prototype,{crossOrigin:"anonymous",load:function(t,e,i,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var n=this,o=Ys.get(t);if(void 0!==o)return n.manager.itemStart(t),setTimeout(function(){e&&e(o),n.manager.itemEnd(t)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",c,!1),Ys.add(t,this),e&&e(this),n.manager.itemEnd(t)}function c(e){a.removeEventListener("load",s,!1),a.removeEventListener("error",c,!1),r&&r(e),n.manager.itemEnd(t),n.manager.itemError(t)}return a.addEventListener("load",s,!1),a.addEventListener("error",c,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),n.manager.itemStart(t),a.src=t,a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(ic.prototype,{crossOrigin:"anonymous",load:function(e,i,t,r){var n=new wn,o=new tc(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(t){o.load(e[t],function(e){n.images[t]=e,6===++a&&(n.needsUpdate=!0,i&&i(n))},void 0,r)}for(var c=0;c<e.length;++c)s(c);return n},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(rc.prototype,{crossOrigin:"anonymous",load:function(i,r,e,t){var n=new ni,o=new tc(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(i,function(e){n.image=e;var t=0<i.search(/\.(jpg|jpeg)$/)||0===i.search(/^data\:image\/jpeg/);n.format=t?qe:Ye,n.needsUpdate=!0,void 0!==r&&r(n)},e,t),n},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(nc.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var i=this.getUtoTmapping(e);return this.getPoint(i,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],i=0;i<=e;i++)t.push(this.getPoint(i/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,i,r=[],n=this.getPoint(0),o=0;for(r.push(0),i=1;i<=e;i++)o+=(t=this.getPoint(i/e)).distanceTo(n),r.push(o),n=t;return this.cacheArcLengths=r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var i,r=this.getLengths(),n=0,o=r.length;i=t||e*r[o-1];for(var a,s=0,c=o-1;s<=c;)if((a=r[n=Math.floor(s+(c-s)/2)]-i)<0)s=n+1;else{if(!(0<a)){c=n;break}c=n-1}if(r[n=c]===i)return n/(o-1);var l=r[n];return(n+(i-l)/(r[n+1]-l))/(o-1)},getTangent:function(e){var t=e-1e-4,i=e+1e-4;t<0&&(t=0),1<i&&(i=1);var r=this.getPoint(t);return this.getPoint(i).clone().sub(r).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var i,r,n,o=new Ft,a=[],s=[],c=[],l=new Ft,h=new Ut;for(i=0;i<=e;i++)r=i/e,a[i]=this.getTangentAt(r),a[i].normalize();s[0]=new Ft,c[0]=new Ft;var u=Number.MAX_VALUE,p=Math.abs(a[0].x),d=Math.abs(a[0].y),f=Math.abs(a[0].z);for(p<=u&&(u=p,o.set(1,0,0)),d<=u&&(u=d,o.set(0,1,0)),f<=u&&o.set(0,0,1),l.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],l),c[0].crossVectors(a[0],s[0]),i=1;i<=e;i++)s[i]=s[i-1].clone(),c[i]=c[i-1].clone(),l.crossVectors(a[i-1],a[i]),l.length()>Number.EPSILON&&(l.normalize(),n=Math.acos(Bt.clamp(a[i-1].dot(a[i]),-1,1)),s[i].applyMatrix4(h.makeRotationAxis(l,n))),c[i].crossVectors(a[i],s[i]);if(!0===t)for(n=Math.acos(Bt.clamp(s[0].dot(s[e]),-1,1)),n/=e,0<a[0].dot(l.crossVectors(s[0],s[e]))&&(n=-n),i=1;i<=e;i++)s[i].applyMatrix4(h.makeRotationAxis(a[i],n*i)),c[i].crossVectors(a[i],s[i]);return{tangents:a,normals:s,binormals:c}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),((oc.prototype=Object.create(nc.prototype)).constructor=oc).prototype.isEllipseCurve=!0,oc.prototype.getPoint=function(e,t){for(var i=t||new Nt,r=2*Math.PI,n=this.aEndAngle-this.aStartAngle,o=Math.abs(n)<Number.EPSILON;n<0;)n+=r;for(;r<n;)n-=r;n<Number.EPSILON&&(n=o?0:r),!0!==this.aClockwise||o||(n===r?n=-r:n-=r);var a=this.aStartAngle+e*n,s=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var l=Math.cos(this.aRotation),h=Math.sin(this.aRotation),u=s-this.aX,p=c-this.aY;s=u*l-p*h+this.aX,c=u*h+p*l+this.aY}return i.set(s,c)},oc.prototype.copy=function(e){return nc.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},oc.prototype.toJSON=function(){var e=nc.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},oc.prototype.fromJSON=function(e){return nc.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},((ac.prototype=Object.create(oc.prototype)).constructor=ac).prototype.isArcCurve=!0;var cc=new Ft,lc=new sc,hc=new sc,uc=new sc;function pc(e,t,i,r){nc.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=i||"centripetal",this.tension=r||.5}function dc(e,t,i,r,n){var o=.5*(r-t),a=.5*(n-i),s=e*e;return(2*i-2*r+o+a)*(e*s)+(-3*i+3*r-2*o-a)*s+o*e+i}function fc(e,t,i,r){return(a=1-e)*a*t+2*(1-(o=e))*o*i+(n=e)*n*r;var n,o,a}function mc(e,t,i,r,n){return(l=1-e)*l*l*t+3*(c=1-(s=e))*c*s*i+3*(1-(a=e))*a*a*r+(o=e)*o*o*n;var o,a,s,c,l}function gc(e,t,i,r){nc.call(this),this.type="CubicBezierCurve",this.v0=e||new Nt,this.v1=t||new Nt,this.v2=i||new Nt,this.v3=r||new Nt}function vc(e,t,i,r){nc.call(this),this.type="CubicBezierCurve3",this.v0=e||new Ft,this.v1=t||new Ft,this.v2=i||new Ft,this.v3=r||new Ft}function yc(e,t){nc.call(this),this.type="LineCurve",this.v1=e||new Nt,this.v2=t||new Nt}function _c(e,t){nc.call(this),this.type="LineCurve3",this.v1=e||new Ft,this.v2=t||new Ft}function xc(e,t,i){nc.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Nt,this.v1=t||new Nt,this.v2=i||new Nt}function bc(e,t,i){nc.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Ft,this.v1=t||new Ft,this.v2=i||new Ft}function wc(e){nc.call(this),this.type="SplineCurve",this.points=e||[]}((pc.prototype=Object.create(nc.prototype)).constructor=pc).prototype.isCatmullRomCurve3=!0,pc.prototype.getPoint=function(e,t){var i,r,n,o,a=t||new Ft,s=this.points,c=s.length,l=(c-(this.closed?0:1))*e,h=Math.floor(l),u=l-h;if(this.closed?h+=0<h?0:(Math.floor(Math.abs(h)/c)+1)*c:0===u&&h===c-1&&(h=c-2,u=1),this.closed||0<h?i=s[(h-1)%c]:(cc.subVectors(s[0],s[1]).add(s[0]),i=cc),r=s[h%c],n=s[(h+1)%c],this.closed||h+2<c?o=s[(h+2)%c]:(cc.subVectors(s[c-1],s[c-2]).add(s[c-1]),o=cc),"centripetal"===this.curveType||"chordal"===this.curveType){var p="chordal"===this.curveType?.5:.25,d=Math.pow(i.distanceToSquared(r),p),f=Math.pow(r.distanceToSquared(n),p),m=Math.pow(n.distanceToSquared(o),p);f<1e-4&&(f=1),d<1e-4&&(d=f),m<1e-4&&(m=f),lc.initNonuniformCatmullRom(i.x,r.x,n.x,o.x,d,f,m),hc.initNonuniformCatmullRom(i.y,r.y,n.y,o.y,d,f,m),uc.initNonuniformCatmullRom(i.z,r.z,n.z,o.z,d,f,m)}else"catmullrom"===this.curveType&&(lc.initCatmullRom(i.x,r.x,n.x,o.x,this.tension),hc.initCatmullRom(i.y,r.y,n.y,o.y,this.tension),uc.initCatmullRom(i.z,r.z,n.z,o.z,this.tension));return a.set(lc.calc(u),hc.calc(u),uc.calc(u)),a},pc.prototype.copy=function(e){nc.prototype.copy.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},pc.prototype.toJSON=function(){var e=nc.prototype.toJSON.call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},pc.prototype.fromJSON=function(e){nc.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push((new Ft).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},((gc.prototype=Object.create(nc.prototype)).constructor=gc).prototype.isCubicBezierCurve=!0,gc.prototype.getPoint=function(e,t){var i=t||new Nt,r=this.v0,n=this.v1,o=this.v2,a=this.v3;return i.set(mc(e,r.x,n.x,o.x,a.x),mc(e,r.y,n.y,o.y,a.y)),i},gc.prototype.copy=function(e){return nc.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},gc.prototype.toJSON=function(){var e=nc.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},gc.prototype.fromJSON=function(e){return nc.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},((vc.prototype=Object.create(nc.prototype)).constructor=vc).prototype.isCubicBezierCurve3=!0,vc.prototype.getPoint=function(e,t){var i=t||new Ft,r=this.v0,n=this.v1,o=this.v2,a=this.v3;return i.set(mc(e,r.x,n.x,o.x,a.x),mc(e,r.y,n.y,o.y,a.y),mc(e,r.z,n.z,o.z,a.z)),i},vc.prototype.copy=function(e){return nc.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},vc.prototype.toJSON=function(){var e=nc.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},vc.prototype.fromJSON=function(e){return nc.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},((yc.prototype=Object.create(nc.prototype)).constructor=yc).prototype.isLineCurve=!0,yc.prototype.getPoint=function(e,t){var i=t||new Nt;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i},yc.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},yc.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},yc.prototype.copy=function(e){return nc.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},yc.prototype.toJSON=function(){var e=nc.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},yc.prototype.fromJSON=function(e){return nc.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},((_c.prototype=Object.create(nc.prototype)).constructor=_c).prototype.isLineCurve3=!0,_c.prototype.getPoint=function(e,t){var i=t||new Ft;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i},_c.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},_c.prototype.copy=function(e){return nc.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},_c.prototype.toJSON=function(){var e=nc.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},_c.prototype.fromJSON=function(e){return nc.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},((xc.prototype=Object.create(nc.prototype)).constructor=xc).prototype.isQuadraticBezierCurve=!0,xc.prototype.getPoint=function(e,t){var i=t||new Nt,r=this.v0,n=this.v1,o=this.v2;return i.set(fc(e,r.x,n.x,o.x),fc(e,r.y,n.y,o.y)),i},xc.prototype.copy=function(e){return nc.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},xc.prototype.toJSON=function(){var e=nc.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},xc.prototype.fromJSON=function(e){return nc.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},((bc.prototype=Object.create(nc.prototype)).constructor=bc).prototype.isQuadraticBezierCurve3=!0,bc.prototype.getPoint=function(e,t){var i=t||new Ft,r=this.v0,n=this.v1,o=this.v2;return i.set(fc(e,r.x,n.x,o.x),fc(e,r.y,n.y,o.y),fc(e,r.z,n.z,o.z)),i},bc.prototype.copy=function(e){return nc.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},bc.prototype.toJSON=function(){var e=nc.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},bc.prototype.fromJSON=function(e){return nc.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},((wc.prototype=Object.create(nc.prototype)).constructor=wc).prototype.isSplineCurve=!0,wc.prototype.getPoint=function(e,t){var i=t||new Nt,r=this.points,n=(r.length-1)*e,o=Math.floor(n),a=n-o,s=r[0===o?o:o-1],c=r[o],l=r[o>r.length-2?r.length-1:o+1],h=r[o>r.length-3?r.length-1:o+2];return i.set(dc(a,s.x,c.x,l.x,h.x),dc(a,s.y,c.y,l.y,h.y)),i},wc.prototype.copy=function(e){nc.prototype.copy.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push(r.clone())}return this},wc.prototype.toJSON=function(){var e=nc.prototype.toJSON.call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++){var r=this.points[t];e.points.push(r.toArray())}return e},wc.prototype.fromJSON=function(e){nc.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push((new Nt).fromArray(r))}return this};var Mc=Object.freeze({ArcCurve:ac,CatmullRomCurve3:pc,CubicBezierCurve:gc,CubicBezierCurve3:vc,EllipseCurve:oc,LineCurve:yc,LineCurve3:_c,QuadraticBezierCurve:xc,QuadraticBezierCurve3:bc,SplineCurve:wc});function Tc(){nc.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Ec(e){Tc.call(this),this.type="Path",this.currentPoint=new Nt,e&&this.setFromPoints(e)}function Sc(e){Ec.call(this,e),this.uuid=Bt.generateUUID(),this.type="Shape",this.holes=[]}function Ac(e,t){Wi.call(this),this.type="Light",this.color=new vi(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Rc(e,t,i){Ac.call(this,e,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Wi.DefaultUp),this.updateMatrix(),this.groundColor=new vi(t)}function Lc(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Nt(512,512),this.map=null,this.matrix=new Ut}function Pc(){Lc.call(this,new ra(50,1,.5,500))}function Cc(e,t,i,r,n,o){Ac.call(this,e,t),this.type="SpotLight",this.position.copy(Wi.DefaultUp),this.updateMatrix(),this.target=new Wi,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==n?n:0,this.decay=void 0!==o?o:1,this.shadow=new Pc}function Oc(e,t,i,r){Ac.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==r?r:1,this.shadow=new Lc(new ra(90,1,.5,500))}function Ic(){Lc.call(this,new qi(-5,5,5,-5,.5,500))}function Dc(e,t){Ac.call(this,e,t),this.type="DirectionalLight",this.position.copy(Wi.DefaultUp),this.updateMatrix(),this.target=new Wi,this.shadow=new Ic}function Bc(e,t){Ac.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Nc(e,t,i,r){Ac.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==i?i:10,this.height=void 0!==r?r:10}function Uc(e,t,i,r){Yc.call(this,e,t,i,r)}function kc(e,t,i){Yc.call(this,e,t,i)}function Fc(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i}function zc(e,t,i,r){Fc.call(this,e,t,i,r)}function jc(e,t,i,r){Yc.call(this,e,t,i,r)}function Hc(e,t,i,r){Yc.call(this,e,t,i,r)}function Gc(e,t,i,r){Yc.call(this,e,t,i,r)}function Vc(e,t,i,r){Fc.call(this,e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Wc(e,t,i,r){Fc.call(this,e,t,i,r)}function Xc(e,t,i,r){Fc.call(this,e,t,i,r)}Tc.prototype=Object.assign(Object.create(nc.prototype),{constructor:Tc,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new yc(t,e))},getPoint:function(e){for(var t=e*this.getLength(),i=this.getCurveLengths(),r=0;r<i.length;){if(i[r]>=t){var n=i[r]-t,o=this.curves[r],a=o.getLength(),s=0===a?0:1-n/a;return o.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,i=[],r=0,n=this.curves;r<n.length;r++)for(var o=n[r],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),c=0;c<s.length;c++){var l=s[c];t&&t.equals(l)||(i.push(l),t=l)}return this.autoClose&&1<i.length&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},copy:function(e){nc.prototype.copy.call(this,e),this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=nc.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,i=this.curves.length;t<i;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){nc.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var r=e.curves[t];this.curves.push((new Mc[r.type]).fromJSON(r))}return this}}),Ec.prototype=Object.assign(Object.create(Tc.prototype),{constructor:Ec,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var i=new yc(this.currentPoint.clone(),new Nt(e,t));this.curves.push(i),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,i,r){var n=new xc(this.currentPoint.clone(),new Nt(e,t),new Nt(i,r));this.curves.push(n),this.currentPoint.set(i,r)},bezierCurveTo:function(e,t,i,r,n,o){var a=new gc(this.currentPoint.clone(),new Nt(e,t),new Nt(i,r),new Nt(n,o));this.curves.push(a),this.currentPoint.set(n,o)},splineThru:function(e){var t=new wc([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,i,r,n,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+a,t+s,i,r,n,o)},absarc:function(e,t,i,r,n,o){this.absellipse(e,t,i,i,r,n,o)},ellipse:function(e,t,i,r,n,o,a,s){var c=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(e+c,t+l,i,r,n,o,a,s)},absellipse:function(e,t,i,r,n,o,a,s){var c=new oc(e,t,i,r,n,o,a,s);if(0<this.curves.length){var l=c.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(c);var h=c.getPoint(1);this.currentPoint.copy(h)},copy:function(e){return Tc.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Tc.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Tc.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Sc.prototype=Object.assign(Object.create(Ec.prototype),{constructor:Sc,getPointsHoles:function(e){for(var t=[],i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Ec.prototype.copy.call(this,e),this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=Ec.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,i=this.holes.length;t<i;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){Ec.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var r=e.holes[t];this.holes.push((new Ec).fromJSON(r))}return this}}),Ac.prototype=Object.assign(Object.create(Wi.prototype),{constructor:Ac,isLight:!0,copy:function(e){return Wi.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=Wi.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Rc.prototype=Object.assign(Object.create(Ac.prototype),{constructor:Rc,isHemisphereLight:!0,copy:function(e){return Ac.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Lc.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Pc.prototype=Object.assign(Object.create(Lc.prototype),{constructor:Pc,isSpotLightShadow:!0,update:function(e){var t=this.camera,i=2*Bt.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,n=e.distance||t.far;i===t.fov&&r===t.aspect&&n===t.far||(t.fov=i,t.aspect=r,t.far=n,t.updateProjectionMatrix())}}),Cc.prototype=Object.assign(Object.create(Ac.prototype),{constructor:Cc,isSpotLight:!0,copy:function(e){return Ac.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Oc.prototype=Object.assign(Object.create(Ac.prototype),{constructor:Oc,isPointLight:!0,copy:function(e){return Ac.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Ic.prototype=Object.assign(Object.create(Lc.prototype),{constructor:Ic}),Dc.prototype=Object.assign(Object.create(Ac.prototype),{constructor:Dc,isDirectionalLight:!0,copy:function(e){return Ac.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Bc.prototype=Object.assign(Object.create(Ac.prototype),{constructor:Bc,isAmbientLight:!0}),Nc.prototype=Object.assign(Object.create(Ac.prototype),{constructor:Nc,isRectAreaLight:!0,copy:function(e){return Ac.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Ac.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),Uc.prototype=Object.assign(Object.create(Yc.prototype),{constructor:Uc,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),kc.prototype=Object.assign(Object.create(Yc.prototype),{constructor:kc,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(Fc.prototype,{evaluate:function(e){var t=this.parameterPositions,i=this._cachedIndex,r=t[i],n=t[i-1];e:{t:{var o;i:{r:if(!(e<r)){for(var a=i+2;;){if(void 0===r){if(e<n)break r;return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,e,n)}if(i===a)break;if(n=r,e<(r=t[++i]))break t}o=t.length;break i}if(n<=e)break e;var s=t[1];e<s&&(i=2,n=s);for(a=i-2;;){if(void 0===n)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(i===a)break;if(r=n,(n=t[--i-1])<=e)break t}o=i,i=0}for(;i<o;){var c=i+o>>>1;e<t[c]?o=c:i=c+1}if(r=t[i],void 0===(n=t[i-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,n,e)}this._cachedIndex=i,this.intervalChanged_(i,n,r)}return this.interpolate_(i,n,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,n=e*r,o=0;o!==r;++o)t[o]=i[n+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Fc.prototype,{beforeStart_:Fc.prototype.copySampleValue_,afterEnd_:Fc.prototype.copySampleValue_}),zc.prototype=Object.assign(Object.create(Fc.prototype),{constructor:zc,interpolate_:function(e,t,i,r){for(var n=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=(i-t)/(r-t),l=s+a;s!==l;s+=4)kt.slerpFlat(n,0,o,s-a,o,s,c);return n}}),jc.prototype=Object.assign(Object.create(Yc.prototype),{constructor:jc,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new zc(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Hc.prototype=Object.assign(Object.create(Yc.prototype),{constructor:Hc,ValueTypeName:"color"}),Gc.prototype=Object.assign(Object.create(Yc.prototype),{constructor:Gc,ValueTypeName:"number"}),Vc.prototype=Object.assign(Object.create(Fc.prototype),{constructor:Vc,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(e,t,i){var r=this.parameterPositions,n=e-2,o=e+1,a=r[n],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:n=e,a=2*t-i;break;case 2402:a=t+r[n=r.length-2]-r[n+1];break;default:n=e,a=i}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=e,s=2*i-t;break;case 2402:s=i+r[o=1]-r[0];break;default:o=e-1,s=t}var c=.5*(i-t),l=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(s-i),this._offsetPrev=n*l,this._offsetNext=o*l},interpolate_:function(e,t,i,r){for(var n=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=s-a,l=this._offsetPrev,h=this._offsetNext,u=this._weightPrev,p=this._weightNext,d=(i-t)/(r-t),f=d*d,m=f*d,g=-u*m+2*u*f-u*d,v=(1+u)*m+(-1.5-2*u)*f+(-.5+u)*d+1,y=(-1-p)*m+(1.5+p)*f+.5*d,_=p*m-p*f,x=0;x!==a;++x)n[x]=g*o[l+x]+v*o[c+x]+y*o[s+x]+_*o[h+x];return n}}),Wc.prototype=Object.assign(Object.create(Fc.prototype),{constructor:Wc,interpolate_:function(e,t,i,r){for(var n=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=s-a,l=(i-t)/(r-t),h=1-l,u=0;u!==a;++u)n[u]=o[c+u]*h+o[s+u]*l;return n}}),Xc.prototype=Object.assign(Object.create(Fc.prototype),{constructor:Xc,interpolate_:function(e){return this.copySampleValue_(e-1)}});var qc={arraySlice:function(e,t,i){return qc.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==i?i:e.length)):e.slice(t,i)},convertArray:function(e,t,i){return!e||!i&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(i){for(var e=i.length,t=new Array(e),r=0;r!==e;++r)t[r]=r;return t.sort(function(e,t){return i[e]-i[t]}),t},sortedArray:function(e,t,i){for(var r=e.length,n=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=i[o]*t,c=0;c!==t;++c)n[a++]=e[s+c];return n},flattenJSON:function(e,t,i,r){for(var n=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[n++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))for(;void 0!==(a=o[r])&&(t.push(o.time),i.push.apply(i,a)),void 0!==(o=e[n++]););else if(void 0!==a.toArray)for(;void 0!==(a=o[r])&&(t.push(o.time),a.toArray(i,i.length)),void 0!==(o=e[n++]););else for(;void 0!==(a=o[r])&&(t.push(o.time),i.push(a)),void 0!==(o=e[n++]););}}};function Yc(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=qc.convertArray(t,this.TimeBufferType),this.values=qc.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()}function Jc(e,t,i,r){Yc.call(this,e,t,i,r)}function Zc(e,t,i){this.name=e,this.tracks=i,this.duration=void 0!==t?t:-1,this.uuid=Bt.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function Kc(e){this.manager=void 0!==e?e:Zs,this.textures={}}function Qc(e){this.manager=void 0!==e?e:Zs}Object.assign(Yc,{parse:function(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=Yc._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var i=[],r=[];qc.flattenJSON(e.keys,i,r,"value"),e.times=i,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,i=e.constructor;if(void 0!==i.toJSON)t=i.toJSON(e);else{t={name:e.name,times:qc.convertArray(e.times,Array),values:qc.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Gc;case"vector":case"vector2":case"vector3":case"vector4":return Jc;case"color":return Hc;case"quaternion":return jc;case"bool":case"boolean":return kc;case"string":return Uc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}}),Object.assign(Yc.prototype,{constructor:Yc,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new Xc(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Wc(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Vc(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0!==t)this.createInterpolant=t;else{var i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}console.warn("THREE.KeyframeTrack:",i)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,i=0,r=t.length;i!==r;++i)t[i]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,i=0,r=t.length;i!==r;++i)t[i]*=e;return this},trim:function(e,t){for(var i=this.times,r=i.length,n=0,o=r-1;n!==r&&i[n]<e;)++n;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==n||o!==r){o<=n&&(n=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=qc.arraySlice(i,n,o),this.values=qc.arraySlice(this.values,n*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var i=this.times,r=this.values,n=i.length;0===n&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==n;a++){var s=i[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&s<o){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==r&&qc.isTypedArray(r)){a=0;for(var c=r.length;a!==c;++a){var l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,i=this.getValueSize(),r=2302===this.getInterpolation(),n=1,o=e.length-1,a=1;a<o;++a){var s=!1,c=e[a];if(c!==e[a+1]&&(1!==a||c!==c[0]))if(r)s=!0;else for(var l=a*i,h=l-i,u=l+i,p=0;p!==i;++p){var d=t[l+p];if(d!==t[h+p]||d!==t[u+p]){s=!0;break}}if(s){if(a!==n){e[n]=e[a];var f=a*i,m=n*i;for(p=0;p!==i;++p)t[m+p]=t[f+p]}++n}}if(0<o){e[n]=e[o];for(f=o*i,m=n*i,p=0;p!==i;++p)t[m+p]=t[f+p];++n}return n!==e.length&&(this.times=qc.arraySlice(e,0,n),this.values=qc.arraySlice(t,0,n*i)),this}}),Jc.prototype=Object.assign(Object.create(Yc.prototype),{constructor:Jc,ValueTypeName:"vector"}),Object.assign(Zc,{parse:function(e){for(var t=[],i=e.tracks,r=1/(e.fps||1),n=0,o=i.length;n!==o;++n)t.push(Yc.parse(i[n]).scale(r));return new Zc(e.name,e.duration,t)},toJSON:function(e){for(var t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},n=0,o=i.length;n!==o;++n)t.push(Yc.toJSON(i[n]));return r},CreateFromMorphTargetSequence:function(e,t,i,r){for(var n=t.length,o=[],a=0;a<n;a++){var s=[],c=[];s.push((a+n-1)%n,a,(a+1)%n),c.push(0,1,0);var l=qc.getKeyframeOrder(s);s=qc.sortedArray(s,1,l),c=qc.sortedArray(c,1,l),r||0!==s[0]||(s.push(n),c.push(c[0])),o.push(new Gc(".morphTargetInfluences["+t[a].name+"]",s,c).scale(1/i))}return new Zc(e,-1,o)},findByName:function(e,t){var i=e;if(!Array.isArray(e)){var r=e;i=r.geometry&&r.geometry.animations||r.animations}for(var n=0;n<i.length;n++)if(i[n].name===t)return i[n];return null},CreateClipsFromMorphTargetSequences:function(e,t,i){for(var r={},n=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],c=s.name.match(n);if(c&&1<c.length){var l=r[u=c[1]];l||(r[u]=l=[]),l.push(s)}}var h=[];for(var u in r)h.push(Zc.CreateFromMorphTargetSequence(u,r[u],t,i));return h},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var i=function(e,t,i,r,n){if(0!==i.length){var o=[],a=[];qc.flattenJSON(i,o,a,r),0!==o.length&&n.push(new e(t,o,a))}},r=[],n=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],c=0;c<s.length;c++){var l=s[c].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var h={},u=0;u<l.length;u++)if(l[u].morphTargets)for(var p=0;p<l[u].morphTargets.length;p++)h[l[u].morphTargets[p]]=-1;for(var d in h){var f=[],m=[];for(p=0;p!==l[u].morphTargets.length;++p){var g=l[u];f.push(g.time),m.push(g.morphTarget===d?1:0)}r.push(new Gc(".morphTargetInfluence["+d+"]",f,m))}o=h.length*(a||1)}else{var v=".bones["+t[c].name+"]";i(Jc,v+".position",l,"pos",r),i(jc,v+".quaternion",l,"rot",r),i(Jc,v+".scale",l,"scl",r)}}return 0===r.length?null:new Zc(n,o,r)}}),Object.assign(Zc.prototype,{resetDuration:function(){for(var e=0,t=0,i=this.tracks.length;t!==i;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}this.duration=e},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(Kc.prototype,{load:function(e,t,i,r){var n=this;new Qs(n.manager).load(e,function(e){t(n.parse(JSON.parse(e)))},i,r)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function i(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new qs[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearCoat&&(r.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(r.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(r.uniforms=e.uniforms),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=i(e.map)),void 0!==e.alphaMap&&(r.alphaMap=i(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=i(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=i(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var n=e.normalScale;!1===Array.isArray(n)&&(n=[n,n]),r.normalScale=(new Nt).fromArray(n)}return void 0!==e.displacementMap&&(r.displacementMap=i(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=i(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=i(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=i(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=i(e.specularMap)),void 0!==e.envMap&&(r.envMap=i(e.envMap)),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.lightMap&&(r.lightMap=i(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=i(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=i(e.gradientMap)),r}}),Object.assign(Qc.prototype,{load:function(e,t,i,r){var n=this;new Qs(n.manager).load(e,function(e){t(n.parse(JSON.parse(e)))},i,r)},parse:function(e){var t=new Ar,i=e.data.index;if(void 0!==i){var r=new rl[i.type](i.array);t.setIndex(new nr(r,1))}var n=e.data.attributes;for(var o in n){var a=n[o];r=new rl[a.type](a.array);t.addAttribute(o,new nr(r,a.itemSize,a.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==s)for(var c=0,l=s.length;c!==l;++c){var h=s[c];t.addGroup(h.start,h.count,h.materialIndex)}var u=e.data.boundingSphere;if(void 0!==u){var p=new Ft;void 0!==u.center&&p.fromArray(u.center),t.boundingSphere=new hi(p,u.radius)}return t}});var $c,el,tl,il,rl={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function nl(){}nl.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,i=0,r=t.length;i<r;i+=2){var n=t[i],o=t[i+1];if(n.test(e))return o}return null}},Object.assign(nl.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,i){for(var r=[],n=0;n<e.length;++n)r[n]=this.createMaterial(e[n],t,i);return r},createMaterial:($c={NoBlending:q,NormalBlending:Y,AdditiveBlending:J,SubtractiveBlending:Z,MultiplyBlending:K,CustomBlending:Q},el=new vi,tl=new rc,il=new Kc,function(e,l,h){var u={};function t(e,t,i,r,n){var o,a=l+e,s=nl.Handlers.get(a);null!==s?o=s.load(a):(tl.setCrossOrigin(h),o=tl.load(a)),void 0!==t&&(o.repeat.fromArray(t),1!==t[0]&&(o.wrapS=we),1!==t[1]&&(o.wrapT=we)),void 0!==i&&o.offset.fromArray(i),void 0!==r&&("repeat"===r[0]&&(o.wrapS=we),"mirror"===r[0]&&(o.wrapS=Ae),"repeat"===r[1]&&(o.wrapT=we),"mirror"===r[1]&&(o.wrapT=Ae)),void 0!==n&&(o.anisotropy=n);var c=Bt.generateUUID();return u[c]=o,c}var i={uuid:Bt.generateUUID(),type:"MeshLambertMaterial"};for(var r in e){var n=e[r];switch(r){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":i.name=n;break;case"blending":i.blending=$c[n];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",r,"is no longer supported.");break;case"colorDiffuse":i.color=el.fromArray(n).getHex();break;case"colorSpecular":i.specular=el.fromArray(n).getHex();break;case"colorEmissive":i.emissive=el.fromArray(n).getHex();break;case"specularCoef":i.shininess=n;break;case"shading":"basic"===n.toLowerCase()&&(i.type="MeshBasicMaterial"),"phong"===n.toLowerCase()&&(i.type="MeshPhongMaterial"),"standard"===n.toLowerCase()&&(i.type="MeshStandardMaterial");break;case"mapDiffuse":i.map=t(n,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":i.emissiveMap=t(n,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":i.lightMap=t(n,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":i.aoMap=t(n,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":i.bumpMap=t(n,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case"mapBumpScale":i.bumpScale=n;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":i.normalMap=t(n,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case"mapNormalFactor":i.normalScale=n;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":i.specularMap=t(n,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":i.metalnessMap=t(n,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":i.roughnessMap=t(n,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":i.alphaMap=t(n,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":i.side=Me;break;case"doubleSided":i.side=te;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),i.opacity=n;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":i[r]=n;break;case"vertexColors":!0===n&&(i.vertexColors=T),"face"===n&&(i.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",r,n)}}return"MeshBasicMaterial"===i.type&&delete i.emissive,"MeshPhongMaterial"!==i.type&&delete i.specular,i.opacity<1&&(i.transparent=!0),il.setTextures(u),il.parse(i)})});var ol={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function al(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:Zs,this.withCredentials=!1}function sl(e){this.manager=void 0!==e?e:Zs,this.texturePath=""}Object.assign(al.prototype,{crossOrigin:"anonymous",load:function(o,a,e,t){var s=this,c=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:ol.extractUrlBase(o),i=new Qs(this.manager);i.setWithCredentials(this.withCredentials),i.load(o,function(e){var t=JSON.parse(e),i=t.metadata;if(void 0!==i){var r=i.type;if(void 0!==r&&"object"===r.toLowerCase())return void console.error("THREE.JSONLoader: "+o+" should be loaded with THREE.ObjectLoader instead.")}var n=s.parse(t,c);a(n.geometry,n.materials)},e,t)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setTexturePath:function(e){return this.texturePath=e,this},parse:function(e,t){void 0!==e.data&&(e=e.data),void 0!==e.scale?e.scale=1/e.scale:e.scale=1;var i=new rr;return function(e,t){function i(e,t){return e&1<<t}var r,n,o,a,s,c,l,h,u,p,d,f,m,g,v,y,_,x,b,w,M,T,E,S,A,R=e.faces,L=e.vertices,P=e.normals,C=e.colors,O=e.scale,I=0;if(void 0!==e.uvs){for(r=0;r<e.uvs.length;r++)e.uvs[r].length&&I++;for(r=0;r<I;r++)t.faceVertexUvs[r]=[]}for(a=0,s=L.length;a<s;)(x=new Ft).x=L[a++]*O,x.y=L[a++]*O,x.z=L[a++]*O,t.vertices.push(x);for(a=0,s=R.length;a<s;)if(d=i(p=R[a++],0),f=i(p,1),m=i(p,3),g=i(p,4),v=i(p,5),y=i(p,6),_=i(p,7),d){if((w=new Yi).a=R[a],w.b=R[a+1],w.c=R[a+3],(M=new Yi).a=R[a+1],M.b=R[a+2],M.c=R[a+3],a+=4,f&&(u=R[a++],w.materialIndex=u,M.materialIndex=u),o=t.faces.length,m)for(r=0;r<I;r++)for(S=e.uvs[r],t.faceVertexUvs[r][o]=[],t.faceVertexUvs[r][o+1]=[],n=0;n<4;n++)A=new Nt(S[2*(h=R[a++])],S[2*h+1]),2!==n&&t.faceVertexUvs[r][o].push(A),0!==n&&t.faceVertexUvs[r][o+1].push(A);if(g&&(l=3*R[a++],w.normal.set(P[l++],P[l++],P[l]),M.normal.copy(w.normal)),v)for(r=0;r<4;r++)l=3*R[a++],E=new Ft(P[l++],P[l++],P[l]),2!==r&&w.vertexNormals.push(E),0!==r&&M.vertexNormals.push(E);if(y&&(T=C[c=R[a++]],w.color.setHex(T),M.color.setHex(T)),_)for(r=0;r<4;r++)T=C[c=R[a++]],2!==r&&w.vertexColors.push(new vi(T)),0!==r&&M.vertexColors.push(new vi(T));t.faces.push(w),t.faces.push(M)}else{if((b=new Yi).a=R[a++],b.b=R[a++],b.c=R[a++],f&&(u=R[a++],b.materialIndex=u),o=t.faces.length,m)for(r=0;r<I;r++)for(S=e.uvs[r],t.faceVertexUvs[r][o]=[],n=0;n<3;n++)A=new Nt(S[2*(h=R[a++])],S[2*h+1]),t.faceVertexUvs[r][o].push(A);if(g&&(l=3*R[a++],b.normal.set(P[l++],P[l++],P[l])),v)for(r=0;r<3;r++)l=3*R[a++],E=new Ft(P[l++],P[l++],P[l]),b.vertexNormals.push(E);if(y&&(c=R[a++],b.color.setHex(C[c])),_)for(r=0;r<3;r++)c=R[a++],b.vertexColors.push(new vi(C[c]));t.faces.push(b)}}(e,i),function(e,t){var i=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var r=0,n=e.skinWeights.length;r<n;r+=i){var o=e.skinWeights[r],a=1<i?e.skinWeights[r+1]:0,s=2<i?e.skinWeights[r+2]:0,c=3<i?e.skinWeights[r+3]:0;t.skinWeights.push(new oi(o,a,s,c))}if(e.skinIndices)for(r=0,n=e.skinIndices.length;r<n;r+=i){var l=e.skinIndices[r],h=1<i?e.skinIndices[r+1]:0,u=2<i?e.skinIndices[r+2]:0,p=3<i?e.skinIndices[r+3]:0;t.skinIndices.push(new oi(l,h,u,p))}t.bones=e.bones,t.bones&&0<t.bones.length&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}(e,i),function(e,t){var i=e.scale;if(void 0!==e.morphTargets)for(var r=0,n=e.morphTargets.length;r<n;r++){t.morphTargets[r]={},t.morphTargets[r].name=e.morphTargets[r].name,t.morphTargets[r].vertices=[];for(var o=t.morphTargets[r].vertices,a=e.morphTargets[r].vertices,s=0,c=a.length;s<c;s+=3){var l=new Ft;l.x=a[s]*i,l.y=a[s+1]*i,l.z=a[s+2]*i,o.push(l)}}if(void 0!==e.morphColors&&0<e.morphColors.length){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var h=t.faces,u=e.morphColors[0].colors;for(r=0,n=h.length;r<n;r++)h[r].color.fromArray(u,3*r)}}(e,i),function(e,t){var i=[],r=[];void 0!==e.animation&&r.push(e.animation),void 0!==e.animations&&(e.animations.length?r=r.concat(e.animations):r.push(e.animations));for(var n=0;n<r.length;n++){var o=Zc.parseAnimation(r[n],t.bones);o&&i.push(o)}if(t.morphTargets){var a=Zc.CreateClipsFromMorphTargetSequences(t.morphTargets,10);i=i.concat(a)}0<i.length&&(t.animations=i)}(e,i),i.computeFaceNormals(),i.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:i}:{geometry:i,materials:nl.prototype.initMaterials(e.materials,t,this.crossOrigin)}}}),Object.assign(sl.prototype,{crossOrigin:"anonymous",load:function(r,n,e,o){""===this.texturePath&&(this.texturePath=r.substring(0,r.lastIndexOf("/")+1));var a=this;new Qs(a.manager).load(r,function(e){var t=null;try{t=JSON.parse(e)}catch(e){return void 0!==o&&o(e),void console.error("THREE:ObjectLoader: Can't parse "+r+".",e.message)}var i=t.metadata;void 0!==i&&void 0!==i.type&&"geometry"!==i.type.toLowerCase()?a.parse(t,n):console.error("THREE.ObjectLoader: Can't load "+r+". Use THREE.JSONLoader instead.")},e,o)},setTexturePath:function(e){return this.texturePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var i=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,i),n=this.parseImages(e.images,function(){void 0!==t&&t(s)}),o=this.parseTextures(e.textures,n),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,r,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var i=0,r=e.length;i<r;i++){var n=(new Sc).fromJSON(e[i]);t[n.uuid]=n}return t},parseGeometries:function(e,t){var i={};if(void 0!==e)for(var r=new al,n=new Qc,o=0,a=e.length;o<a;o++){var s,c=e[o];switch(c.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Us[c.type](c.width,c.height,c.widthSegments,c.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Us[c.type](c.width,c.height,c.depth,c.widthSegments,c.heightSegments,c.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Us[c.type](c.radius,c.segments,c.thetaStart,c.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Us[c.type](c.radiusTop,c.radiusBottom,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Us[c.type](c.radius,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Us[c.type](c.radius,c.widthSegments,c.heightSegments,c.phiStart,c.phiLength,c.thetaStart,c.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new Us[c.type](c.radius,c.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Us[c.type](c.innerRadius,c.outerRadius,c.thetaSegments,c.phiSegments,c.thetaStart,c.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Us[c.type](c.radius,c.tube,c.radialSegments,c.tubularSegments,c.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Us[c.type](c.radius,c.tube,c.tubularSegments,c.radialSegments,c.p,c.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Us[c.type](c.points,c.segments,c.phiStart,c.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new Us[c.type](c.vertices,c.indices,c.radius,c.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],h=0,u=c.shapes.length;h<u;h++){var p=t[c.shapes[h]];l.push(p)}s=new Us[c.type](l,c.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(l=[],h=0,u=c.shapes.length;h<u;h++){p=t[c.shapes[h]];l.push(p)}var d=c.options.extrudePath;void 0!==d&&(c.options.extrudePath=(new Mc[d.type]).fromJSON(d)),s=new Us[c.type](l,c.options);break;case"BufferGeometry":s=n.parse(c);break;case"Geometry":s=r.parse(c,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+c.type+'"');continue}s.uuid=c.uuid,void 0!==c.name&&(s.name=c.name),!0===s.isBufferGeometry&&void 0!==c.userData&&(s.userData=c.userData),i[c.uuid]=s}return i},parseMaterials:function(e,t){var i={};if(void 0!==e){var r=new Kc;r.setTextures(t);for(var n=0,o=e.length;n<o;n++){var a=e[n];if("MultiMaterial"===a.type){for(var s=[],c=0;c<a.materials.length;c++)s.push(r.parse(a.materials[c]));i[a.uuid]=s}else i[a.uuid]=r.parse(a)}}return i},parseAnimations:function(e){for(var t=[],i=0;i<e.length;i++){var r=e[i],n=Zc.parse(r);void 0!==r.uuid&&(n.uuid=r.uuid),t.push(n)}return t},parseImages:function(e,t){var i=this,r={};function n(e){return i.manager.itemStart(e),o.load(e,function(){i.manager.itemEnd(e)},void 0,function(){i.manager.itemEnd(e),i.manager.itemError(e)})}if(void 0!==e&&0<e.length){var o=new tc(new Js(t));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var c=e[a],l=c.url;if(Array.isArray(l)){r[c.uuid]=[];for(var h=0,u=l.length;h<u;h++){var p=l[h],d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:i.texturePath+p;r[c.uuid].push(n(d))}}else{d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:i.texturePath+c.url;r[c.uuid]=n(d)}}}return r},parseTextures:function(e,t){function i(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var n=0,o=e.length;n<o;n++){var a,s=e[n];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(a=Array.isArray(t[s.image])?new wn(t[s.image]):new ni(t[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=i(s.mapping,ll)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=i(s.wrap[0],hl),a.wrapT=i(s.wrap[1],hl)),void 0!==s.format&&(a.format=s.format),void 0!==s.minFilter&&(a.minFilter=i(s.minFilter,ul)),void 0!==s.magFilter&&(a.magFilter=i(s.magFilter,ul)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),r[s.uuid]=a}return r},parseObject:function(e,t,o){var i;function r(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function n(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,r=e.length;i<r;i++){var n=e[i];void 0===o[n]&&console.warn("THREE.ObjectLoader: Undefined material",n),t.push(o[n])}return t}return void 0===o[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),o[e]}}switch(e.type){case"Scene":i=new ha,void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new vi(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new la(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new ca(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new ra(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new qi(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new Bc(e.color,e.intensity);break;case"DirectionalLight":i=new Dc(e.color,e.intensity);break;case"PointLight":i=new Oc(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new Nc(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new Cc(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new Rc(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=r(e.geometry),s=n(e.material);i=a.bones&&0<a.bones.length?new ga(a,s):new hn(a,s);break;case"LOD":i=new da;break;case"Line":i=new ya(r(e.geometry),n(e.material),e.mode);break;case"LineLoop":i=new xa(r(e.geometry),n(e.material));break;case"LineSegments":i=new _a(r(e.geometry),n(e.material));break;case"PointCloud":case"Points":i=new wa(r(e.geometry),n(e.material));break;case"Sprite":i=new pa(n(e.material));break;case"Group":i=new ia;break;default:i=new Wi}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(i.matrixAutoUpdate=e.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.layers&&(i.layers.mask=e.layers),void 0!==e.children)for(var c=e.children,l=0;l<c.length;l++)i.add(this.parseObject(c[l],t,o));if("LOD"===e.type)for(var h=e.levels,u=0;u<h.length;u++){var p=h[u],d=i.getObjectByProperty("uuid",p.object);void 0!==d&&i.addLevel(d,p.distance)}return i}});var cl,ll={UVMapping:300,CubeReflectionMapping:me,CubeRefractionMapping:ge,EquirectangularReflectionMapping:ve,EquirectangularRefractionMapping:ye,SphericalReflectionMapping:_e,CubeUVReflectionMapping:xe,CubeUVRefractionMapping:be},hl={RepeatWrapping:we,ClampToEdgeWrapping:Se,MirroredRepeatWrapping:Ae},ul={NearestFilter:Re,NearestMipMapNearestFilter:Le,NearestMipMapLinearFilter:Pe,LinearFilter:Ce,LinearMipMapNearestFilter:Oe,LinearMipMapLinearFilter:Ie};function pl(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:Zs,this.options=void 0}function dl(){this.type="ShapePath",this.color=new vi,this.subPaths=[],this.currentPath=null}function fl(e){this.type="Font",this.data=e}function ml(e,t,i,r,n){var o=n.glyphs[e]||n.glyphs["?"];if(o){var a,s,c,l,h,u,p,d,f=new dl;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),g=0,v=m.length;g<v;){switch(m[g++]){case"m":a=m[g++]*t+i,s=m[g++]*t+r,f.moveTo(a,s);break;case"l":a=m[g++]*t+i,s=m[g++]*t+r,f.lineTo(a,s);break;case"q":c=m[g++]*t+i,l=m[g++]*t+r,h=m[g++]*t+i,u=m[g++]*t+r,f.quadraticCurveTo(h,u,c,l);break;case"b":c=m[g++]*t+i,l=m[g++]*t+r,h=m[g++]*t+i,u=m[g++]*t+r,p=m[g++]*t+i,d=m[g++]*t+r,f.bezierCurveTo(h,u,p,d,c,l)}}return{offsetX:o.ha*t,path:f}}}function gl(e){this.manager=void 0!==e?e:Zs}pl.prototype={constructor:pl,setOptions:function(e){return this.options=e,this},load:function(t,i,e,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var n=this,o=Ys.get(t);if(void 0!==o)return n.manager.itemStart(t),setTimeout(function(){i&&i(o),n.manager.itemEnd(t)},0),o;fetch(t).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,n.options)}).then(function(e){Ys.add(t,e),i&&i(e),n.manager.itemEnd(t)}).catch(function(e){r&&r(e),n.manager.itemEnd(t),n.manager.itemError(t)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(dl.prototype,{moveTo:function(e,t){this.currentPath=new Ec,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,i,r){this.currentPath.quadraticCurveTo(e,t,i,r)},bezierCurveTo:function(e,t,i,r,n,o){this.currentPath.bezierCurveTo(e,t,i,r,n,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function i(e){for(var t=[],i=0,r=e.length;i<r;i++){var n=e[i],o=new Sc;o.curves=n.curves,t.push(o)}return t}function r(e,t){for(var i=t.length,r=!1,n=i-1,o=0;o<i;n=o++){var a=t[n],s=t[o],c=s.x-a.x,l=s.y-a.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(a=t[o],c=-c,s=t[n],l=-l),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var h=l*(e.x-a.x)-c*(e.y-a.y);if(0===h)return!0;if(h<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r}var n=ps.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return i(o);var a,s,c,l=[];if(1===o.length)return s=o[0],(c=new Sc).curves=s.curves,l.push(c),l;var h=!n(o[0].getPoints());h=e?!h:h;var u,p,d=[],f=[],m=[],g=0;f[g]=void 0,m[g]=[];for(var v=0,y=o.length;v<y;v++)a=n(u=(s=o[v]).getPoints()),(a=e?!a:a)?(!h&&f[g]&&g++,f[g]={s:new Sc,p:u},f[g].s.curves=s.curves,h&&g++,m[g]=[]):m[g].push({h:s,p:u[0]});if(!f[0])return i(o);if(1<f.length){for(var _=!1,x=[],b=0,w=f.length;b<w;b++)d[b]=[];for(b=0,w=f.length;b<w;b++)for(var M=m[b],T=0;T<M.length;T++){for(var E=M[T],S=!0,A=0;A<f.length;A++)r(E.p,f[A].p)&&(b!==A&&x.push({froms:b,tos:A,hole:T}),S?(S=!1,d[A].push(E)):_=!0);S&&d[b].push(E)}0<x.length&&(_||(m=d))}v=0;for(var R=f.length;v<R;v++){c=f[v].s,l.push(c);for(var L=0,P=(p=m[v]).length;L<P;L++)c.holes.push(p[L].h)}return l}}),Object.assign(fl.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var i=[],r=function(e,t,i){for(var r=Array.from?Array.from(e):String(e).split(""),n=t/i.resolution,o=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*n,a=[],s=0,c=0,l=0;l<r.length;l++){var h=r[l];if("\n"===h)s=0,c-=o;else{var u=ml(h,n,s,c,i);s+=u.offsetX,a.push(u.path)}}return a}(e,t,this.data),n=0,o=r.length;n<o;n++)Array.prototype.push.apply(i,r[n].toShapes());return i}}),Object.assign(gl.prototype,{load:function(e,r,t,i){var n=this,o=new Qs(this.manager);o.setPath(this.path),o.load(e,function(t){var i;try{i=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(t.substring(65,t.length-2))}var e=n.parse(i);r&&r(e)},t,i)},parse:function(e){return new fl(e)},setPath:function(e){return this.path=e,this}});var vl,yl,_l,xl,bl,wl,Ml,Tl,El,Sl,Al,Rl,Ll,Pl,Cl,Ol,Il,Dl,Bl={getContext:function(){return void 0===cl&&(cl=new(window.AudioContext||window.webkitAudioContext)),cl},setContext:function(e){cl=e}};function Nl(e){this.manager=void 0!==e?e:Zs}function Ul(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ra,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ra,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function kl(e,t,i){Wi.call(this),this.type="CubeCamera";var n=new ra(90,1,e,t);n.up.set(0,-1,0),n.lookAt(new Ft(1,0,0)),this.add(n);var o=new ra(90,1,e,t);o.up.set(0,-1,0),o.lookAt(new Ft(-1,0,0)),this.add(o);var a=new ra(90,1,e,t);a.up.set(0,0,1),a.lookAt(new Ft(0,1,0)),this.add(a);var s=new ra(90,1,e,t);s.up.set(0,0,-1),s.lookAt(new Ft(0,-1,0)),this.add(s);var c=new ra(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new Ft(0,0,1)),this.add(c);var l=new ra(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new Ft(0,0,-1)),this.add(l);var r={format:qe,magFilter:Ce,minFilter:Ce};this.renderTarget=new si(i,i,r),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var i=this.renderTarget,r=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,i.activeCubeFace=0,e.render(t,n,i),i.activeCubeFace=1,e.render(t,o,i),i.activeCubeFace=2,e.render(t,a,i),i.activeCubeFace=3,e.render(t,s,i),i.activeCubeFace=4,e.render(t,c,i),i.texture.generateMipmaps=r,i.activeCubeFace=5,e.render(t,l,i),e.setRenderTarget(null)},this.clear=function(e,t,i,r){for(var n=this.renderTarget,o=0;o<6;o++)n.activeCubeFace=o,e.setRenderTarget(n),e.clear(t,i,r);e.setRenderTarget(null)}}function Fl(){Wi.call(this),this.type="AudioListener",this.context=Bl.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function zl(e){Wi.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function jl(e){zl.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Hl(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Gl(e,t,i){this.binding=e,this.valueSize=i;var r,n=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":n=Array,r=this._select;break;default:r=this._lerp}this.buffer=new n(4*i),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(Nl.prototype,{load:function(e,i,t,r){var n=new Qs(this.manager);n.setResponseType("arraybuffer"),n.load(e,function(e){var t=e.slice(0);Bl.getContext().decodeAudioData(t,function(e){i(e)})},t,r)}}),Object.assign(Ul.prototype,{update:(El=new Ut,Sl=new Ut,function(e){if(vl!==this||yl!==e.focus||_l!==e.fov||xl!==e.aspect*this.aspect||bl!==e.near||wl!==e.far||Ml!==e.zoom||Tl!==this.eyeSep){vl=this,yl=e.focus,_l=e.fov,xl=e.aspect*this.aspect,bl=e.near,wl=e.far,Ml=e.zoom;var t,i,r=e.projectionMatrix.clone(),n=(Tl=this.eyeSep/2)*bl/yl,o=bl*Math.tan(Bt.DEG2RAD*_l*.5)/Ml;Sl.elements[12]=-Tl,El.elements[12]=Tl,t=-o*xl+n,i=o*xl+n,r.elements[0]=2*bl/(i-t),r.elements[8]=(i+t)/(i-t),this.cameraL.projectionMatrix.copy(r),t=-o*xl-n,i=o*xl-n,r.elements[0]=2*bl/(i-t),r.elements[8]=(i+t)/(i-t),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Sl),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(El)})}),(kl.prototype=Object.create(Wi.prototype)).constructor=kl,Fl.prototype=Object.assign(Object.create(Wi.prototype),{constructor:Fl,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:(Al=new Ft,Rl=new kt,Ll=new Ft,Pl=new Ft,function(e){Wi.prototype.updateMatrixWorld.call(this,e);var t=this.context.listener,i=this.up;this.matrixWorld.decompose(Al,Rl,Ll),Pl.set(0,0,-1).applyQuaternion(Rl),t.positionX?(t.positionX.setValueAtTime(Al.x,this.context.currentTime),t.positionY.setValueAtTime(Al.y,this.context.currentTime),t.positionZ.setValueAtTime(Al.z,this.context.currentTime),t.forwardX.setValueAtTime(Pl.x,this.context.currentTime),t.forwardY.setValueAtTime(Pl.y,this.context.currentTime),t.forwardZ.setValueAtTime(Pl.z,this.context.currentTime),t.upX.setValueAtTime(i.x,this.context.currentTime),t.upY.setValueAtTime(i.y,this.context.currentTime),t.upZ.setValueAtTime(i.z,this.context.currentTime)):(t.setPosition(Al.x,Al.y,Al.z),t.setOrientation(Pl.x,Pl.y,Pl.z,i.x,i.y,i.z))})}),zl.prototype=Object.assign(Object.create(Wi.prototype),{constructor:zl,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),jl.prototype=Object.assign(Object.create(zl.prototype),{constructor:jl,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this},updateMatrixWorld:(Cl=new Ft,Ol=new kt,Il=new Ft,Dl=new Ft,function(e){Wi.prototype.updateMatrixWorld.call(this,e);var t=this.panner;this.matrixWorld.decompose(Cl,Ol,Il),Dl.set(0,0,1).applyQuaternion(Ol),t.setPosition(Cl.x,Cl.y,Cl.z),t.setOrientation(Dl.x,Dl.y,Dl.z)})}),Object.assign(Hl.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),i=0;i<t.length;i++)e+=t[i];return e/t.length}}),Object.assign(Gl.prototype,{accumulate:function(e,t){var i=this.buffer,r=this.valueSize,n=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)i[n+a]=i[a];o=t}else{var s=t/(o+=t);this._mixBufferRegion(i,n,0,s,r)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,i=this.buffer,r=e*t+t,n=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,n<1){var a=3*t;this._mixBufferRegion(i,r,a,1-n,t)}for(var s=t,c=t+t;s!==c;++s)if(i[s]!==i[s+t]){o.setValue(i,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,i=this.valueSize,r=3*i;e.getValue(t,r);for(var n=i,o=r;n!==o;++n)t[n]=t[r+n%i];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,i,r,n){if(.5<=r)for(var o=0;o!==n;++o)e[t+o]=e[i+o]},_slerp:function(e,t,i,r){kt.slerpFlat(e,t,e,t,e,i,r)},_lerp:function(e,t,i,r,n){for(var o=1-r,a=0;a!==n;++a){var s=t+a;e[s]=e[s]*o+e[i+a]*r}}});var Vl,Wl,Xl,ql,Yl,Jl,Zl,Kl,Ql,$l,eh,th,ih,rh,nh,oh,ah,sh,ch,lh,hh,uh,ph,dh,fh,mh,gh,vh,yh,_h,xh,bh,wh,Mh="\\[\\]\\.:\\/";function Th(e,t,i){var r=i||Eh.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function Eh(e,t,i){this.path=t,this.parsedPath=i||Eh.parseTrackName(t),this.node=Eh.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Sh(){this.uuid=Bt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,i=arguments.length;t!==i;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function Ah(e,t,i){this._mixer=e,this._clip=t,this._localRoot=i||null;for(var r=t.tracks,n=r.length,o=new Array(n),a={endingStart:2400,endingEnd:2400},s=0;s!==n;++s){var c=r[s].createInterpolant(null);(o[s]=c).settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(n),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Rh(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Lh(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Ph(){Ar.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Ch(e,t,i,r){this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===r}function Oh(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Ih(e,t,i){Oh.call(this,e,t),this.meshPerAttribute=i||1}function Dh(e,t,i){nr.call(this,e,t),this.meshPerAttribute=i||1}function Bh(e,t,i,r){this.ray=new sn(e,t),this.near=i||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Nh(e,t){return e.distance-t.distance}function Uh(e,t,i,r){if(!1!==e.visible&&(e.raycast(t,i),!0===r))for(var n=e.children,o=0,a=n.length;o<a;o++)Uh(n[o],t,i,!0)}function kh(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Fh(e,t,i){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==i?i:0,this}function zh(e,t,i){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==i?i:0,this}function jh(e,t){this.min=void 0!==e?e:new Nt(1/0,1/0),this.max=void 0!==t?t:new Nt(-1/0,-1/0)}function Hh(e){Wi.call(this),this.material=e,this.render=function(){}}function Gh(e,t,i,r){this.object=e,this.size=void 0!==t?t:1;var n=void 0!==i?i:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var c=new Ar,l=new pr(2*a*3,3);c.addAttribute("position",l),_a.call(this,c,new va({color:n,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Vh(e,t){Wi.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var i=new Ar,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],n=0,o=1;n<32;n++,o++){var a=n/32*Math.PI*2,s=o/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}i.addAttribute("position",new pr(r,3));var c=new va({fog:!1});this.cone=new _a(i,c),this.add(this.cone),this.update()}function Wh(e){for(var t=function e(t){var i=[];t&&t.isBone&&i.push(t);for(var r=0;r<t.children.length;r++)i.push.apply(i,e(t.children[r]));return i}(e),i=new Ar,r=[],n=[],o=new vi(0,0,1),a=new vi(0,1,0),s=0;s<t.length;s++){var c=t[s];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),n.push(o.r,o.g,o.b),n.push(a.r,a.g,a.b))}i.addAttribute("position",new pr(r,3)),i.addAttribute("color",new pr(n,3));var l=new va({vertexColors:T,depthTest:!1,depthWrite:!1,transparent:!0});_a.call(this,i,l),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function Xh(e,t,i){this.light=e,this.light.updateMatrixWorld(),this.color=i;var r=new ws(t,4,2),n=new on({wireframe:!0,fog:!1});hn.call(this,r,n),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function qh(e,t){Wi.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var i=new va({fog:!1}),r=new Ar;r.addAttribute("position",new nr(new Float32Array(15),3)),this.line=new ya(r,i),this.add(this.line),this.update()}function Yh(e,t,i){Wi.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;var r=new Da(t);r.rotateY(.5*Math.PI),this.material=new on({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=T);var n=r.getAttribute("position"),o=new Float32Array(3*n.count);r.addAttribute("color",new nr(o,3)),this.add(new hn(r,this.material)),this.update()}function Jh(e,t,i,r){e=e||10,t=t||10,i=new vi(void 0!==i?i:4473924),r=new vi(void 0!==r?r:8947848);for(var n=t/2,o=e/t,a=e/2,s=[],c=[],l=0,h=0,u=-a;l<=t;l++,u+=o){s.push(-a,0,u,a,0,u),s.push(u,0,-a,u,0,a);var p=l===n?i:r;p.toArray(c,h),h+=3,p.toArray(c,h),h+=3,p.toArray(c,h),h+=3,p.toArray(c,h),h+=3}var d=new Ar;d.addAttribute("position",new pr(s,3)),d.addAttribute("color",new pr(c,3));var f=new va({vertexColors:T});_a.call(this,d,f)}function Zh(e,t,i,r,n,o){e=e||10,t=t||16,i=i||8,r=r||64,n=new vi(void 0!==n?n:4473924),o=new vi(void 0!==o?o:8947848);var a,s,c,l,h,u,p,d=[],f=[];for(l=0;l<=t;l++)c=l/t*(2*Math.PI),a=Math.sin(c)*e,s=Math.cos(c)*e,d.push(0,0,0),d.push(a,0,s),p=1&l?n:o,f.push(p.r,p.g,p.b),f.push(p.r,p.g,p.b);for(l=0;l<=i;l++)for(p=1&l?n:o,u=e-e/i*l,h=0;h<r;h++)c=h/r*(2*Math.PI),a=Math.sin(c)*u,s=Math.cos(c)*u,d.push(a,0,s),f.push(p.r,p.g,p.b),c=(h+1)/r*(2*Math.PI),a=Math.sin(c)*u,s=Math.cos(c)*u,d.push(a,0,s),f.push(p.r,p.g,p.b);var m=new Ar;m.addAttribute("position",new pr(d,3)),m.addAttribute("color",new pr(f,3));var g=new va({vertexColors:T});_a.call(this,m,g)}function Kh(e,t,i,r){this.object=e,this.size=void 0!==t?t:1;var n=void 0!==i?i:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var c=new Ar,l=new pr(2*a*3,3);c.addAttribute("position",l),_a.call(this,c,new va({color:n,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Qh(e,t,i){Wi.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,void 0===t&&(t=1);var r=new Ar;r.addAttribute("position",new pr([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var n=new va({fog:!1});this.lightPlane=new ya(r,n),this.add(this.lightPlane),(r=new Ar).addAttribute("position",new pr([0,0,0,0,0,1],3)),this.targetLine=new ya(r,n),this.add(this.targetLine),this.update()}function $h(e){var t=new Ar,i=new va({color:16777215,vertexColors:1}),r=[],n=[],o={},a=new vi(16755200),s=new vi(16711680),c=new vi(43775),l=new vi(16777215),h=new vi(3355443);function u(e,t,i){p(e,i),p(t,i)}function p(e,t){r.push(0,0,0),n.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}u("n1","n2",a),u("n2","n4",a),u("n4","n3",a),u("n3","n1",a),u("f1","f2",a),u("f2","f4",a),u("f4","f3",a),u("f3","f1",a),u("n1","f1",a),u("n2","f2",a),u("n3","f3",a),u("n4","f4",a),u("p","n1",s),u("p","n2",s),u("p","n3",s),u("p","n4",s),u("u1","u2",c),u("u2","u3",c),u("u3","u1",c),u("c","t",l),u("p","c",h),u("cn1","cn2",h),u("cn3","cn4",h),u("cf1","cf2",h),u("cf3","cf4",h),t.addAttribute("position",new pr(r,3)),t.addAttribute("color",new pr(n,3)),_a.call(this,t,i),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function eu(e,t){this.object=e,void 0===t&&(t=16776960);var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),n=new Ar;n.setIndex(new nr(i,1)),n.addAttribute("position",new nr(r,3)),_a.call(this,n,new va({color:t})),this.matrixAutoUpdate=!1,this.update()}function tu(e,t){this.type="Box3Helper",this.box=e;var i=void 0!==t?t:16776960,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Ar;n.setIndex(new nr(r,1)),n.addAttribute("position",new pr([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),_a.call(this,n,new va({color:i})),this.geometry.computeBoundingSphere()}function iu(e,t,i){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var r=void 0!==i?i:16776960,n=new Ar;n.addAttribute("position",new pr([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),n.computeBoundingSphere(),ya.call(this,n,new va({color:r}));var o=new Ar;o.addAttribute("position",new pr([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new hn(o,new on({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}function ru(e,t,i,r,n,o){Wi.call(this),void 0===r&&(r=16776960),void 0===i&&(i=1),void 0===n&&(n=.2*i),void 0===o&&(o=.2*n),void 0===_h&&((_h=new Ar).addAttribute("position",new pr([0,0,0,0,1,0],3)),(xh=new Os(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new ya(_h,new va({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new hn(xh,new on({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,n,o)}function nu(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=new Ar;i.addAttribute("position",new pr(t,3)),i.addAttribute("color",new pr([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new va({vertexColors:T});_a.call(this,i,r)}Object.assign(Th.prototype,{getValue:function(e,t){this.bind();var i=this._targetGroup.nCachedObjects_,r=this._bindings[i];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var i=this._bindings,r=this._targetGroup.nCachedObjects_,n=i.length;r!==n;++r)i[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}),Object.assign(Eh,{Composite:Th,create:function(e,t,i){return e&&e.isAnimationObjectGroup?new Eh.Composite(e,t,i):new Eh(e,t,i)},sanitizeNodeName:(Ql=new RegExp("["+Mh+"]","g"),function(e){return e.replace(/\s/g,"_").replace(Ql,"")}),parseTrackName:(Vl="[^"+Mh+"]",Wl="[^"+Mh.replace("\\.","")+"]",Xl=/((?:WC+[\/:])*)/.source.replace("WC",Vl),ql=/(WCOD+)?/.source.replace("WCOD",Wl),Yl=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Vl),Jl=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Vl),Zl=new RegExp("^"+Xl+ql+Yl+Jl+"$"),Kl=["material","materials","bones"],function(e){var t=Zl.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var n=i.nodeName.substring(r+1);-1!==Kl.indexOf(n)&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=n)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}),findNode:function(e,n){if(!n||""===n||"root"===n||"."===n||-1===n||n===e.name||n===e.uuid)return e;if(e.skeleton){var t=e.skeleton.getBoneByName(n);if(void 0!==t)return t}if(e.children){var o=function(e){for(var t=0;t<e.length;t++){var i=e[t];if(i.name===n||i.uuid===n)return i;var r=o(i.children);if(r)return r}return null},i=o(e.children);if(i)return i}return null}}),Object.assign(Eh.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var i=this.resolvedProperty,r=0,n=i.length;r!==n;++r)e[t++]=i[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var i=this.resolvedProperty,r=0,n=i.length;r!==n;++r)i[r]=e[t++]},function(e,t){for(var i=this.resolvedProperty,r=0,n=i.length;r!==n;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var i=this.resolvedProperty,r=0,n=i.length;r!==n;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,i=t.objectName,r=t.propertyName,n=t.propertyIndex;if(e||(e=Eh.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(i){var o=t.objectIndex;switch(i){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[i]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[r];if(void 0!==s){var c=this.Versioning.None;void 0!==e.needsUpdate?(c=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var l=this.BindingType.Direct;if(void 0!==n){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===n){n=a;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===n){n=a;break}}}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=n}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}else{var h=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+r+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Eh.prototype,{_getValue_unbound:Eh.prototype.getValue,_setValue_unbound:Eh.prototype.setValue}),Object.assign(Sh.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,i=this.nCachedObjects_,r=this._indicesByUUID,n=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,c=void 0,l=0,h=arguments.length;l!==h;++l){var u=arguments[l],p=u.uuid,d=r[p];if(void 0===d){d=t++,r[p]=d,e.push(u);for(var f=0,m=s;f!==m;++f)a[f].push(new Eh(u,n[f],o[f]))}else if(d<i){c=e[d];var g=--i,v=e[g];e[r[v.uuid]=d]=v,e[r[p]=g]=u;for(f=0,m=s;f!==m;++f){var y=a[f],_=y[g],x=y[d];y[d]=_,void 0===x&&(x=new Eh(u,n[f],o[f])),y[g]=x}}else e[d]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=i},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,n=r.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],c=s.uuid,l=i[c];if(void 0!==l&&t<=l){var h=t++,u=e[h];e[i[u.uuid]=l]=u,e[i[c]=h]=s;for(var p=0,d=n;p!==d;++p){var f=r[p],m=f[h],g=f[l];f[l]=m,f[h]=g}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,i=this.nCachedObjects_,r=this._indicesByUUID,n=this._bindings,o=n.length,a=0,s=arguments.length;a!==s;++a){var c=arguments[a].uuid,l=r[c];if(void 0!==l)if(delete r[c],l<i){var h=--i,u=e[h],p=e[v=--t];e[r[u.uuid]=l]=u,e[r[p.uuid]=h]=p,e.pop();for(var d=0,f=o;d!==f;++d){var m=(y=n[d])[h],g=y[v];y[l]=m,y[h]=g,y.pop()}}else{var v;e[r[(p=e[v=--t]).uuid]=l]=p,e.pop();for(d=0,f=o;d!==f;++d){var y;(y=n[d])[l]=y[v],y.pop()}}}this.nCachedObjects_=i},subscribe_:function(e,t){var i=this._bindingsIndicesByPath,r=i[e],n=this._bindings;if(void 0!==r)return n[r];var o=this._paths,a=this._parsedPaths,s=this._objects,c=s.length,l=this.nCachedObjects_,h=new Array(c);r=n.length,i[e]=r,o.push(e),a.push(t),n.push(h);for(var u=l,p=s.length;u!==p;++u){var d=s[u];h[u]=new Eh(d,e,t)}return h},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,i=t[e];if(void 0!==i){var r=this._paths,n=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];o[t[e[a]]=i]=s,o.pop(),n[i]=n[a],n.pop(),r[i]=r[a],r.pop()}}}),Object.assign(Ah.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){var r=this._clip.duration,n=e._clip.duration,o=n/r,a=r/n;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,i){return e.crossFadeFrom(this,t,i)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,i){var r=this._mixer,n=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,c=o.sampleValues;return s[0]=n,s[1]=n+i,c[0]=e/a,c[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,i,r){if(this.enabled){var n=this._startTime;if(null!==n){var o=(e-n)*i;if(o<0||0===i)return;this._startTime=null,t=i*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(0<s)for(var c=this._interpolants,l=this._propertyBindings,h=0,u=c.length;h!==u;++h)c[h].evaluate(a),l[h].accumulate(r,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var i=this._weightInterpolant;if(null!==i){var r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var i=this._timeScaleInterpolant;if(null!==i)t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var i=this._clip.duration,r=this.loop,n=this._loopCount;if(2200===r){-1===n&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i<=t)t=i;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var o=2202===r;if(-1===n&&(0<=e?(n=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),i<=t||t<0){var a=Math.floor(t/i);t-=i*a,n+=Math.abs(a);var s=this.repetitions-n;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=0<e?i:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<e?1:-1});else{if(1===s){var c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(o&&1==(1&n))return i-(this.time=t)}return this.time=t},_setEndings:function(e,t,i){var r=this._interpolantSettings;i?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,r.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(e,t,i){var r=this._mixer,n=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=n,s[0]=t,a[1]=n+e,s[1]=i,this}}),Rh.prototype=Object.assign(Object.create(t.prototype),{constructor:Rh,_bindAction:function(e,t){var i=e._localRoot||this._root,r=e._clip.tracks,n=r.length,o=e._propertyBindings,a=e._interpolants,s=i.uuid,c=this._bindingsByRootAndName,l=c[s];void 0===l&&(l={},c[s]=l);for(var h=0;h!==n;++h){var u=r[h],p=u.name,d=l[p];if(void 0!==d)o[h]=d;else{if(void 0!==(d=o[h])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,p));continue}var f=t&&t._propertyBindings[h].binding.parsedPath;++(d=new Gl(Eh.create(i,p,f),u.ValueTypeName,u.getValueSize())).referenceCount,this._addInactiveBinding(d,s,p),o[h]=d}a[h].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,i=e._clip.uuid,r=this._actionsByClip[i];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,i,t)}for(var n=e._propertyBindings,o=0,a=n.length;o!==a;++o){var s=n[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,i=0,r=t.length;i!==r;++i){var n=t[i];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,i){var r=this._actions,n=this._actionsByClip,o=n[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,n[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e},_removeInactiveAction:function(e){var t=this._actions,i=t[t.length-1],r=e._cacheIndex;t[i._cacheIndex=r]=i,t.pop(),e._cacheIndex=null;var n=e._clip.uuid,o=this._actionsByClip,a=o[n],s=a.knownActions,c=s[s.length-1],l=e._byClipCacheIndex;s[c._byClipCacheIndex=l]=c,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[n],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,i=0,r=t.length;i!==r;++i){var n=t[i];0==--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(e){var t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,n=t[r];t[e._cacheIndex=r]=e,t[n._cacheIndex=i]=n},_takeBackAction:function(e){var t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,n=t[r];t[e._cacheIndex=r]=e,t[n._cacheIndex=i]=n},_addInactiveBinding:function(e,t,i){var r=this._bindingsByRootAndName,n=r[t],o=this._bindings;void 0===n&&(n={},r[t]=n),(n[i]=e)._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,i=e.binding,r=i.rootNode.uuid,n=i.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],c=e._cacheIndex;t[s._cacheIndex=c]=s,t.pop(),delete a[n];e:{for(var l in a)break e;delete o[r]}},_lendBinding:function(e){var t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,n=t[r];t[e._cacheIndex=r]=e,t[n._cacheIndex=i]=n},_takeBackBinding:function(e){var t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,n=t[r];t[e._cacheIndex=r]=e,t[n._cacheIndex=i]=n},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,i=e[t];return void 0===i&&(e[(i=new Wc(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t]=i),i},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,n=t[r];t[e.__cacheIndex=r]=e,t[n.__cacheIndex=i]=n},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var i=t||this._root,r=i.uuid,n="string"==typeof e?Zc.findByName(i,e):e,o=null!==n?n.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var c=a.actionByRoot[r];if(void 0!==c)return c;s=a.knownActions[0],null===n&&(n=s._clip)}if(null===n)return null;var l=new Ah(this,n,t);return this._bindAction(l,s),this._addInactiveAction(l,o,r),l},existingAction:function(e,t){var i=t||this._root,r=i.uuid,n="string"==typeof e?Zc.findByName(i,e):e,o=n?n.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,i=this._bindings,r=this._nActiveBindings;this._nActiveActions=0;for(var n=this._nActiveBindings=0;n!==t;++n)e[n].reset();for(n=0;n!==r;++n)i[n].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,i=this._nActiveActions,r=this.time+=e,n=Math.sign(e),o=this._accuIndex^=1,a=0;a!==i;++a){t[a]._update(r,e,n,o)}var s=this._bindings,c=this._nActiveBindings;for(a=0;a!==c;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,i=e.uuid,r=this._actionsByClip,n=r[i];if(void 0!==n){for(var o=n.knownActions,a=0,s=o.length;a!==s;++a){var c=o[a];this._deactivateAction(c);var l=c._cacheIndex,h=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,t[h._cacheIndex=l]=h,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}},uncacheRoot:function(e){var t=e.uuid,i=this._actionsByClip;for(var r in i){var n=i[r].actionByRoot[t];void 0!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}),Lh.prototype.clone=function(){return new Lh(void 0===this.value.clone?this.value:this.value.clone())},Ph.prototype=Object.assign(Object.create(Ar.prototype),{constructor:Ph,isInstancedBufferGeometry:!0,copy:function(e){return Ar.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.defineProperties(Ch.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Ch.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this},setXYZ:function(e,t,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this},setXYZW:function(e,t,i,r,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=n,this}}),Object.defineProperty(Oh.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Oh.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,i){e*=this.stride,i*=t.stride;for(var r=0,n=this.stride;r<n;r++)this.array[e+r]=t.array[i+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Ih.prototype=Object.assign(Object.create(Oh.prototype),{constructor:Ih,isInstancedInterleavedBuffer:!0,copy:function(e){return Oh.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Dh.prototype=Object.assign(Object.create(nr.prototype),{constructor:Dh,isInstancedBufferAttribute:!0,copy:function(e){return nr.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Bh.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,i){var r=i||[];return Uh(e,this,r,t),r.sort(Nh),r},intersectObjects:function(e,t,i){var r=i||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var n=0,o=e.length;n<o;n++)Uh(e[n],this,r,t);return r.sort(Nh),r}}),Object.assign(kh.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(Fh.prototype,{set:function(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(Bt.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(zh.prototype,{set:function(e,t,i){return this.radius=e,this.theta=t,this.y=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}}),Object.assign(jh.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:(eh=new Nt,function(e,t){var i=eh.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Nt),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Nt),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Nt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Nt),t.copy(e).clamp(this.min,this.max)},distanceToPoint:($l=new Nt,function(e){return $l.copy(e).clamp(this.min,this.max).sub(e).length()}),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),((Hh.prototype=Object.create(Wi.prototype)).constructor=Hh).prototype.isImmediateRenderObject=!0,((Gh.prototype=Object.create(_a.prototype)).constructor=Gh).prototype.update=(th=new Ft,ih=new Ft,rh=new zt,function(){var e=["a","b","c"];this.object.updateMatrixWorld(!0),rh.getNormalMatrix(this.object.matrixWorld);var t=this.object.matrixWorld,i=this.geometry.attributes.position,r=this.object.geometry;if(r&&r.isGeometry)for(var n=r.vertices,o=r.faces,a=0,s=0,c=o.length;s<c;s++)for(var l=o[s],h=0,u=l.vertexNormals.length;h<u;h++){var p=n[l[e[h]]],d=l.vertexNormals[h];th.copy(p).applyMatrix4(t),ih.copy(d).applyMatrix3(rh).normalize().multiplyScalar(this.size).add(th),i.setXYZ(a,th.x,th.y,th.z),a+=1,i.setXYZ(a,ih.x,ih.y,ih.z),a+=1}else if(r&&r.isBufferGeometry){var f=r.attributes.position,m=r.attributes.normal;for(h=a=0,u=f.count;h<u;h++)th.set(f.getX(h),f.getY(h),f.getZ(h)).applyMatrix4(t),ih.set(m.getX(h),m.getY(h),m.getZ(h)),ih.applyMatrix3(rh).normalize().multiplyScalar(this.size).add(th),i.setXYZ(a,th.x,th.y,th.z),a+=1,i.setXYZ(a,ih.x,ih.y,ih.z),a+=1}i.needsUpdate=!0}),((Vh.prototype=Object.create(Wi.prototype)).constructor=Vh).prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Vh.prototype.update=(nh=new Ft,oh=new Ft,function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),nh.setFromMatrixPosition(this.light.matrixWorld),oh.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(oh.sub(nh)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}),((Wh.prototype=Object.create(_a.prototype)).constructor=Wh).prototype.updateMatrixWorld=(ah=new Ft,sh=new Ut,ch=new Ut,function(e){var t=this.bones,i=this.geometry,r=i.getAttribute("position");ch.getInverse(this.root.matrixWorld);for(var n=0,o=0;n<t.length;n++){var a=t[n];a.parent&&a.parent.isBone&&(sh.multiplyMatrices(ch,a.matrixWorld),ah.setFromMatrixPosition(sh),r.setXYZ(o,ah.x,ah.y,ah.z),sh.multiplyMatrices(ch,a.parent.matrixWorld),ah.setFromMatrixPosition(sh),r.setXYZ(o+1,ah.x,ah.y,ah.z),o+=2)}i.getAttribute("position").needsUpdate=!0,Wi.prototype.updateMatrixWorld.call(this,e)}),((Xh.prototype=Object.create(hn.prototype)).constructor=Xh).prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Xh.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},((qh.prototype=Object.create(Wi.prototype)).constructor=qh).prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},qh.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,i=this.line.geometry.attributes.position,r=i.array;r[0]=e,r[1]=-t,r[2]=0,r[3]=e,r[4]=t,r[5]=0,r[6]=-e,r[7]=t,r[8]=0,r[9]=-e,r[10]=-t,r[11]=0,r[12]=e,r[13]=-t,r[14]=0,i.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},((Yh.prototype=Object.create(Wi.prototype)).constructor=Yh).prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Yh.prototype.update=(lh=new Ft,hh=new vi,uh=new vi,function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");hh.copy(this.light.color),uh.copy(this.light.groundColor);for(var i=0,r=t.count;i<r;i++){var n=i<r/2?hh:uh;t.setXYZ(i,n.r,n.g,n.b)}t.needsUpdate=!0}e.lookAt(lh.setFromMatrixPosition(this.light.matrixWorld).negate())}),(Jh.prototype=Object.create(_a.prototype)).constructor=Jh,(Zh.prototype=Object.create(_a.prototype)).constructor=Zh,((Kh.prototype=Object.create(_a.prototype)).constructor=Kh).prototype.update=(ph=new Ft,dh=new Ft,fh=new zt,function(){this.object.updateMatrixWorld(!0),fh.getNormalMatrix(this.object.matrixWorld);for(var e=this.object.matrixWorld,t=this.geometry.attributes.position,i=this.object.geometry,r=i.vertices,n=i.faces,o=0,a=0,s=n.length;a<s;a++){var c=n[a],l=c.normal;ph.copy(r[c.a]).add(r[c.b]).add(r[c.c]).divideScalar(3).applyMatrix4(e),dh.copy(l).applyMatrix3(fh).normalize().multiplyScalar(this.size).add(ph),t.setXYZ(o,ph.x,ph.y,ph.z),o+=1,t.setXYZ(o,dh.x,dh.y,dh.z),o+=1}t.needsUpdate=!0}),((Qh.prototype=Object.create(Wi.prototype)).constructor=Qh).prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Qh.prototype.update=(mh=new Ft,gh=new Ft,vh=new Ft,function(){mh.setFromMatrixPosition(this.light.matrixWorld),gh.setFromMatrixPosition(this.light.target.matrixWorld),vh.subVectors(gh,mh),this.lightPlane.lookAt(vh),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(vh),this.targetLine.scale.z=vh.length()}),(($h.prototype=Object.create(_a.prototype)).constructor=$h).prototype.update=function(){var c,l,h=new Ft,u=new Xi;function e(e,t,i,r){h.set(t,i,r).unproject(u);var n=l[e];if(void 0!==n)for(var o=c.getAttribute("position"),a=0,s=n.length;a<s;a++)o.setXYZ(n[a],h.x,h.y,h.z)}return function(){c=this.geometry,l=this.pointMap;u.projectionMatrix.copy(this.camera.projectionMatrix),e("c",0,0,-1),e("t",0,0,1),e("n1",-1,-1,-1),e("n2",1,-1,-1),e("n3",-1,1,-1),e("n4",1,1,-1),e("f1",-1,-1,1),e("f2",1,-1,1),e("f3",-1,1,1),e("f4",1,1,1),e("u1",.7,1.1,-1),e("u2",-.7,1.1,-1),e("u3",0,2,-1),e("cf1",-1,0,1),e("cf2",1,0,1),e("cf3",0,-1,1),e("cf4",0,1,1),e("cn1",-1,0,-1),e("cn2",1,0,-1),e("cn3",0,-1,-1),e("cn4",0,1,-1),c.getAttribute("position").needsUpdate=!0}}(),((eu.prototype=Object.create(_a.prototype)).constructor=eu).prototype.update=(yh=new li,function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&yh.setFromObject(this.object),!yh.isEmpty()){var t=yh.min,i=yh.max,r=this.geometry.attributes.position,n=r.array;n[0]=i.x,n[1]=i.y,n[2]=i.z,n[3]=t.x,n[4]=i.y,n[5]=i.z,n[6]=t.x,n[7]=t.y,n[8]=i.z,n[9]=i.x,n[10]=t.y,n[11]=i.z,n[12]=i.x,n[13]=i.y,n[14]=t.z,n[15]=t.x,n[16]=i.y,n[17]=t.z,n[18]=t.x,n[19]=t.y,n[20]=t.z,n[21]=i.x,n[22]=t.y,n[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}),eu.prototype.setFromObject=function(e){return this.object=e,this.update(),this},((tu.prototype=Object.create(_a.prototype)).constructor=tu).prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),Wi.prototype.updateMatrixWorld.call(this,e))},((iu.prototype=Object.create(ya.prototype)).constructor=iu).prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?Me:B,this.lookAt(this.plane.normal),Wi.prototype.updateMatrixWorld.call(this,e)},((ru.prototype=Object.create(Wi.prototype)).constructor=ru).prototype.setDirection=(wh=new Ft,function(e){.99999<e.y?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(wh.set(e.z,0,-e.x).normalize(),bh=Math.acos(e.y),this.quaternion.setFromAxisAngle(wh,bh))}),ru.prototype.setLength=function(e,t,i){void 0===t&&(t=.2*e),void 0===i&&(i=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()},ru.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},(nu.prototype=Object.create(_a.prototype)).constructor=nu;var ou;function au(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),pc.call(this,e),this.type="catmullrom",this.closed=!0}function su(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),pc.call(this,e),this.type="catmullrom"}function cu(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),pc.call(this,e),this.type="catmullrom"}nc.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(nc.prototype),(e.prototype.constructor=e).prototype.getPoint=t,e},Object.assign(Tc.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new rr,i=0,r=e.length;i<r;i++){var n=e[i];t.vertices.push(new Ft(n.x,n.y,n.z||0))}return t}}),Object.assign(Ec.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),au.prototype=Object.create(pc.prototype),su.prototype=Object.create(pc.prototype),cu.prototype=Object.create(pc.prototype),Object.assign(cu.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Jh.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Wh.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(nl.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),ol.extractUrlBase(e)}}),Object.assign(jh.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(li.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),cn.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Bt,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Bt.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Bt.ceilPowerOfTwo(e)}}),Object.assign(zt.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Ut.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return void 0===ou&&(ou=new Ft),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),ou.setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,i,r,n,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,i,n,o)}}),ui.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},kt.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(sn.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(ln.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(ln,{barycoordFromPoint:function(e,t,i,r,n){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ln.getBarycoord(e,t,i,r,n)},normal:function(e,t,i,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ln.getNormal(e,t,i,r)}}),Object.assign(Sc.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ms(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new As(this,e)}}),Object.assign(Nt.prototype,{fromAttribute:function(e,t,i){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Ft.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,i){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(oi.prototype,{fromAttribute:function(e,t,i){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(rr.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(Wi.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(Wi.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(da.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(fa.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(nc.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),ra.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Ac.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(nr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(Ar.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Ar.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(gs.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Lh.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(nn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new vi}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}}}),Object.defineProperties(Hs.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(an.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(sa.prototype,{animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(sa.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Zo.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(ai.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(oa.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),zl.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new Nl).load(e,function(e){t.setBuffer(e)}),this},Hl.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},kl.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var lu={merge:function(e,t,i){var r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,i)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},hu={crossOrigin:void 0,loadTexture:function(e,t,i,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var n=new rc;n.setCrossOrigin(this.crossOrigin);var o=n.load(e,i,void 0,r);return t&&(o.mapping=t),o},loadTextureCube:function(e,t,i,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var n=new ic;n.setCrossOrigin(this.crossOrigin);var o=n.load(e,i,void 0,r);return t&&(o.mapping=t),o},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};var uu={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};e.WebGLRenderTargetCube=si,e.WebGLRenderTarget=ai,e.WebGLRenderer=sa,e.ShaderLib=bi,e.UniformsLib=xi,e.UniformsUtils=mi,e.ShaderChunk=fi,e.FogExp2=ca,e.Fog=la,e.Scene=ha,e.Sprite=pa,e.LOD=da,e.SkinnedMesh=ga,e.Skeleton=fa,e.Bone=ma,e.Mesh=hn,e.LineSegments=_a,e.LineLoop=xa,e.Line=ya,e.Points=wa,e.Group=ia,e.VideoTexture=Ma,e.DataTexture=ci,e.CompressedTexture=Ta,e.CubeTexture=wn,e.CanvasTexture=Ko,e.DepthTexture=Ea,e.Texture=ni,e.CompressedTextureLoader=$s,e.DataTextureLoader=ec,e.CubeTextureLoader=ic,e.TextureLoader=rc,e.ObjectLoader=sl,e.MaterialLoader=Kc,e.BufferGeometryLoader=Qc,e.DefaultLoadingManager=Zs,e.LoadingManager=Js,e.JSONLoader=al,e.ImageLoader=tc,e.ImageBitmapLoader=pl,e.FontLoader=gl,e.FileLoader=Qs,e.Loader=nl,e.LoaderUtils=ol,e.Cache=Ys,e.AudioLoader=Nl,e.SpotLightShadow=Pc,e.SpotLight=Cc,e.PointLight=Oc,e.RectAreaLight=Nc,e.HemisphereLight=Rc,e.DirectionalLightShadow=Ic,e.DirectionalLight=Dc,e.AmbientLight=Bc,e.LightShadow=Lc,e.Light=Ac,e.StereoCamera=Ul,e.PerspectiveCamera=ra,e.OrthographicCamera=qi,e.CubeCamera=kl,e.ArrayCamera=na,e.Camera=Xi,e.AudioListener=Fl,e.PositionalAudio=jl,e.AudioContext=Bl,e.AudioAnalyser=Hl,e.Audio=zl,e.VectorKeyframeTrack=Jc,e.StringKeyframeTrack=Uc,e.QuaternionKeyframeTrack=jc,e.NumberKeyframeTrack=Gc,e.ColorKeyframeTrack=Hc,e.BooleanKeyframeTrack=kc,e.PropertyMixer=Gl,e.PropertyBinding=Eh,e.KeyframeTrack=Yc,e.AnimationUtils=qc,e.AnimationObjectGroup=Sh,e.AnimationMixer=Rh,e.AnimationClip=Zc,e.Uniform=Lh,e.InstancedBufferGeometry=Ph,e.BufferGeometry=Ar,e.Geometry=rr,e.InterleavedBufferAttribute=Ch,e.InstancedInterleavedBuffer=Ih,e.InterleavedBuffer=Oh,e.InstancedBufferAttribute=Dh,e.Face3=Yi,e.Object3D=Wi,e.Raycaster=Bh,e.Layers=Ei,e.EventDispatcher=t,e.Clock=kh,e.QuaternionLinearInterpolant=zc,e.LinearInterpolant=Wc,e.DiscreteInterpolant=Xc,e.CubicInterpolant=Vc,e.Interpolant=Fc,e.Triangle=ln,e.Math=Bt,e.Spherical=Fh,e.Cylindrical=zh,e.Plane=ui,e.Frustum=pi,e.Sphere=hi,e.Ray=sn,e.Matrix4=Ut,e.Matrix3=zt,e.Box3=li,e.Box2=jh,e.Line3=cn,e.Euler=Ti,e.Vector4=oi,e.Vector3=Ft,e.Vector2=Nt,e.Quaternion=kt,e.Color=vi,e.ImmediateRenderObject=Hh,e.VertexNormalsHelper=Gh,e.SpotLightHelper=Vh,e.SkeletonHelper=Wh,e.PointLightHelper=Xh,e.RectAreaLightHelper=qh,e.HemisphereLightHelper=Yh,e.GridHelper=Jh,e.PolarGridHelper=Zh,e.FaceNormalsHelper=Kh,e.DirectionalLightHelper=Qh,e.CameraHelper=$h,e.BoxHelper=eu,e.Box3Helper=tu,e.PlaneHelper=iu,e.ArrowHelper=ru,e.AxesHelper=nu,e.Shape=Sc,e.Path=Ec,e.ShapePath=dl,e.Font=fl,e.CurvePath=Tc,e.Curve=nc,e.ShapeUtils=ps,e.WebGLUtils=ta,e.WireframeGeometry=Sa,e.ParametricGeometry=Aa,e.ParametricBufferGeometry=Ra,e.TetrahedronGeometry=Ca,e.TetrahedronBufferGeometry=Oa,e.OctahedronGeometry=Ia,e.OctahedronBufferGeometry=Da,e.IcosahedronGeometry=Ba,e.IcosahedronBufferGeometry=Na,e.DodecahedronGeometry=Ua,e.DodecahedronBufferGeometry=ka,e.PolyhedronGeometry=La,e.PolyhedronBufferGeometry=Pa,e.TubeGeometry=Fa,e.TubeBufferGeometry=za,e.TorusKnotGeometry=ja,e.TorusKnotBufferGeometry=Ha,e.TorusGeometry=Ga,e.TorusBufferGeometry=Va,e.TextGeometry=_s,e.TextBufferGeometry=xs,e.SphereGeometry=bs,e.SphereBufferGeometry=ws,e.RingGeometry=Ms,e.RingBufferGeometry=Ts,e.PlaneGeometry=Pr,e.PlaneBufferGeometry=Cr,e.LatheGeometry=Es,e.LatheBufferGeometry=Ss,e.ShapeGeometry=As,e.ShapeBufferGeometry=Rs,e.ExtrudeGeometry=ms,e.ExtrudeBufferGeometry=gs,e.EdgesGeometry=Ps,e.ConeGeometry=Is,e.ConeBufferGeometry=Ds,e.CylinderGeometry=Cs,e.CylinderBufferGeometry=Os,e.CircleGeometry=Bs,e.CircleBufferGeometry=Ns,e.BoxGeometry=Rr,e.BoxBufferGeometry=Lr,e.ShadowMaterial=ks,e.SpriteMaterial=ua,e.RawShaderMaterial=Fs,e.ShaderMaterial=an,e.PointsMaterial=ba,e.MeshPhysicalMaterial=js,e.MeshStandardMaterial=zs,e.MeshPhongMaterial=Hs,e.MeshToonMaterial=Gs,e.MeshNormalMaterial=Vs,e.MeshLambertMaterial=Ws,e.MeshDepthMaterial=Yo,e.MeshDistanceMaterial=Jo,e.MeshBasicMaterial=on,e.LineDashedMaterial=Xs,e.LineBasicMaterial=va,e.Material=nn,e.Float64BufferAttribute=dr,e.Float32BufferAttribute=pr,e.Uint32BufferAttribute=ur,e.Int32BufferAttribute=hr,e.Uint16BufferAttribute=lr,e.Int16BufferAttribute=cr,e.Uint8ClampedBufferAttribute=sr,e.Uint8BufferAttribute=ar,e.Int8BufferAttribute=or,e.BufferAttribute=nr,e.ArcCurve=ac,e.CatmullRomCurve3=pc,e.CubicBezierCurve=gc,e.CubicBezierCurve3=vc,e.EllipseCurve=oc,e.LineCurve=yc,e.LineCurve3=_c,e.QuadraticBezierCurve=xc,e.QuadraticBezierCurve3=bc,e.SplineCurve=wc,e.REVISION="94",e.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},e.CullFaceNone=V,e.CullFaceBack=W,e.CullFaceFront=X,e.CullFaceFrontBack=3,e.FrontFaceDirectionCW=0,e.FrontFaceDirectionCCW=1,e.BasicShadowMap=0,e.PCFShadowMap=U,e.PCFSoftShadowMap=k,e.FrontSide=B,e.BackSide=Me,e.DoubleSide=te,e.FlatShading=1,e.SmoothShading=2,e.NoColors=Te,e.FaceColors=1,e.VertexColors=T,e.NoBlending=q,e.NormalBlending=Y,e.AdditiveBlending=J,e.SubtractiveBlending=Z,e.MultiplyBlending=K,e.CustomBlending=Q,e.AddEquation=E,e.SubtractEquation=S,e.ReverseSubtractEquation=A,e.MinEquation=R,e.MaxEquation=L,e.ZeroFactor=P,e.OneFactor=C,e.SrcColorFactor=O,e.OneMinusSrcColorFactor=I,e.SrcAlphaFactor=D,e.OneMinusSrcAlphaFactor=N,e.DstAlphaFactor=F,e.OneMinusDstAlphaFactor=z,e.DstColorFactor=j,e.OneMinusDstColorFactor=H,e.SrcAlphaSaturateFactor=G,e.NeverDepth=$,e.AlwaysDepth=ee,e.LessDepth=ie,e.LessEqualDepth=re,e.EqualDepth=ne,e.GreaterEqualDepth=oe,e.GreaterDepth=ae,e.NotEqualDepth=se,e.MultiplyOperation=ce,e.MixOperation=le,e.AddOperation=he,e.NoToneMapping=ue,e.LinearToneMapping=Ee,e.ReinhardToneMapping=pe,e.Uncharted2ToneMapping=de,e.CineonToneMapping=fe,e.UVMapping=300,e.CubeReflectionMapping=me,e.CubeRefractionMapping=ge,e.EquirectangularReflectionMapping=ve,e.EquirectangularRefractionMapping=ye,e.SphericalReflectionMapping=_e,e.CubeUVReflectionMapping=xe,e.CubeUVRefractionMapping=be,e.RepeatWrapping=we,e.ClampToEdgeWrapping=Se,e.MirroredRepeatWrapping=Ae,e.NearestFilter=Re,e.NearestMipMapNearestFilter=Le,e.NearestMipMapLinearFilter=Pe,e.LinearFilter=Ce,e.LinearMipMapNearestFilter=Oe,e.LinearMipMapLinearFilter=Ie,e.UnsignedByteType=De,e.ByteType=Be,e.ShortType=Ne,e.UnsignedShortType=Ue,e.IntType=ke,e.UnsignedIntType=Fe,e.FloatType=ze,e.HalfFloatType=je,e.UnsignedShort4444Type=He,e.UnsignedShort5551Type=Ge,e.UnsignedShort565Type=Ve,e.UnsignedInt248Type=We,e.AlphaFormat=Xe,e.RGBFormat=qe,e.RGBAFormat=Ye,e.LuminanceFormat=Je,e.LuminanceAlphaFormat=Ze,e.RGBEFormat=Ke,e.DepthFormat=Qe,e.DepthStencilFormat=$e,e.RGB_S3TC_DXT1_Format=et,e.RGBA_S3TC_DXT1_Format=tt,e.RGBA_S3TC_DXT3_Format=it,e.RGBA_S3TC_DXT5_Format=rt,e.RGB_PVRTC_4BPPV1_Format=nt,e.RGB_PVRTC_2BPPV1_Format=ot,e.RGBA_PVRTC_4BPPV1_Format=at,e.RGBA_PVRTC_2BPPV1_Format=st,e.RGB_ETC1_Format=ct,e.RGBA_ASTC_4x4_Format=lt,e.RGBA_ASTC_5x4_Format=ht,e.RGBA_ASTC_5x5_Format=ut,e.RGBA_ASTC_6x5_Format=pt,e.RGBA_ASTC_6x6_Format=dt,e.RGBA_ASTC_8x5_Format=ft,e.RGBA_ASTC_8x6_Format=mt,e.RGBA_ASTC_8x8_Format=gt,e.RGBA_ASTC_10x5_Format=vt,e.RGBA_ASTC_10x6_Format=yt,e.RGBA_ASTC_10x8_Format=_t,e.RGBA_ASTC_10x10_Format=xt,e.RGBA_ASTC_12x10_Format=bt,e.RGBA_ASTC_12x12_Format=wt,e.LoopOnce=2200,e.LoopRepeat=2201,e.LoopPingPong=2202,e.InterpolateDiscrete=2300,e.InterpolateLinear=2301,e.InterpolateSmooth=2302,e.ZeroCurvatureEnding=2400,e.ZeroSlopeEnding=2401,e.WrapAroundEnding=2402,e.TrianglesDrawMode=Mt,e.TriangleStripDrawMode=1,e.TriangleFanDrawMode=2,e.LinearEncoding=Tt,e.sRGBEncoding=Et,e.GammaEncoding=St,e.RGBEEncoding=At,e.LogLuvEncoding=3003,e.RGBM7Encoding=Rt,e.RGBM16Encoding=Lt,e.RGBDEncoding=Pt,e.BasicDepthPacking=Ct,e.RGBADepthPacking=Ot,e.TangentSpaceNormalMap=It,e.ObjectSpaceNormalMap=Dt,e.CubeGeometry=Rr,e.Face4=function(e,t,i,r,n,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Yi(e,t,i,n,o,a)},e.LineStrip=0,e.LinePieces=1,e.MeshFaceMaterial=function(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e},e.MultiMaterial=function(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,(e.materials=e).clone=function(){return e.slice()},e},e.PointCloud=function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new wa(e,t)},e.Particle=function(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new pa(e)},e.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new wa(e,t)},e.PointCloudMaterial=function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new ba(e)},e.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new ba(e)},e.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new ba(e)},e.Vertex=function(e,t,i){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Ft(e,t,i)},e.DynamicBufferAttribute=function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new nr(e,t).setDynamic(!0)},e.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new or(e,t)},e.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new ar(e,t)},e.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new sr(e,t)},e.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new cr(e,t)},e.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new lr(e,t)},e.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new hr(e,t)},e.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new ur(e,t)},e.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new pr(e,t)},e.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new dr(e,t)},e.ClosedSplineCurve3=au,e.SplineCurve3=su,e.Spline=cu,e.AxisHelper=function(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new nu(e)},e.BoundingBoxHelper=function(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new eu(e,t)},e.EdgesHelper=function(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new _a(new Ps(e.geometry),new va({color:void 0!==t?t:16777215}))},e.WireframeHelper=function(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new _a(new Sa(e.geometry),new va({color:void 0!==t?t:16777215}))},e.XHRLoader=function(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Qs(e)},e.BinaryTextureLoader=function(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new ec(e)},e.GeometryUtils=lu,e.ImageUtils=hu,e.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},e.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},e.SceneUtils=uu,e.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof i&&void 0!==t?n(i):"function"==typeof define&&define.amd?define(["exports"],n):n(r.THREE={})},{}]},{},[8]);
//# sourceMappingURL=bundle.js.map
